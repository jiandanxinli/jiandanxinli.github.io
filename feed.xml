<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ç®€å•å¿ƒç†æŠ€æœ¯å›¢é˜Ÿ</title>
  <subtitle>ç®€å•å¿ƒç† Â· æŠ€æœ¯å›¢é˜Ÿ</subtitle>
  <id>https://jiandanxinli.github.io/</id>
  <link href="https://jiandanxinli.github.io/"/>
  <link href="https://jiandanxinli.github.io/feed.xml" rel="self"/>
  <updated>2016-11-16T08:00:00+08:00</updated>
  <author>
    <name>åŒ—äº¬ç«¹é—´ç§‘æŠ€æœ‰é™å…¬å¸</name>
  </author>
  <entry>
    <title>Turbolinks-iOS ä¸Šè·¯å®ç”¨æ‰‹å†Œ Â· Turbolinks Part 3</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-11-16.html"/>
    <id>https://jiandanxinli.github.io/2016-11-16.html</id>
    <published>2016-11-16T08:00:00+08:00</published>
    <updated>2016-11-16T10:23:41+08:00</updated>
    <author>
      <name>fengd</name>
    </author>
    <content type="html">&lt;p&gt;PS. Turbolinks ç³»åˆ—çš„ Part 1ã€2ã€4 è¿˜åœ¨ç¼–å†™ä¸­ï¼Œæ•¬è¯·æœŸå¾… :P&lt;/p&gt;

&lt;h3&gt;å‰æ&lt;/h3&gt;

&lt;p&gt;è¦ç”¨ turbolinks-iOS æ¥å†™ä¸€ä¸ª Hybrid çš„ App çš„å‰ææ˜¯ä½ çš„ç½‘ç«™ä½¿ç”¨äº† &lt;a href="https://github.com/turbolinks/turbolinks"&gt;turbolinks&lt;/a&gt;ï¼Œ å¦‚ä½•ä½¿ç”¨ turbolinks, è¯·çœ‹&lt;a href="https://github.com/turbolinks/turbolinks"&gt;è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;å®‰è£…&lt;/h3&gt;

&lt;p&gt;é€šè¿‡ Cocoapods æˆ–è€… Carthage å®‰è£…ï¼Œéƒ½æ˜¯ç›´æ¥å¼•ç”¨äº† github ä¸Šçš„åœ°å€ã€‚&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="n"&gt;github&lt;/span&gt; &lt;span class="s2"&gt;"turbolinks/turbolinks-ios"&lt;/span&gt; &lt;span class="s2"&gt;"3.0"&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ–è€…&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="n"&gt;pod&lt;/span&gt; &lt;span class="s1"&gt;'Turbolinks'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:git&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;'https://github.com/turbolinks/turbolinks-ios.git'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;branch: &lt;/span&gt;&lt;span class="s1"&gt;'swift-3.0'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;turbolinks-iOS æ˜¯ä½¿ç”¨çº¯ swift å†™çš„ï¼Œæ”¯æŒ iOS 8.0 ä»¥ä¸Šçš„ç‰ˆæœ¬ã€‚å¦‚æœé¡¹ç›®å·²ç»ä½¿ç”¨äº† swift 3.0ï¼Œ éœ€è¦ä½¿ç”¨ 3.0 çš„åˆ†æ”¯ã€‚è™½ç„¶å®˜æ–¹å®˜æ–¹è¯´ 3.0çš„åˆ†æ”¯ä»–ä»¬æ²¡æœ‰åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ç”¨è¿‡ï¼Œä½†æ˜¯æˆ‘ä»¬ç”¨ä¸‹æ¥æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;

&lt;h3&gt;ä½¿ç”¨&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆå»ºè®®æŠŠ turbolinks-iOS çš„ä»£ç éƒ½ä¸‹è½½ä¸‹æ¥ï¼Œå…ˆè·‘ä¸€ä¸‹ä»–çš„demoï¼Œdemo è™½ç„¶å¾ˆç®€å•ï¼Œä½†æ˜¯åŸºæœ¬ä¸ŠæŠŠèƒ½ç¢°åˆ°çš„æƒ…å†µéƒ½å†™ä¸Šå»äº†ï¼Œæ¯”å¦‚ç½‘é¡µè¯·æ±‚å¤±è´¥ï¼Œé‡åˆ°éœ€è¦ç™»å½•çš„æƒ…å†µç­‰ã€‚&lt;/p&gt;

&lt;h4&gt;åˆ›å»ºSession&lt;/h4&gt;

&lt;p&gt;ä½¿ç”¨ turbolinks-iOSï¼Œæœ€é‡è¦çš„ä¸€ä¸ªæ¦‚å¿µå°±æ˜¯ sessionï¼Œ session æ§åˆ¶ç€ç½‘é¡µçš„å‰è¿›å’Œè¿”å›ï¼Œä¹Ÿæ˜¯ç½‘é¡µå’ŒåŸç”Ÿä»£ç ä¹‹é—´äº¤äº’çš„é€šé“ã€‚åˆ›å»º session, è®¾ç½® delegateï¼Œ åŒæ—¶è®¾ç½®å¥½ processPoolã€‚ å¦‚æœä½ æœ‰å¤šä¸ª session, å¹¶ä¸”æƒ³è¦åœ¨å¤šä¸ª session ä¹‹é—´å…±äº« cookiesï¼Œé‚£å°±éœ€è¦åˆ›å»ºä¸€ä¸ªå…±äº«çš„ poolï¼Œæ¯”å¦‚é€šè¿‡ singleton çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;pre class="highlight swift"&gt;&lt;code&gt;&lt;span class="n"&gt;fileprivate&lt;/span&gt; &lt;span class="kd"&gt;lazy&lt;/span&gt; &lt;span class="k"&gt;var&lt;/span&gt; &lt;span class="nv"&gt;webViewConfiguration&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;WKWebViewConfiguration&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;let&lt;/span&gt; &lt;span class="nv"&gt;configuration&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kt"&gt;WKWebViewConfiguration&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;userContentController&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;"turbolinksDemo"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;processPool&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;webViewProcessPool&lt;/span&gt;
    &lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;applicationNameForUserAgent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;"TurbolinksDemo"&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;configuration&lt;/span&gt;
&lt;span class="p"&gt;}()&lt;/span&gt;

&lt;span class="n"&gt;fileprivate&lt;/span&gt; &lt;span class="kd"&gt;lazy&lt;/span&gt; &lt;span class="k"&gt;var&lt;/span&gt; &lt;span class="nv"&gt;session&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;Session&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;let&lt;/span&gt; &lt;span class="nv"&gt;session&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kt"&gt;Session&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;webViewConfiguration&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;webViewConfiguration&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;delegate&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;self&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;session&lt;/span&gt;
&lt;span class="p"&gt;}()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;å®ç° Delegate&lt;/h4&gt;

&lt;p&gt;iOS é‡Œé€‚åˆåšå‰è¿›åé€€è¿™ä»¶äº‹æœ€åˆé€‚çš„å°±æ˜¯ UINavigationController äº†ï¼Œå› æ­¤é€šå¸¸ä¼šåœ¨ navigationController ä¸­æ–°å»º session å®ä¾‹ï¼Œå¹¶æŠŠè‡ªèº«ä½œä¸ºè¿™ä¸ª session çš„ delegateã€‚ä½œä¸º session çš„ delegateï¼Œå¿…é¡»å®ç°ä¸¤ä¸ªæ–¹æ³•ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;func session(_ session: Session, didProposeVisitToURL URL: URL, withAction action: Action)&lt;/code&gt;, ç½‘é¡µä¸Šä»»ä½•çš„è®¿é—®æ–°ç½‘é¡µçš„äº‹ä»¶ï¼Œéƒ½ä¼šå›è°ƒè¿™ä¸ªæ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class="highlight swift"&gt;&lt;code&gt;  &lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nf"&gt;session&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="nv"&gt;session&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;Session&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;didProposeVisitToURL&lt;/span&gt; &lt;span class="kt"&gt;URL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;URL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;withAction&lt;/span&gt; &lt;span class="nv"&gt;action&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;Action&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;let&lt;/span&gt; &lt;span class="nv"&gt;visitable&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kt"&gt;JDXLVisitableViewController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;url&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;URL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;action&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="kt"&gt;Advance&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nf"&gt;pushViewController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;visitable&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;animated&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;action&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="kt"&gt;Replace&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;viewControllers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;var&lt;/span&gt; &lt;span class="nv"&gt;controllers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;viewControllers&lt;/span&gt;
        &lt;span class="n"&gt;controllers&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;visitable&lt;/span&gt;
        &lt;span class="nf"&gt;setViewControllers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;controllers&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;animated&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nf"&gt;popViewController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;animated&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="nf"&gt;pushViewController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;visitable&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;animated&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// DO NOT FORGET TO CALL visit&lt;/span&gt;
    &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;visit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;visitable&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»£ç å¾ˆç›´è§‚ï¼Œæ¯æ¬¡è®¿é—®ä¸€ä¸ªæ–°çš„URLæ—¶ï¼Œéƒ½æ ¹æ® action å€¼æ¥åˆ¤æ–­æ˜¯ push è¿›ä¸€ä¸ªæ–°çš„ viewcontroller, è¿˜æ˜¯æ›¿æ¢å½“å‰çš„ viewcontrollerã€‚ æ›¿æ¢ä¹Ÿå°±æ˜¯ pop å‡ºå½“å‰çš„ controllerï¼Œpush è¿›æ–°çš„ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å¤„ç†å®Œ viewcontroller ä¹‹é—´çš„å…³ç³»ä¹‹åï¼Œè¿˜è¦è°ƒç”¨ session.visit(visitable)ï¼Œé€šçŸ¥èƒŒåçš„ WKWebView è®¿é—®æ–°çš„åœ°å€ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;func session(_ session: Session, didFailRequestForVisitable visitable: Visitable, withError error: NSError)&lt;/code&gt;
è¿™æ˜¯å½“è¯·æ±‚å¤±è´¥æ—¶ï¼Œå¤„ç†å›è°ƒçš„å‡½æ•°ã€‚ æ¯”å¦‚æœåŠ¡å™¨ç«¯è¿”å› 401ï¼Œ å¯ä»¥å¼¹å‡ºç™»é™†ç•Œé¢ã€‚ ç½‘ç»œä¸å¥½ï¼Œæˆ–è€…404æ—¶ï¼Œå¯ä»¥æ˜¾ç¤ºè‡ªå®šä¹‰çš„é”™è¯¯é¡µé¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class="highlight swift"&gt;&lt;code&gt;&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nf"&gt;session&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="nv"&gt;session&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;Session&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;didFailRequestForVisitable&lt;/span&gt; &lt;span class="nv"&gt;visitable&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;Visitable&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;withError&lt;/span&gt; &lt;span class="nv"&gt;error&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;NSError&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;NSLog&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"ERROR: %@"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;guard&lt;/span&gt; &lt;span class="k"&gt;let&lt;/span&gt; &lt;span class="nv"&gt;visitableViewController&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;visitable&lt;/span&gt; &lt;span class="k"&gt;as?&lt;/span&gt; &lt;span class="kt"&gt;JDXLVisitableViewController&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;let&lt;/span&gt; &lt;span class="nv"&gt;errorCode&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kt"&gt;ErrorCode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;rawValue&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="n"&gt;errorCode&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nv"&gt;httpFailure&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;let&lt;/span&gt; &lt;span class="nv"&gt;statusCode&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;userInfo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;"statusCode"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;as!&lt;/span&gt; &lt;span class="kt"&gt;Int&lt;/span&gt;
      &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="n"&gt;statusCode&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;400&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="o"&gt;....&lt;/span&gt;
        &lt;span class="c1"&gt;//do something&lt;/span&gt;
      &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;401&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
          &lt;span class="nf"&gt;presentAuthenticationViewController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;visitable&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;visitableViewController&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;404&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
          &lt;span class="n"&gt;visitableViewController&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;presentError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;error&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="kt"&gt;HTTPNotFoundError&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
          &lt;span class="n"&gt;visitableViewController&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;presentError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;error&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;TurbolinkError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;HTTPStatusCode&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;statusCode&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nv"&gt;networkFailure&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;visitableViewController&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;presentError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;error&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="kt"&gt;NetworkError&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;å¤„ç† Form æäº¤&lt;/h4&gt;

&lt;p&gt;Turbolinks é»˜è®¤ä¸æ¥å—æ ‡å‡†çš„ HTML Formæäº¤ï¼Œ &lt;a href="https://github.com/turbolinks/turbolinks-ios#handling-form-submission"&gt;åŸå› å¦‚ä¸‹&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;By default, Turbolinks for iOS prevents standard HTML form submissions. This is because a form submission often results in redirection to a different URL, which means the Visitable view controllerâ€™s URL would change in place.
Instead, we recommend submitting forms with JavaScript using XMLHttpRequest, and using the response to tell Turbolinks where to navigate afterwards. See Redirecting After a Form Submission in the Turbolinks documentation for more details.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å®˜ç½‘çš„è¿™å¥è¯å°±æ˜¯æˆ‘ pull request çš„ï¼Œ^&lt;em&gt;^ï¼Œ å°±ä¸ç¿»è¯‘äº†ã€‚ æ”¹ç”¨ Ajax çš„æ–¹å¼æäº¤ Form,  åœ¨è¿”å›çš„ç»“æœä¸­ï¼Œ è°ƒç”¨ `Turbolinks.visit(some&lt;/em&gt;url)` æ¥æŒ‡å‘æ–°çš„é¡µé¢ã€‚&lt;/p&gt;

&lt;h3&gt;Turbolinks å’Œ Turbolinks-iOS æ˜¯å¦‚ä½•é€šä¿¡çš„&lt;/h3&gt;

&lt;p&gt;Turbolinks-iOS ä½¿ç”¨çš„ WKWebView å¦‚ä½•æ•è·ç½‘é¡µä¸Šçš„é¡µé¢è®¿é—®äº‹ä»¶ï¼Œæ¯”å¦‚ç‚¹å‡»ä¸€ä¸ª a æ ‡ç­¾ ? é€šè¿‡ WKUserScriptã€‚&lt;/p&gt;

&lt;p&gt;å½“ webview åŠ è½½çš„é¡µé¢ &amp;#39;document ready&amp;#39; æ—¶ï¼Œ Turbolinks-iOS é€šè¿‡ WKUserScript åŠ è½½ä¸€ä¸ªå®šåˆ¶çš„ JS æ–‡ä»¶.&lt;/p&gt;
&lt;pre class="highlight swift"&gt;&lt;code&gt;&lt;span class="k"&gt;let&lt;/span&gt; &lt;span class="nv"&gt;bundle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kt"&gt;Bundle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;for&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nf"&gt;type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;of&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;self&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="k"&gt;let&lt;/span&gt; &lt;span class="nv"&gt;source&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;try!&lt;/span&gt; &lt;span class="kt"&gt;String&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;contentsOf&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;bundle&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;url&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;forResource&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;"WebView"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;withExtension&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;"js"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;encoding&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;String&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="kt"&gt;Encoding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utf8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;let&lt;/span&gt; &lt;span class="nv"&gt;userScript&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kt"&gt;WKUserScript&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;source&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;injectionTime&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;atDocumentEnd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;forMainFrameOnly&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;userContentController&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;addUserScript&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;userScript&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;userContentController&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;"turbolinks"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªJSæ–‡ä»¶åšäº†ä»€ä¹ˆï¼Ÿ ä»–æŠŠè‡ªå·±ä½œä¸ºä¸€ä¸ª adapter ç»‘å®šåˆ° Turbolinks ä¸Šäº†ã€‚&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;WebView&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;controller&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;messageHandler&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;controller&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;controller&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;messageHandler&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;messageHandler&lt;/span&gt;
  &lt;span class="nx"&gt;controller&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;adapter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;//init&lt;/span&gt;
&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;webView&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nx"&gt;WebView&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;Turbolinks&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;controller&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;webkit&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;messageHandlers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;turbolinks&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å› ä¸ºç½‘é¡µæ˜¯åŸºäºTurbolinksï¼Œå› æ­¤ç½‘é¡µä¸Šæœ‰ä»»ä½•&amp;quot;é£å¹è‰åŠ¨&amp;quot;éƒ½ä¼šé€šè¿‡ controllerï¼Œä¼ åˆ°è¿™ä¸ª adapter ä¸Šæ¥ã€‚æ¯”å¦‚ï¼Œè®¿é—®ä¸€ä¸ªæ–°çš„åœ°å€æ˜¯:&lt;/p&gt;
&lt;pre class="highlight coffeescript"&gt;&lt;code&gt;&lt;span class="na"&gt;visit&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;location&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;options&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{})&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;
  &lt;span class="nx"&gt;location&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;Turbolinks&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Location&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wrap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;location&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vi"&gt;@&lt;/span&gt;&lt;span class="na"&gt;applicationAllowsVisitingLocation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;location&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vi"&gt;@&lt;/span&gt;&lt;span class="na"&gt;locationIsVisitable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;location&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="nx"&gt;action&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;options&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;action&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="s"&gt;"advance"&lt;/span&gt;
      &lt;span class="vi"&gt;@&lt;/span&gt;&lt;span class="na"&gt;adapter&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;visitProposedToLocationWithAction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;location&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;action&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
      &lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;location&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;location&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è€Œ adapter åœ¨é€šè¿‡ webkit.messageHandlers æŠŠæ¶ˆæ¯ä¼ é€’ç»™ iOSï¼Œæ¯”å¦‚: &lt;code&gt;visitRequestStarted&lt;/code&gt;&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="nx"&gt;visitProposedToLocationWithAction&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;location&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;action&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;postMessage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"visitProposed"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="na"&gt;location&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;location&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;absoluteURL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="na"&gt;action&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;action&lt;/span&gt; &lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;},&lt;/span&gt;

&lt;span class="nx"&gt;postMessage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;messageHandler&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;postMessage&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt; &lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="na"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;data&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt; &lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="p"&gt;},&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ª messageHandler å°±æ˜¯ åˆå§‹åŒ–ä¼ è¿›æ¥çš„ &lt;code&gt;webkit.messageHandlers.turbolinks&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;iOS åŸç”Ÿä»£ç ï¼Œå†é€šè¿‡ WKScriptMessageHandler æ•è·è¿™äº›äº‹ä»¶å,é€šè¿‡ VisitDelegate å’Œ SessionDelegateï¼Œ&lt;/p&gt;
&lt;pre class="highlight swift"&gt;&lt;code&gt;&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nf"&gt;userContentController&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="nv"&gt;userContentController&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;WKUserContentController&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;didReceive&lt;/span&gt; &lt;span class="nv"&gt;message&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;WKScriptMessage&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;guard&lt;/span&gt; &lt;span class="k"&gt;let&lt;/span&gt; &lt;span class="nv"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kt"&gt;ScriptMessage&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;//....some codes....&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="kt"&gt;VisitProposed&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;delegate&lt;/span&gt;&lt;span class="p"&gt;?&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;webView&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;didProposeVisitToLocation&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;location&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;withAction&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;action&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;//....some other codes...&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="kt"&gt;ErrorRaised&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;let&lt;/span&gt; &lt;span class="nv"&gt;error&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;"error"&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;as?&lt;/span&gt; &lt;span class="kt"&gt;String&lt;/span&gt;
        &lt;span class="kt"&gt;NSLog&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"JavaScript error: %@"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt; &lt;span class="p"&gt;??&lt;/span&gt; &lt;span class="s"&gt;"&amp;lt;unknown error&amp;gt;"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;session å°±æ˜¯è¿™é‡Œçš„è¿™ä¸ªdelegateï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªdelegateçš„å®ç°æ–¹æ³•ä¸­&lt;/p&gt;
&lt;pre class="highlight swift"&gt;&lt;code&gt;&lt;span class="kd"&gt;func&lt;/span&gt; &lt;span class="nf"&gt;webView&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="nv"&gt;webView&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;WebView&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;didProposeVisitToLocation&lt;/span&gt; &lt;span class="nv"&gt;location&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;URL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;withAction&lt;/span&gt; &lt;span class="nv"&gt;action&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;Action&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;delegate&lt;/span&gt;&lt;span class="p"&gt;?&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;session&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;didProposeVisitToURL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;location&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;withAction&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;action&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™å°±å›åˆ°äº†æœ€åˆå®ç°çš„ SessionDelegate äº†ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ UINavigationController&lt;/p&gt;

&lt;h3&gt;è§†é¢‘ä»‹ç»&lt;/h3&gt;

&lt;p&gt;è¿™æ˜¯åœ¨2016å¹´çš„ Rails Conference ä¸Šï¼ŒTurbolinks å’Œ Turbolinks-iOS ä¸»è¦è´¡çŒ®è€… &lt;a href="https://github.com/sstephenson"&gt;Sam Stephenson&lt;/a&gt; åšçš„ä¸€ä¸ªæ¼”è®²ï¼Œå€¼å¾—ä¸€çœ‹ï¼Œ&lt;a href="https://www.youtube.com/watch?v=SWEts0rlezA"&gt;Youtube åœ°å€&lt;/a&gt;ã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>TextInput è¯¦è§£ Â· Material Design Part 1</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-11-14.html"/>
    <id>https://jiandanxinli.github.io/2016-11-14.html</id>
    <published>2016-11-14T08:00:00+08:00</published>
    <updated>2016-11-14T11:43:16+08:00</updated>
    <author>
      <name>BugDev</name>
    </author>
    <content type="html">&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªç³»åˆ—æ–‡ç« ï¼Œåœ¨è¿™ä¸ªç³»åˆ—é‡Œï¼Œæˆ‘ä¼šæŒ‰æ‰“é€ ä¸€ä¸ª Material Design App çš„è·¯çº¿ä»‹ç»æ‰€æœ‰åº”å½“æŒæ¡å’Œå€¼å¾—æŒæ¡çš„ç³»ç»Ÿç»„ä»¶ã€‚
ä½ ä¼šåœ¨è¿™äº›æ–‡ç« é‡Œäº†è§£åˆ°è¿™äº›ç»„ä»¶çš„ä½¿ç”¨å’Œå†…éƒ¨å®ç°åŸç†ï¼Œä»¥åŠå®ƒä»¬èƒŒåæ‰€åæ˜ çš„ Material Design çš„è®¾è®¡æ€æƒ³ï¼Œå¸Œæœ›ä½ ä¼šå–œæ¬¢ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Tips&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘çš„æ¯ä¸€ç¯‡åšå®¢éƒ½ä¼šæä¾›è¯¦å°½çš„APIä»‹ç»ï¼Œå¦‚æœä½ æƒ³å¿«é€ŸæŸ¥é˜…æŸä¸ªåŠŸèƒ½çš„APIæˆ–å¦‚ä½•å®ç°ï¼Œå»ºè®®Ctrl+Fï¼ˆCommad+Fï¼‰åœ¨æœ¬é¡µé¢æœç´¢å…³é”®å­—æŸ¥æ‰¾ã€‚&lt;/p&gt;

&lt;p&gt;Thanks for reading~!&lt;/p&gt;

&lt;h2&gt;ç›®å½•&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;åŸºæœ¬ä»‹ç»&lt;/li&gt;
&lt;li&gt;TextInputLayoutè¯¦è§£&lt;/li&gt;
&lt;li&gt;ä»£ç æ‚çƒ©&lt;/li&gt;
&lt;li&gt;ç™»å½•é¡µé¢å®æˆ˜&lt;/li&gt;
&lt;/ol&gt;

&lt;h2&gt;åŸºæœ¬ä»‹ç»&lt;/h2&gt;

&lt;p&gt;æ–‡æœ¬è¾“å…¥æ¡†é€šå¸¸éƒ½æœ‰æç¤ºè¯­ï¼Œå‘ŠçŸ¥ç”¨æˆ·è¿™é‡Œéœ€è¦è¾“å…¥ä»€ä¹ˆã€‚æç¤ºè¯­é€šå¸¸æœ‰ä¸¤ç§å½¢å¼ï¼Œ&lt;strong&gt;ä½äºè¾“å…¥æ¡†å†…ï¼Œè¾“å…¥æ–‡å­—åå³æ¶ˆå¤±&lt;/strong&gt; æˆ– &lt;strong&gt;å›ºå®šæµ®äºè¾“å…¥æ¡†ä¸Šæ–¹æˆ–å·¦ä¾§&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å°†æç¤ºç½®äºè¾“å…¥æ¡†å†…èƒ½å¤ŸèŠ‚çœç©ºé—´ï¼Œä½†æœ‰ä¸ªè‡´å‘½çš„ç¼ºç‚¹å°±æ˜¯å®¹æ˜“å¯¼è‡´ç”¨æˆ·å¤±å»ä¸Šä¸‹æ–‡ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬æœ‰åä¸ªæ–‡æœ¬æ¡†éœ€è¦è¾“å…¥çš„æ—¶å€™ï¼Œå¦‚æœæ— æ³•å§‹ç»ˆçœ‹åˆ°æç¤ºè¯­ï¼Œå¾ˆå®¹æ˜“å¿˜è®°è¿™é‡Œè¯¥å¡«å…¥ä»€ä¹ˆæ ·çš„æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;æç¤ºè¯­å›ºå®šäºè¾“å…¥æ¡†ä¸Šæ–¹æˆ–å·¦ä¾§ï¼Œè®©äººèƒ½å¤Ÿéå¸¸æ˜ç¡®çš„çŸ¥é“è¿™é‡Œè¯¥å¡«å…¥çš„å†…å®¹ï¼Œä½†åœ¨åŠ¨ç”»æ•ˆæœå’Œç„¦ç‚¹åŒºåˆ†ä¸Šå´ä¸æ˜¯ååˆ†å‡ºè‰²ã€‚&lt;/p&gt;

&lt;p&gt;ç»“åˆè¿™ä¸¤ç§ç±»å‹çš„è¾“å…¥æ¡†ä¼˜ç‚¹ï¼ŒMaterial Designæ¨å‡ºäº†ä¸€ç§ä¼˜ç§€çš„æ–‡æœ¬è¾“å…¥æ¡†å½¢å¼â€”â€”&lt;strong&gt;å½“ç”¨æˆ·ç‚¹å‡»ç©ºå†…å®¹çš„æ–‡æœ¬è¾“å…¥æ¡†æ—¶ï¼ŒåŸæœ¬ä½äºè¾“å…¥æ¡†å†…çš„æç¤ºè¯­ä¼šç»ç”±ä¸€ä¸ªåŠ¨ç”»æµ®åŠ¨è‡³è¾“å…¥æ¡†ä¸Šæ–¹ï¼Œæ–‡æœ¬é¢œè‰²åŒæ—¶å˜æˆå¼ºè°ƒè‰²ï¼Œæ˜ç¡®æ˜¾ç¤ºæ­¤æ—¶è¯¥ç»„ä»¶è·å¾—ç„¦ç‚¹&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†è®©å¼€å‘è€…æ›´åŠ æ–¹ä¾¿åœ°å®ç°è¿™ç§æ•ˆæœï¼ŒGoogleæ¨å‡ºäº†&lt;strong&gt;TextInputLayout&lt;/strong&gt;ç»„ä»¶ã€‚å‘è¯¥ç»„ä»¶ä¸­æ”¾å…¥ä¸€ä¸ª&lt;strong&gt;EditText&lt;/strong&gt;ç»„ä»¶ï¼ˆæˆ–å…¶æ‰©å±•ç±»ä¹Ÿå¯ï¼Œæ¯”å¦‚&lt;strong&gt;TextInputEditText&lt;/strong&gt;ï¼‰ï¼Œä¾¿å¯è½»æ¾å®ç°Material Designæ–‡æ¡£ä¸­æ‰€è¦æ±‚çš„æ•ˆæœã€‚&lt;/p&gt;

&lt;p&gt;å…¶ä¸­ï¼Œè¦æä¸€ä¸‹çš„æ˜¯TextInputEditTextã€‚ç›¸æ¯”äºå…¶ä»–çš„EditTextç±»ï¼Œä½¿ç”¨è¯¥ç±»ä½œä¸ºå­Viewæ”¾å…¥TextInputLayoutå¯ä»¥åœ¨&lt;strong&gt;å…¨å±æ¨¡å¼æ—¶ä¾ç„¶åœ¨ç¼–è¾‘å™¨é‡Œå±•ç¤ºhint&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ä¸€èµ·æ¥è¯¦ç»†åœ°æ•´ç†å­¦ä¹ ä¸€ä¸‹TextInputLayoutã€‚&lt;/p&gt;

&lt;h2&gt;TextInputLayoutè¯¦è§£&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;xmlå±æ€§&amp;amp;å¸¸ç”¨æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;counterEnabled&lt;/strong&gt;ï¼šfalse or trueï¼Œç”¨äºè®¾ç½®å­—ç¬¦è®¡æ•°å™¨çš„å¼€å¯æˆ–å…³é—­ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹åº”æ–¹æ³•ï¼š&lt;strong&gt;&lt;em&gt;setCounterEnabled(boolean)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;counterMaxLength&lt;/strong&gt;ï¼šè®¾ç½®å­—ç¬¦è®¡æ•°å™¨çš„æœ€å¤§é•¿åº¦ã€‚&lt;strong&gt;ï¼ˆä»…ç”¨äºè®¾ç½®è®¡æ•°å™¨æœ€å¤§å€¼ï¼Œå¹¶ä¸å½±å“æ–‡æœ¬å®é™…èƒ½è¾“å…¥çš„æœ€å¤§é•¿åº¦ï¼‰&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¯¹åº”æ–¹æ³•ï¼š&lt;strong&gt;&lt;em&gt;setCounterMaxLength(int)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;errorEnabled&lt;/strong&gt;ï¼šfalse or trueï¼Œç”¨äºè®¾ç½®é”™è¯¯æç¤ºæ˜¯å¦å¼€å¯ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹åº”æ–¹æ³•ï¼š&lt;strong&gt;&lt;em&gt;setErrorEnabled(boolean)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;hint&lt;/strong&gt;ï¼šè®¾ç½®è¾“å…¥æ¡†çš„æç¤ºè¯­ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹åº”æ–¹æ³•ï¼š&lt;strong&gt;&lt;em&gt;setHint(CharSequence)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;hintAnimationEnabled&lt;/strong&gt;ï¼štrue or falseï¼Œå¼€å¯æˆ–å…³é—­hintæµ®åŠ¨æˆæ ‡ç­¾çš„åŠ¨ç”»æ•ˆæœã€‚&lt;/p&gt;

&lt;p&gt;å¯¹åº”æ–¹æ³•ï¼š&lt;strong&gt;&lt;em&gt;setHintAnimationEnabled(boolean)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;hintEnabled&lt;/strong&gt;ï¼štrue or falseï¼Œå¼€å¯æˆ–å…³é—­hintæµ®åŠ¨çš„åŠŸèƒ½ï¼Œè®¾ä¸ºfalseçš„è¯å°±å’Œä¹‹å‰çš„EditTextä¸€æ ·ï¼Œåœ¨è¾“å…¥æ–‡å­—åï¼Œæç¤ºè¯­å°±æ¶ˆå¤±äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹åº”æ–¹æ³•ï¼š&lt;strong&gt;&lt;em&gt;setHintEnabled(boolean)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;hintTextAppearance&lt;/strong&gt;ï¼šè®¾ç½®hintçš„styleï¼Œå­—ä½“é¢œè‰²ï¼Œå­—ä½“å¤§å°ç­‰ï¼Œå¯å¼•ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚&lt;strong&gt;è‹¥è¦ä½¿ç”¨è¯·ç»Ÿä¸€ä½¿ç”¨ï¼Œä»¥ä¿è¯APPä½“éªŒçš„ç»Ÿä¸€æ€§ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¯¹åº”æ–¹æ³•ï¼š&lt;strong&gt;&lt;em&gt;setHintTextAppearance(int)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å½“æ–‡æœ¬è¾“å…¥ç±»å‹ä¸ºå¯†ç æ—¶ï¼Œç³»ç»Ÿæä¾›äº†ä¸€ä¸ªå¼€å…³æ¥æ§åˆ¶å¯†ç æ˜¯å¦å¯è§ï¼ˆé»˜è®¤ä¸ºçœ¼ç›ğŸ‘ï¼‰ã€‚æ­¤ä¸ºdesignåŒ…24.2.0æ–°æä¾›çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;passwordToggleEnabled&lt;/strong&gt;ï¼š&lt;strong&gt;æ§åˆ¶å¯†ç å¯è§å¼€å…³æ˜¯å¦å¯ç”¨ã€‚&lt;/strong&gt;è®¾ä¸ºfalseåˆ™è¯¥åŠŸèƒ½ä¸å¯ç”¨ï¼Œå¯†ç è¾“å…¥æ¡†å³ä¾§ä¹Ÿæ²¡æœ‰æ§åˆ¶å¯†ç å¯è§ä¸å¦çš„å¼€å…³ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹åº”æ–¹æ³•ï¼š&lt;strong&gt;&lt;em&gt;setPasswordVisibilityToggleEnabled(boolean)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;passwordToggleDrawable&lt;/strong&gt;ï¼š&lt;strong&gt;è®¾ç½®å¯†ç å¯è§å¼€å…³çš„å›¾æ ‡ã€‚é€šå¸¸æˆ‘ä»¬ä¼šåœ¨ä¸åŒçš„æƒ…å†µä¸‹è®¾å®šä¸åŒçš„å›¾æ ‡ï¼Œå¯é€šè¿‡è‡ªå®šä¹‰ä¸€ä¸ªselectorï¼Œæ ¹æ®â€œstate_checkedâ€å±æ€§æ¥æ§åˆ¶å›¾æ ‡çš„åˆ‡æ¢ã€‚åé¢ä»£ç å®è·µé‡Œä¼šæœ‰ç¤ºèŒƒã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¯¹åº”æ–¹æ³•ï¼š&lt;strong&gt;&lt;em&gt;setPasswordVisibilityToggleDrawable(Drawable)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;passwordToggleTint&lt;/strong&gt;ï¼š&lt;strong&gt;æ§åˆ¶å¯†ç å¯è§å¼€å…³å›¾æ ‡çš„é¢œè‰²ã€‚åœ¨å¼€å¯æˆ–å…³é—­çš„çŠ¶æ€ä¸‹æˆ‘ä»¬å¯ä»¥è®¾å®šä¸åŒçš„é¢œè‰²ï¼Œå¯é€šè¿‡è‡ªå®šä¹‰ä¸€ä¸ªcolorçš„selectorï¼Œæ ¹æ®â€œstate_checkedâ€å’Œâ€œstate_selectedâ€å±æ€§æ¥æ§åˆ¶é¢œè‰²çš„åˆ‡æ¢ã€‚åé¢ä»£ç å®è·µé‡Œä¼šæœ‰ç¤ºèŒƒã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¯¹åº”æ–¹æ³•ï¼š&lt;strong&gt;&lt;em&gt;setPasswordVisibilityToggleTintList(ColorStateList)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;passwordToggleTintMode&lt;/strong&gt;ï¼šæ§åˆ¶å¯†ç å¯è§å¼€å…³å›¾æ ‡çš„èƒŒæ™¯é¢œè‰²æ··åˆæ¨¡å¼ã€‚è¿™ä¸ªåœ°æ–¹æˆ‘ä¸æ˜¯å¾ˆèƒ½ç†è§£ï¼Œæš‚ä½œæ ‡è®°ï¼Œå¸Œæœ›æœ‰äººå¯ä»¥æŒ‡æ•™ã€‚ä¸è¿‡å¯ä»¥è‚¯å®šçš„æ˜¯æ­£å¸¸éœ€æ±‚éƒ½ç”¨ä¸åˆ°è¿™ä¸ªå±æ€§ã€‚&lt;/p&gt;

&lt;p&gt;åˆ†åˆ«æ˜¯ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;multiply[Sa*Da, Sc*Dc]&lt;/li&gt;
&lt;li&gt;screen[Sa+Da-Sa*Da, Sc+Dc-Sc*Dc]&lt;/li&gt;
&lt;li&gt;src_atop[Da, Sc*Da+(1-Sa)*Dc]&lt;/li&gt;
&lt;li&gt;src_in[Sa*Da, Sc*Da]&lt;/li&gt;
&lt;li&gt;src_over[Sa+(1-Sa)&lt;em&gt;Da, Rc=Sc+(1-Sa)&lt;/em&gt;Dc]&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¯¹åº”æ–¹æ³•ï¼š&lt;strong&gt;&lt;em&gt;setPasswordVisibilityToggleTintMode(PorterDuff.Mode)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ³¨&lt;/strong&gt;ï¼šå…³äºè¿™æ–¹é¢çš„çŸ¥è¯†æœ‰å…´è¶£è¯·å‚è€ƒ&lt;a href="http://weishu.me/2015/09/23/Xfermode-in-android/"&gt;Xfermode in android&lt;/a&gt;å…¶ä¸­æœ‰å…³äºè¿™æ–¹é¢æ¦‚å¿µçš„è§£é‡Šã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;passwordToggleContentDescription&lt;/strong&gt;ï¼šè¯¥åŠŸèƒ½æ˜¯ä¸ºTalkbackæˆ–å…¶ä»–æ— éšœç¢åŠŸèƒ½æä¾›çš„ã€‚TalkBackä¼šå»è¯»contentDescriptionçš„å€¼ï¼Œå‘Šè¯‰ç”¨æˆ·è¿™ä¸ªæ“ä½œæ˜¯ä»€ä¹ˆã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¯¹åº”æ–¹æ³•ï¼š&lt;strong&gt;&lt;em&gt;setPasswordVisibilityToggleContentDescription(int)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;h2&gt;ä»£ç æ‚çƒ©&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;æ•ˆæœå›¾&lt;/strong&gt;
 &lt;img src="https://cloud.githubusercontent.com/assets/12692071/20247096/cb1e4a76-a9ff-11e6-935c-3ef67e1ed79c.png" alt="æ•ˆæœå›¾" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ•ˆæœè§†é¢‘â†’&lt;/strong&gt;&lt;a href="http://v.youku.com/v_show/id_XMTczMTQyMDYwNA==.html"&gt;ç‚¹è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Layoutå¸ƒå±€&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;LinearLayout&lt;/span&gt; &lt;span class="na"&gt;xmlns:android=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res/android"&lt;/span&gt;
    &lt;span class="na"&gt;xmlns:app=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res-auto"&lt;/span&gt;
    &lt;span class="na"&gt;xmlns:tools=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/tools"&lt;/span&gt;
    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
    &lt;span class="na"&gt;tools:context=&lt;/span&gt;&lt;span class="s"&gt;"com.jiandanxinli.smileback.materiallogin.LoginActivity"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;ScrollView&lt;/span&gt;
        &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/login_form"&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
        &lt;span class="na"&gt;android:scrollbars=&lt;/span&gt;&lt;span class="s"&gt;"none"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;LinearLayout&lt;/span&gt;
            &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/email_login_form"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
            &lt;span class="na"&gt;android:focusableInTouchMode=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt;
            &lt;span class="na"&gt;android:orientation=&lt;/span&gt;&lt;span class="s"&gt;"vertical"&lt;/span&gt;
            &lt;span class="na"&gt;android:paddingEnd=&lt;/span&gt;&lt;span class="s"&gt;"16dp"&lt;/span&gt;
            &lt;span class="na"&gt;android:paddingStart=&lt;/span&gt;&lt;span class="s"&gt;"16dp"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;LinearLayout&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_marginTop=&lt;/span&gt;&lt;span class="s"&gt;"18dp"&lt;/span&gt;
                &lt;span class="na"&gt;android:orientation=&lt;/span&gt;&lt;span class="s"&gt;"horizontal"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;ImageView&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_gravity=&lt;/span&gt;&lt;span class="s"&gt;"center_vertical"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_marginEnd=&lt;/span&gt;&lt;span class="s"&gt;"12dp"&lt;/span&gt;
                    &lt;span class="na"&gt;android:src=&lt;/span&gt;&lt;span class="s"&gt;"@drawable/ic_perm_identity_black_24dp"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputLayout&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:hint=&lt;/span&gt;&lt;span class="s"&gt;"@string/hotchpotch_name_tv"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                    &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputEditText&lt;/span&gt;
                        &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/edit_name"&lt;/span&gt;
                        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                        &lt;span class="na"&gt;android:inputType=&lt;/span&gt;&lt;span class="s"&gt;"text"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;/android.support.design.widget.TextInputLayout&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;/LinearLayout&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;LinearLayout&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_marginTop=&lt;/span&gt;&lt;span class="s"&gt;"8dp"&lt;/span&gt;
                &lt;span class="na"&gt;android:orientation=&lt;/span&gt;&lt;span class="s"&gt;"horizontal"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;ImageView&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_gravity=&lt;/span&gt;&lt;span class="s"&gt;"center_vertical"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_marginEnd=&lt;/span&gt;&lt;span class="s"&gt;"12dp"&lt;/span&gt;
                    &lt;span class="na"&gt;android:src=&lt;/span&gt;&lt;span class="s"&gt;"@drawable/ic_phone_black_24dp"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputLayout&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:hint=&lt;/span&gt;&lt;span class="s"&gt;"@string/hotchpotch_phone_tv"&lt;/span&gt;
                    &lt;span class="na"&gt;app:counterEnabled=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt;
                    &lt;span class="na"&gt;app:counterMaxLength=&lt;/span&gt;&lt;span class="s"&gt;"11"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                    &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputEditText&lt;/span&gt;
                        &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/edit_phone"&lt;/span&gt;
                        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                        &lt;span class="na"&gt;android:inputType=&lt;/span&gt;&lt;span class="s"&gt;"phone"&lt;/span&gt;
                        &lt;span class="na"&gt;android:maxLength=&lt;/span&gt;&lt;span class="s"&gt;"11"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;/android.support.design.widget.TextInputLayout&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;/LinearLayout&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;LinearLayout&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                &lt;span class="na"&gt;android:orientation=&lt;/span&gt;&lt;span class="s"&gt;"horizontal"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;ImageView&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_gravity=&lt;/span&gt;&lt;span class="s"&gt;"center_vertical"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_marginEnd=&lt;/span&gt;&lt;span class="s"&gt;"12dp"&lt;/span&gt;
                    &lt;span class="na"&gt;android:src=&lt;/span&gt;&lt;span class="s"&gt;"@drawable/ic_mail_black_24dp"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputLayout&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:hint=&lt;/span&gt;&lt;span class="s"&gt;"@string/hotchpotch_mail_tv"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                    &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputEditText&lt;/span&gt;
                        &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/edit_email"&lt;/span&gt;
                        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                        &lt;span class="na"&gt;android:inputType=&lt;/span&gt;&lt;span class="s"&gt;"textEmailAddress"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;/android.support.design.widget.TextInputLayout&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;/LinearLayout&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;LinearLayout&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_marginTop=&lt;/span&gt;&lt;span class="s"&gt;"8dp"&lt;/span&gt;
                &lt;span class="na"&gt;android:orientation=&lt;/span&gt;&lt;span class="s"&gt;"horizontal"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;ImageView&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_gravity=&lt;/span&gt;&lt;span class="s"&gt;"center_vertical"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_marginEnd=&lt;/span&gt;&lt;span class="s"&gt;"12dp"&lt;/span&gt;
                    &lt;span class="na"&gt;android:src=&lt;/span&gt;&lt;span class="s"&gt;"@drawable/ic_security_black_24dp"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputLayout&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:hint=&lt;/span&gt;&lt;span class="s"&gt;"@string/hotchpotch_password_tv"&lt;/span&gt;
                    &lt;span class="na"&gt;app:passwordToggleDrawable=&lt;/span&gt;&lt;span class="s"&gt;"@drawable/visibility_selector"&lt;/span&gt;
                    &lt;span class="na"&gt;app:passwordToggleEnabled=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt;
                    &lt;span class="na"&gt;app:passwordToggleTint=&lt;/span&gt;&lt;span class="s"&gt;"@color/visibility_selector"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                    &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputEditText&lt;/span&gt;
                        &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/edit_password"&lt;/span&gt;
                        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                        &lt;span class="na"&gt;android:inputType=&lt;/span&gt;&lt;span class="s"&gt;"textPassword"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;/android.support.design.widget.TextInputLayout&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;/LinearLayout&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;LinearLayout&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                &lt;span class="na"&gt;android:orientation=&lt;/span&gt;&lt;span class="s"&gt;"horizontal"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;ImageView&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_gravity=&lt;/span&gt;&lt;span class="s"&gt;"center_vertical"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_marginEnd=&lt;/span&gt;&lt;span class="s"&gt;"12dp"&lt;/span&gt;
                    &lt;span class="na"&gt;android:src=&lt;/span&gt;&lt;span class="s"&gt;"@drawable/ic_feedback_black_24dp"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputLayout&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:hint=&lt;/span&gt;&lt;span class="s"&gt;"@string/hotchpotch_feedback_tv"&lt;/span&gt;
                    &lt;span class="na"&gt;app:counterEnabled=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt;
                    &lt;span class="na"&gt;app:counterMaxLength=&lt;/span&gt;&lt;span class="s"&gt;"10"&lt;/span&gt;
                    &lt;span class="na"&gt;app:hintTextAppearance=&lt;/span&gt;&lt;span class="s"&gt;"@style/FloatingStyle"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                    &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputEditText&lt;/span&gt;
                        &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/edit_feedback"&lt;/span&gt;
                        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                        &lt;span class="na"&gt;android:inputType=&lt;/span&gt;&lt;span class="s"&gt;"text"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;/android.support.design.widget.TextInputLayout&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;/LinearLayout&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;Button&lt;/span&gt;
                &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/submit_btn"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_marginEnd=&lt;/span&gt;&lt;span class="s"&gt;"16dp"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_marginStart=&lt;/span&gt;&lt;span class="s"&gt;"16dp"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_marginTop=&lt;/span&gt;&lt;span class="s"&gt;"30dp"&lt;/span&gt;
                &lt;span class="na"&gt;android:background=&lt;/span&gt;&lt;span class="s"&gt;"@drawable/btn_selector"&lt;/span&gt;
                &lt;span class="na"&gt;android:text=&lt;/span&gt;&lt;span class="s"&gt;"@string/hotchpotch_submit_btn"&lt;/span&gt;
                &lt;span class="na"&gt;android:textColor=&lt;/span&gt;&lt;span class="s"&gt;"@color/colorWhite"&lt;/span&gt;
                &lt;span class="na"&gt;android:textSize=&lt;/span&gt;&lt;span class="s"&gt;"20sp"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;/LinearLayout&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/ScrollView&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/LinearLayout&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;FloatingStyle&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;style&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"FloatingStyle"&lt;/span&gt; &lt;span class="na"&gt;parent=&lt;/span&gt;&lt;span class="s"&gt;"@android:style/TextAppearance"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"android:textColor"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;#FFEB3B&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"android:textSize"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;20sp&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;btn_selector&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;selector&lt;/span&gt; &lt;span class="na"&gt;xmlns:android=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res/android"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;android:drawable=&lt;/span&gt;&lt;span class="s"&gt;"@color/colorPrimaryDark"&lt;/span&gt; &lt;span class="na"&gt;android:state_pressed=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;android:drawable=&lt;/span&gt;&lt;span class="s"&gt;"@color/colorPrimary"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/selector&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;drawable/visibility_selector&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;selector&lt;/span&gt; &lt;span class="na"&gt;xmlns:android=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res/android"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;android:drawable=&lt;/span&gt;&lt;span class="s"&gt;"@drawable/ic_visibility_black_24dp"&lt;/span&gt; &lt;span class="na"&gt;android:state_checked=&lt;/span&gt;&lt;span class="s"&gt;"false"&lt;/span&gt; &lt;span class="na"&gt;android:state_pressed=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;android:drawable=&lt;/span&gt;&lt;span class="s"&gt;"@drawable/ic_visibility_off_black_24dp"&lt;/span&gt; &lt;span class="na"&gt;android:state_checked=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt; &lt;span class="na"&gt;android:state_pressed=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;android:drawable=&lt;/span&gt;&lt;span class="s"&gt;"@drawable/ic_visibility_black_24dp"&lt;/span&gt; &lt;span class="na"&gt;android:state_checked=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt; &lt;span class="na"&gt;android:state_pressed=&lt;/span&gt;&lt;span class="s"&gt;"false"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;android:drawable=&lt;/span&gt;&lt;span class="s"&gt;"@drawable/ic_visibility_off_black_24dp"&lt;/span&gt; &lt;span class="na"&gt;android:state_checked=&lt;/span&gt;&lt;span class="s"&gt;"false"&lt;/span&gt; &lt;span class="na"&gt;android:state_pressed=&lt;/span&gt;&lt;span class="s"&gt;"false"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/selector&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;color/visibility_selector&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;selector&lt;/span&gt; &lt;span class="na"&gt;xmlns:android=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res/android"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;android:color=&lt;/span&gt;&lt;span class="s"&gt;"@color/colorAccent"&lt;/span&gt; &lt;span class="na"&gt;android:state_checked=&lt;/span&gt;&lt;span class="s"&gt;"false"&lt;/span&gt; &lt;span class="na"&gt;android:state_pressed=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;android:color=&lt;/span&gt;&lt;span class="s"&gt;"@color/colorDivider"&lt;/span&gt; &lt;span class="na"&gt;android:state_checked=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt; &lt;span class="na"&gt;android:state_pressed=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;android:color=&lt;/span&gt;&lt;span class="s"&gt;"@color/colorAccent"&lt;/span&gt; &lt;span class="na"&gt;android:state_checked=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt; &lt;span class="na"&gt;android:state_pressed=&lt;/span&gt;&lt;span class="s"&gt;"false"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;android:color=&lt;/span&gt;&lt;span class="s"&gt;"@color/colorDivider"&lt;/span&gt; &lt;span class="na"&gt;android:state_checked=&lt;/span&gt;&lt;span class="s"&gt;"false"&lt;/span&gt; &lt;span class="na"&gt;android:state_pressed=&lt;/span&gt;&lt;span class="s"&gt;"false"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/selector&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;HotchpotchActivity.java&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HotchpotchActivity&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;AppCompatActivity&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;TextInputEditText&lt;/span&gt; &lt;span class="n"&gt;mNameEditx&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;TextInputEditText&lt;/span&gt; &lt;span class="n"&gt;mPhoneEditx&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;TextInputEditText&lt;/span&gt; &lt;span class="n"&gt;mEmailEditx&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;TextInputEditText&lt;/span&gt; &lt;span class="n"&gt;mPasswordEditx&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;TextInputEditText&lt;/span&gt; &lt;span class="n"&gt;mFeedbackEditx&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;mContentName&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;mContentPhone&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;mContentEmail&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;mContentPassword&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;mContentFeedback&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onCreate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Bundle&lt;/span&gt; &lt;span class="n"&gt;savedInstanceState&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onCreate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;savedInstanceState&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;setContentView&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;layout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;activity_hotchpotch&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;initView&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;initView&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mNameEditx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TextInputEditText&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;edit_name&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mPhoneEditx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TextInputEditText&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;edit_phone&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mEmailEditx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TextInputEditText&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;edit_email&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mPasswordEditx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TextInputEditText&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;edit_password&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mFeedbackEditx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TextInputEditText&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;edit_feedback&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;Button&lt;/span&gt; &lt;span class="n"&gt;submitBtn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;submit_btn&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;submitBtn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOnClickListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;View&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;OnClickListener&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="nd"&gt;@Override&lt;/span&gt;
            &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onClick&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;View&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;controlAction&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;});&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;getContent&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mContentName&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mNameEditx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getText&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;mContentPhone&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mPhoneEditx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getText&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;mContentEmail&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mEmailEditx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getText&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;mContentPassword&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mPasswordEditx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getText&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;mContentFeedback&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mFeedbackEditx&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getText&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;controlAction&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;getContent&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mContentName&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"å§“åä¸èƒ½ä¸ºç©º!"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mContentPhone&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"è¯·æ­£ç¡®å¡«å†™11ä½æ‰‹æœºå·ç !"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mContentEmail&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;android&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Patterns&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EMAIL_ADDRESS&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;matcher&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mContentEmail&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;matches&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"è¯·æ­£ç¡®å¡«å†™é‚®ç®±åœ°å€!"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mContentPassword&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"å¯†ç ä¸èƒ½ä¸ºç©º"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mContentFeedback&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"åé¦ˆæ„è§ä¸èƒ½ä¸ºç©º!"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mContentFeedback&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"åé¦ˆæ„è§é•¿åº¦å­—æ•°ä¸èƒ½å¤§äº10!"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;doSubmission&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;doSubmission&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"æ­å–œæ‚¨,æ•°æ®æ­£ç¡®!"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;


    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;makeText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HotchpotchActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;this&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LENGTH_SHORT&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;ç™»å½•é¡µé¢å®æˆ˜&lt;/h2&gt;

&lt;p&gt;å°±åƒæ–‡ç« å¼€å¤´è¯´çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªç³»åˆ—æ–‡ç« ï¼Œè·¯çº¿æ˜¯ä¸€ä¸ªAPPæ‰“å¼€çš„è·¯çº¿ã€‚é‚£ä¹ˆè¿™ç¬¬ä¸€ç¯‡å°±ç”¨æ¥å†™ç™»å½•é¡µé¢å§ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Layoutå¸ƒå±€&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;LinearLayout&lt;/span&gt; &lt;span class="na"&gt;xmlns:android=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res/android"&lt;/span&gt;
    &lt;span class="na"&gt;xmlns:app=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res-auto"&lt;/span&gt;
    &lt;span class="na"&gt;xmlns:tools=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/tools"&lt;/span&gt;
    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
    &lt;span class="na"&gt;android:background=&lt;/span&gt;&lt;span class="s"&gt;"@color/colorPrimary"&lt;/span&gt;
    &lt;span class="na"&gt;android:gravity=&lt;/span&gt;&lt;span class="s"&gt;"center_horizontal"&lt;/span&gt;
    &lt;span class="na"&gt;android:orientation=&lt;/span&gt;&lt;span class="s"&gt;"vertical"&lt;/span&gt;
    &lt;span class="na"&gt;android:paddingEnd=&lt;/span&gt;&lt;span class="s"&gt;"32dp"&lt;/span&gt;
    &lt;span class="na"&gt;android:paddingStart=&lt;/span&gt;&lt;span class="s"&gt;"32dp"&lt;/span&gt;
    &lt;span class="na"&gt;tools:context=&lt;/span&gt;&lt;span class="s"&gt;"com.jiandanxinli.smileback.materiallogin.LoginActivity"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

    &lt;span class="c"&gt;&amp;lt;!-- Login progress --&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;ProgressBar&lt;/span&gt;
        &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/login_progress"&lt;/span&gt;
        &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"?android:attr/progressBarStyleLarge"&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
        &lt;span class="na"&gt;android:visibility=&lt;/span&gt;&lt;span class="s"&gt;"gone"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;ScrollView&lt;/span&gt;
        &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/login_form"&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;LinearLayout&lt;/span&gt;
            &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/email_login_form"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_gravity=&lt;/span&gt;&lt;span class="s"&gt;"center"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_marginBottom=&lt;/span&gt;&lt;span class="s"&gt;"24dp"&lt;/span&gt;
            &lt;span class="na"&gt;android:focusableInTouchMode=&lt;/span&gt;&lt;span class="s"&gt;"true"&lt;/span&gt;
            &lt;span class="na"&gt;android:orientation=&lt;/span&gt;&lt;span class="s"&gt;"vertical"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;TextView&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_gravity=&lt;/span&gt;&lt;span class="s"&gt;"center_horizontal"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_marginBottom=&lt;/span&gt;&lt;span class="s"&gt;"48dp"&lt;/span&gt;
                &lt;span class="na"&gt;android:fontFamily=&lt;/span&gt;&lt;span class="s"&gt;"cursive"&lt;/span&gt;
                &lt;span class="na"&gt;android:text=&lt;/span&gt;&lt;span class="s"&gt;"@string/app_name"&lt;/span&gt;
                &lt;span class="na"&gt;android:textSize=&lt;/span&gt;&lt;span class="s"&gt;"48sp"&lt;/span&gt;
                &lt;span class="na"&gt;android:textStyle=&lt;/span&gt;&lt;span class="s"&gt;"bold"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;


            &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputLayout&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_marginBottom=&lt;/span&gt;&lt;span class="s"&gt;"24dp"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;AutoCompleteTextView&lt;/span&gt;
                    &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/email"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:hint=&lt;/span&gt;&lt;span class="s"&gt;"@string/prompt_email"&lt;/span&gt;
                    &lt;span class="na"&gt;android:inputType=&lt;/span&gt;&lt;span class="s"&gt;"textEmailAddress"&lt;/span&gt;
                    &lt;span class="na"&gt;android:maxLines=&lt;/span&gt;&lt;span class="s"&gt;"1"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;/android.support.design.widget.TextInputLayout&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputLayout&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_marginBottom=&lt;/span&gt;&lt;span class="s"&gt;"40dp"&lt;/span&gt;
                &lt;span class="na"&gt;app:passwordToggleDrawable=&lt;/span&gt;&lt;span class="s"&gt;"@drawable/visibility_selector"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

                &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.TextInputEditText&lt;/span&gt;
                    &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/password"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                    &lt;span class="na"&gt;android:hint=&lt;/span&gt;&lt;span class="s"&gt;"@string/prompt_password"&lt;/span&gt;
                    &lt;span class="na"&gt;android:imeActionId=&lt;/span&gt;&lt;span class="s"&gt;"@+id/login"&lt;/span&gt;
                    &lt;span class="na"&gt;android:imeActionLabel=&lt;/span&gt;&lt;span class="s"&gt;"@string/action_sign_in_short"&lt;/span&gt;
                    &lt;span class="na"&gt;android:imeOptions=&lt;/span&gt;&lt;span class="s"&gt;"actionUnspecified"&lt;/span&gt;
                    &lt;span class="na"&gt;android:inputType=&lt;/span&gt;&lt;span class="s"&gt;"textPassword"&lt;/span&gt;
                    &lt;span class="na"&gt;android:maxLines=&lt;/span&gt;&lt;span class="s"&gt;"1"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;/android.support.design.widget.TextInputLayout&amp;gt;&lt;/span&gt;

            &lt;span class="nt"&gt;&amp;lt;Button&lt;/span&gt;
                &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/email_sign_in_button"&lt;/span&gt;
                &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;"?android:textAppearanceSmall"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
                &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
                &lt;span class="na"&gt;android:background=&lt;/span&gt;&lt;span class="s"&gt;"@color/colorPrimaryDark"&lt;/span&gt;
                &lt;span class="na"&gt;android:text=&lt;/span&gt;&lt;span class="s"&gt;"@string/action_sign_in"&lt;/span&gt;
                &lt;span class="na"&gt;android:textSize=&lt;/span&gt;&lt;span class="s"&gt;"18sp"&lt;/span&gt;
                &lt;span class="na"&gt;android:textStyle=&lt;/span&gt;&lt;span class="s"&gt;"bold"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;/LinearLayout&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/ScrollView&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/LinearLayout&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;LoginActivity.java&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="cm"&gt;/**
 * ç™»å½•é¡µé¢
 *
 * @author bugdev
 */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LoginActivity&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;AppCompatActivity&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;AutoCompleteTextView&lt;/span&gt; &lt;span class="n"&gt;mEmailView&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;EditText&lt;/span&gt; &lt;span class="n"&gt;mPasswordView&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;ProgressDialog&lt;/span&gt; &lt;span class="n"&gt;mProgressDialog&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onCreate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Bundle&lt;/span&gt; &lt;span class="n"&gt;savedInstanceState&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onCreate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;savedInstanceState&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;setContentView&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;layout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;activity_login&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;mEmailView&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;AutoCompleteTextView&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;email&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mPasswordView&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;EditText&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;password&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;mPasswordView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOnEditorActionListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;TextView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;OnEditorActionListener&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="nd"&gt;@Override&lt;/span&gt;
            &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;onEditorAction&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TextView&lt;/span&gt; &lt;span class="n"&gt;textView&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;KeyEvent&lt;/span&gt; &lt;span class="n"&gt;keyEvent&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;login&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;EditorInfo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;IME_NULL&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="c1"&gt;//å°è¯•ç™»å½•&lt;/span&gt;
                    &lt;span class="n"&gt;attemptLogin&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
                    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;
                &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;});&lt;/span&gt;

        &lt;span class="n"&gt;Button&lt;/span&gt; &lt;span class="n"&gt;emailSignInButton&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;email_sign_in_button&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;emailSignInButton&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOnClickListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;OnClickListener&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="nd"&gt;@Override&lt;/span&gt;
            &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onClick&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;View&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="c1"&gt;//å°è¯•ç™»å½•&lt;/span&gt;
                &lt;span class="n"&gt;attemptLogin&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;});&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**
     * è¯´æ˜:è·å–ç”¨æˆ·è¾“å…¥çš„å†…å®¹å¹¶è°ƒç”¨ç›¸åº”çš„éªŒè¯æ–¹æ³•
     */&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;attemptLogin&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;email&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mEmailView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getText&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mPasswordView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getText&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;isEmailValid&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;email&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;isPasswordValid&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;login&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;


    &lt;span class="cm"&gt;/**
     * è¯´æ˜:éªŒè¯é‚®ç®±æ ¼å¼
     *
     * @param email é‚®ç®±åœ°å€
     * @return é‚®ç®±åœ°å€æ ¼å¼æ­£ç¡®æˆ–é”™è¯¯
     */&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;isEmailValid&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;email&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;email&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"è¯·è¾“å…¥é‚®ç®±!"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(!&lt;/span&gt;&lt;span class="n"&gt;android&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Patterns&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EMAIL_ADDRESS&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;matcher&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;email&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;matches&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®!"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**
     * è¯´æ˜:éªŒè¯å¯†ç æ ¼å¼
     *
     * @param password å¯†ç 
     * @return å¯†ç æ ¼å¼æ­£ç¡®æˆ–é”™è¯¯
     */&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;isPasswordValid&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"è¯·è¾“å…¥å¯†ç !"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"è¯·è¾“å…¥è‡³å°‘6ä½å¯†ç !"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**
     * è¯´æ˜:æ˜¾ç¤ºToastçš„æ–¹æ³•
     *
     * @param message è¦æ˜¾ç¤ºçš„æ¶ˆæ¯
     */&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;showToast&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;makeText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getApplicationContext&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LENGTH_SHORT&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**
     * è¯´æ˜:ç™»å½•
     * &amp;lt;p&amp;gt;
     * è¿™é‡Œä¸ºäº†å±•ç¤ºå¯¹è¯æ¡†,å°†å¯¹è¯æ¡†å›ºå®šæ˜¾ç¤ºäº†3ç§’
     */&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;login&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;showDialog&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

        &lt;span class="n"&gt;Timer&lt;/span&gt; &lt;span class="n"&gt;timer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Timer&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;TimerTask&lt;/span&gt; &lt;span class="n"&gt;timerTask&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;TimerTask&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="nd"&gt;@Override&lt;/span&gt;
            &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;mProgressDialog&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;dismiss&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
                &lt;span class="n"&gt;Intent&lt;/span&gt; &lt;span class="n"&gt;intent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Intent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LoginActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;this&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;HomeActivity&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;startActivity&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;intent&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;finish&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;};&lt;/span&gt;
        &lt;span class="n"&gt;timer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;schedule&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timerTask&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3000&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**
     * è¯´æ˜:showä¸€ä¸ªDialog
     */&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;showDialog&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mProgressDialog&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ProgressDialog&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;style&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;AppTheme_Dark_Dialog&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mProgressDialog&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setIndeterminate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mProgressDialog&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setMessage&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"æ­£åœ¨éªŒè¯..."&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mProgressDialog&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Dialog Style&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;style&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"AppTheme.Dark.Dialog"&lt;/span&gt; &lt;span class="na"&gt;parent=&lt;/span&gt;&lt;span class="s"&gt;"Theme.AppCompat.Dialog"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"colorAccent"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;@color/colorAccent&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"android:textColorPrimary"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;@color/textPrimary&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"android:background"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;@color/colorPrimary&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ•ˆæœå›¾&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src="https://cloud.githubusercontent.com/assets/12692071/20247102/d1328fe4-a9ff-11e6-8f6e-513f79d2446c.png" alt="æ•ˆæœå›¾" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ•ˆæœè§†é¢‘â†’&lt;/strong&gt;&lt;a href="http://v.youku.com/v_show/id_XMTczMjA1MzY4NA==.html"&gt;ç‚¹è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;

&lt;h2&gt;å‚è€ƒæ–‡ç« &lt;/h2&gt;

&lt;p&gt;&lt;a href="http://babich.biz/mobile-form-usability/"&gt;Mobile Form Usability&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href="https://developer.android.com/guide/index.html"&gt;Androidå®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href="https://developer.android.com/guide/index.html"&gt;Text fields | Material Design&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href="https://code.tutsplus.com/tutorials/creating-a-login-screen-using-textinputlayout--cms-24168"&gt;Creating a Login Screen Using TextInputLayout&lt;/a&gt;&lt;/p&gt;

&lt;h2&gt;å…³äº&lt;/h2&gt;

&lt;p&gt;&lt;img src="https://cloud.githubusercontent.com/assets/12692071/20247234/0341c3f4-aa02-11e6-8eba-fe355635411e.jpg" alt="äºŒç»´ç " /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¾®ä¿¡å…¬ä¼—å·ï¼š BugDevã€Œbugdevã€&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;çŸ¥ä¹ä¸“æ ï¼š&lt;a href="https://code.tutsplus.com/tutorials/creating-a-login-screen-using-textinputlayout--cms-24168"&gt;BugDev&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ¬¢è¿å…³æ³¨å•¦~ ï¼&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>åˆ©ç”¨Expressä¸MySQLæ­å»ºè¶…ç®€æ´çš„Blog</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-10-30.html"/>
    <id>https://jiandanxinli.github.io/2016-10-30.html</id>
    <published>2016-10-30T08:00:00+08:00</published>
    <updated>2016-11-01T12:59:01+08:00</updated>
    <author>
      <name>lei.wang</name>
    </author>
    <content type="html">&lt;p&gt;ä¸Šä¸€ç¯‡ä»‹ç»äº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªç®€å•çš„&lt;code&gt;Express&lt;/code&gt; åº”ç”¨, ä»¥åŠç›®å½•ç»“æ„å’Œæ¨¡æ¿å¼•æ“ã€‚
æœ¬ç¯‡æ–‡ç« å°†ä»‹ç» å¦‚ä½•æ­å»ºä¸€ä¸ªç®€å•çš„bolgç½‘ç«™&lt;/p&gt;

&lt;h1&gt;æ­å»ºåšå®¢&lt;/h1&gt;

&lt;h2&gt;è·¯ç”±æ§åˆ¶&lt;/h2&gt;

&lt;p&gt;æ­å»ºä¸€ä¸ªç®€å•çš„å…·æœ‰å‘è¡¨æ–‡ç« åŠŸèƒ½çš„åšå®¢ã€‚&lt;/p&gt;

&lt;p&gt;è·¯ç”±è§„åˆ’æ˜¯æ•´ä¸ªç½‘ç«™çš„éª¨æ¶éƒ¨åˆ†ï¼Œå› ä¸ºå®ƒå¤„äºæ•´ä¸ªæ¶æ„çš„æ¢çº½ä½ç½®ï¼Œç›¸å½“äºå„ä¸ªæ¥å£ä¹‹é—´çš„ç²˜åˆå‰‚ï¼Œæ‰€ä»¥åº”è¯¥ä¼˜å…ˆè€ƒè™‘ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºæˆ‘ä»¬ç°åœ¨æ­å»ºçš„ä»…ä»…æ˜¯ä¸€ä¸ªå…·æœ‰å‘è¡¨åŠŸèƒ½çš„åšå®¢ï¼Œå¹¶ä¸å…·æœ‰æ³¨å†Œç™»å½•ï¼Œæ‰€ä»¥ä¼šç®€å•å¾ˆå¤š&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;GET / ï¼šé¦–é¡µ
GET /posts ï¼šæ–‡ç« åˆ—è¡¨
POST /posts ï¼šåˆ›å»ºæ–‡ç« 
GET /posts/new ï¼šå¡«å†™æ–‡ç« 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬è¦æ±‚ /posts èƒ½çœ‹åˆ°æ–‡ç« å¹¶ä¸”å‘å¸ƒæ–‡ç« ã€‚&lt;/p&gt;

&lt;h2&gt;ä½¿ç”¨æ•°æ®åº“&lt;/h2&gt;

&lt;p&gt;æ¶‰åŠåˆ°æ–‡ç« å‚¨å­˜ä»¥åŠè®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®åº“ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»çš„æ˜¯ &lt;code&gt;MySQL&lt;/code&gt;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å½“ç„¶ï¼Œé¦–å…ˆä½ è¦å‡†å¤‡å¥½ &lt;code&gt;MySQL&lt;/code&gt; ç¯å¢ƒã€‚è¿™é‡Œä¸å¤šåšæè¿°ï¼Œå¯è‡ªè¡ŒGoogle&lt;/li&gt;
&lt;li&gt;åˆ›å»ºè¡¨ï¼Œè¿™é‡Œåˆ›å»ºä¸ªéœ€è¦ç”¨åˆ°çš„postè¡¨&lt;/li&gt;
&lt;li&gt;å®‰è£… &lt;code&gt;Node&lt;/code&gt; çš„ &lt;code&gt;MySQL&lt;/code&gt; é©±åŠ¨&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;åœ¨ &lt;code&gt;package.json&lt;/code&gt; æ–‡ä»¶ä¸­æ·»åŠ  &lt;code&gt;&amp;quot;mysql&amp;quot;: &amp;quot;latest&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;pre class="highlight json"&gt;&lt;code&gt;&lt;span class="s2"&gt;"dependencies"&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nt"&gt;"body-parser"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"~1.15.1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nt"&gt;"cookie-parser"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"~1.4.3"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nt"&gt;"debug"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"~2.2.0"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nt"&gt;"ejs"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"~2.4.1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nt"&gt;"express"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"~4.13.4"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nt"&gt;"morgan"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"~1.7.0"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nt"&gt;"serve-favicon"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"~2.3.0"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;
  &lt;/span&gt;&lt;span class="nt"&gt;"mysql"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;"latest"&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¹¶æ‰§è¡Œ &lt;code&gt;npm install&lt;/code&gt; å®‰è£…ä¾èµ–åŒ…&lt;/p&gt;

&lt;h2&gt;æ•´åˆExpress+MySQL&lt;/h2&gt;

&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆå»ºå‡ ä¸ªç›®å½•&lt;/p&gt;

&lt;p&gt;åœ¨æ ¹ç›®å½•æ–°å¢ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;util â€“ å·¥å…·æ–¹æ³•

conf â€“ é…ç½®

mutual â€“ ä¸æ•°æ®åº“äº¤äº’
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨ utilæ–‡ä»¶å¤¹ä¸­æ–°å»º &lt;code&gt;util.js&lt;/code&gt; æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç &lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="c1"&gt;// æå‡æ€§èƒ½&lt;/span&gt;
&lt;span class="nx"&gt;module&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;exports&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="na"&gt;extend&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;target&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;source&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;flag&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;key&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nx"&gt;source&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;source&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;hasOwnProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)){&lt;/span&gt;
        &lt;span class="nx"&gt;flag&lt;/span&gt; &lt;span class="p"&gt;?&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;target&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;source&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;target&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;===&lt;/span&gt; &lt;span class="k"&gt;void&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;target&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;source&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="p"&gt;]));&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;target&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨ conf æ–‡ä»¶å¤¹ä¸­æ–°å»º &lt;code&gt;db.js&lt;/code&gt; æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç &lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="c1"&gt;// conf/db.js&lt;/span&gt;
&lt;span class="c1"&gt;// MySQLæ•°æ®åº“è”æ¥é…ç½®&lt;/span&gt;
&lt;span class="nx"&gt;module&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;exports&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="na"&gt;mysql&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="na"&gt;host&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'127.0.0.1'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="na"&gt;user&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'root'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="na"&gt;password&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;''&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="na"&gt;database&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;'test'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c1"&gt;// å‰é¢å»ºçš„postè¡¨ä½äºè¿™ä¸ªæ•°æ®åº“ä¸­&lt;/span&gt;
    &lt;span class="na"&gt;port&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3306&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨ mutual æ–‡ä»¶å¤¹ä¸­æ–°å»º &lt;code&gt;post.js&lt;/code&gt; å’Œ &lt;code&gt;postSqlMapping.js&lt;/code&gt; æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç &lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="c1"&gt;// mutual/postSqlMapping.js&lt;/span&gt;
&lt;span class="c1"&gt;// SQLè¯­å¥&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;post&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="na"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;'INSERT INTO post(id, title, content) VALUES(0,?,?)'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="na"&gt;update&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;'update post set title=?, content=? where id=?'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="na"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'delete from post where id=?'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="na"&gt;queryById&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'select * from post where id=?'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="na"&gt;queryAll&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'select * from post'&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="nx"&gt;module&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;exports&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;post&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="c1"&gt;// mutual/post.js&lt;/span&gt;
&lt;span class="c1"&gt;// å®ç°ä¸MySQLäº¤äº’&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;mysql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'mysql'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;$conf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'../conf/db'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;$util&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'../util/util'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;$sql&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'./postSqlMapping'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="c1"&gt;// ä½¿ç”¨è¿æ¥æ± ï¼Œæå‡æ€§èƒ½&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;pool&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;mysql&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;createPool&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;$util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;extend&lt;/span&gt;&lt;span class="p"&gt;({},&lt;/span&gt; &lt;span class="nx"&gt;$conf&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;mysql&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

&lt;span class="c1"&gt;// å‘å‰å°è¿”å›JSONæ–¹æ³•çš„ç®€å•å°è£…&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;jsonWrite&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;ret&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;typeof&lt;/span&gt; &lt;span class="nx"&gt;ret&lt;/span&gt; &lt;span class="o"&gt;===&lt;/span&gt; &lt;span class="s1"&gt;'undefined'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;json&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
      &lt;span class="na"&gt;code&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;'1'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="na"&gt;msg&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'æ“ä½œå¤±è´¥'&lt;/span&gt;
    &lt;span class="p"&gt;});&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;json&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;ret&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="nx"&gt;module&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;exports&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;pool&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getConnection&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;connection&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="c1"&gt;// è·å–å‰å°é¡µé¢ä¼ è¿‡æ¥çš„å‚æ•°&lt;/span&gt;
      &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;param&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;query&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;params&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

      &lt;span class="c1"&gt;// å»ºç«‹è¿æ¥ï¼Œå‘è¡¨ä¸­æ’å…¥å€¼&lt;/span&gt;
      &lt;span class="c1"&gt;// 'INSERT INTO post(id, title, content) VALUES(0,?,?)',&lt;/span&gt;
      &lt;span class="nx"&gt;connection&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;query&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;$sql&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;insert&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;param&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;title&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;param&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;content&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;result&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;result&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
          &lt;span class="nx"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="na"&gt;code&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="na"&gt;msg&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;'åˆ›å»ºæˆåŠŸ'&lt;/span&gt;
          &lt;span class="p"&gt;};&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="c1"&gt;// ä»¥jsonå½¢å¼ï¼ŒæŠŠæ“ä½œç»“æœè¿”å›ç»™å‰å°é¡µé¢&lt;/span&gt;
        &lt;span class="nx"&gt;jsonWrite&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;result&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="c1"&gt;// é‡Šæ”¾è¿æ¥&lt;/span&gt;
        &lt;span class="nx"&gt;connection&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;release&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
      &lt;span class="p"&gt;});&lt;/span&gt;
    &lt;span class="p"&gt;});&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;MySQLéƒ¨åˆ†ä»£ç å·²ç»æ·»åŠ å¥½äº†ï¼Œç°åœ¨éœ€è¦åœ¨ &lt;code&gt;/routes&lt;/code&gt; ä¸­æ–°å»º &lt;code&gt;posts.js&lt;/code&gt; æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç &lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;express&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'express'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;post&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'../mutual/post'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;router&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;express&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Router&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

&lt;span class="c1"&gt;// create&lt;/span&gt;
&lt;span class="nx"&gt;router&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;post&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'/posts'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nx"&gt;post&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;

&lt;span class="c1"&gt;// new&lt;/span&gt;
&lt;span class="nx"&gt;router&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'/posts/new'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'posts_new'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;

&lt;span class="nx"&gt;module&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;exports&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;router&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åˆ°è¿™é‡Œåå°éƒ¨åˆ†å·²ç»æ–°å»ºå®Œæˆäº†ã€‚&lt;/p&gt;

&lt;h2&gt;å‘å¸ƒæ–‡ç« &lt;/h2&gt;

&lt;p&gt;æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé¡µé¢æ¥å¡«å†™æ–‡ç« å†…å®¹&lt;/p&gt;

&lt;h3&gt;é¡µé¢è®¾è®¡&lt;/h3&gt;

&lt;p&gt;åœ¨ views æ–‡ä»¶å¤¹ä¸‹æ–°å»º &lt;code&gt;posts_new.ejs&lt;/code&gt; ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="err"&gt;&amp;lt;&lt;/span&gt;%- include title %&amp;gt;
&lt;span class="nt"&gt;&amp;lt;form&lt;/span&gt; &lt;span class="na"&gt;method=&lt;/span&gt;&lt;span class="s"&gt;"post"&lt;/span&gt; &lt;span class="na"&gt;action=&lt;/span&gt;&lt;span class="s"&gt;"/posts"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  æ ‡é¢˜ï¼š&lt;span class="nt"&gt;&amp;lt;br&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;"text"&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"title"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&amp;lt;br&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
  æ­£æ–‡ï¼š&lt;span class="nt"&gt;&amp;lt;br&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;textarea&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"content"&lt;/span&gt; &lt;span class="na"&gt;rows=&lt;/span&gt;&lt;span class="s"&gt;"20"&lt;/span&gt; &lt;span class="na"&gt;cols=&lt;/span&gt;&lt;span class="s"&gt;"100"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;/textarea&amp;gt;&amp;lt;br&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;"submit"&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;"å‘è¡¨"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/form&amp;gt;&lt;/span&gt;
&lt;span class="err"&gt;&amp;lt;&lt;/span&gt;%- include footer %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;å‘è¡¨æ–‡ç« &lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬ä¹‹å‰å·²ç»å†™å¥½äº†è·¯ç”±ï¼Œç°åœ¨åªè¦è®¿é—® &lt;code&gt;/posts/new&lt;/code&gt; å°±å¯ä»¥åˆ›å»ºæ–‡ç« äº†&lt;/p&gt;

&lt;h3&gt;æ˜¾ç¤ºæ–‡ç« &lt;/h3&gt;

&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬ä¿®æ”¹ &lt;code&gt;posts.ejs&lt;/code&gt; ï¼Œè®©é¡µé¢æ˜¾ç¤ºå‘è¡¨è¿‡çš„æ–‡ç« åŠå…¶ç›¸å…³ä¿¡æ¯, ä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="err"&gt;&amp;lt;&lt;/span&gt;%- include title %&amp;gt;
&lt;span class="err"&gt;&amp;lt;&lt;/span&gt;% posts.forEach(function (post, index) { %&amp;gt;
  &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&amp;lt;h2&amp;gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;"#"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;&amp;lt;&lt;/span&gt;%= post.title %&amp;gt;&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&amp;lt;/h2&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;&amp;lt;&lt;/span&gt;%- post.content %&amp;gt;&lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class="err"&gt;&amp;lt;&lt;/span&gt;% }) %&amp;gt;
&lt;span class="err"&gt;&amp;lt;&lt;/span&gt;%- include footer %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬è¿˜éœ€è¦åœ¨&lt;code&gt;/routes/posts.js&lt;/code&gt; ä¸­æ·»åŠ  &lt;code&gt;index&lt;/code&gt; çš„è·¯ç”±&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="c1"&gt;// index&lt;/span&gt;
&lt;span class="nx"&gt;router&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'/posts'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nx"&gt;post&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;queryAll&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;posts&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nx"&gt;posts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'post_index'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="na"&gt;title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'æ–‡ç« '&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="na"&gt;posts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;posts&lt;/span&gt;
    &lt;span class="p"&gt;});&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åŒæ—¶è¿˜éœ€è¦åœ¨ &lt;code&gt;/mutual/post.js&lt;/code&gt; ä¸­æ·»åŠ  &lt;code&gt;queryAll&lt;/code&gt; æ–¹æ³•&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="c1"&gt;// index&lt;/span&gt;
&lt;span class="nl"&gt;queryAll&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nx"&gt;pool&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getConnection&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;connection&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;connection&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;query&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;$sql&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;queryAll&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;result&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nx"&gt;jsonWrite&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;result&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="nx"&gt;connection&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;release&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;});&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è‡³æ­¤ï¼Œæˆ‘ä»¬çš„åšå®¢å°±å»ºæˆäº†ã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>RecyclerView åŠ è½½æ›´å¤šä¸ CoordinatorLayout</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-10-18.html"/>
    <id>https://jiandanxinli.github.io/2016-10-18.html</id>
    <published>2016-10-18T08:00:00+08:00</published>
    <updated>2016-10-18T13:14:29+08:00</updated>
    <author>
      <name>zhangyao</name>
    </author>
    <content type="html">&lt;p&gt;åœ¨2015å¹´Googleçš„å¹´åº¦å¤§ä¼šä¸Šï¼Œå·²ç»å‡çº§äº†æ–°çš„Support Libraryï¼Œè§†è§‰æ•ˆæœåŠç”¨æˆ·ä½“éªŒæ¯‹åº¸ç½®ç–‘ï¼Œæ‰€ä»¥ä»Šå¤©ä¸»è¦ç®€å•ä¸»è¦ä»‹ç»Material Designä¸­æœ€ä¸»è¦çš„äºŒä¸ªæ§ä»¶ï¼ŒRecyclerViewçš„ä¸Šæ‹‰åŠ è½½æ›´å¤šå’ŒCoordinatorLayoutçš„ç»“åˆä½¿ç”¨ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šå›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src="https://cloud.githubusercontent.com/assets/4373787/19464661/b00424f6-9530-11e6-99f9-99c32b35ed9f.gif" alt="demo" /&gt;&lt;/p&gt;

&lt;h3&gt;CoordinatorLayout&lt;/h3&gt;

&lt;p&gt;CoordinatorLayout ä»å­—é¢ä¸Šç†è§£ï¼Œå®ƒæ˜¯ä¸€ä¸ªåè°ƒviewï¼Œä¸»è¦å¤„ç†å­viewä¹‹é—´çš„ç›¸äº’ä¾èµ–å…³ç³»ï¼Œå¢åŠ äº¤äº’ä½“éªŒï¼Œé€šè¿‡layoutDependsOnï¼ˆï¼‰æ¥åˆ¤æ–­å­viewï¼ˆchildï¼‰æ˜¯å¦ä¾èµ–dependencyï¼Œé€šè¿‡onDependentViewChangedï¼ˆï¼‰æ¥åˆ¤æ–­å­viewï¼ˆchildï¼‰åœ¨æ‰€ä¾èµ–viewå‘ç”Ÿæ”¹å˜åçš„æ˜¯å¦è¦åšå¤„ç†ï¼Œå¥½ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹æºç ï¼š&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="o"&gt;/**&lt;/span&gt;
 &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Determine&lt;/span&gt; &lt;span class="n"&gt;whether&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;supplied&lt;/span&gt; &lt;span class="n"&gt;child&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt; &lt;span class="n"&gt;has&lt;/span&gt; &lt;span class="n"&gt;another&lt;/span&gt; &lt;span class="n"&gt;specific&lt;/span&gt; &lt;span class="n"&gt;sibling&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt; &lt;span class="n"&gt;as&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;layout&lt;/span&gt; &lt;span class="n"&gt;dependency&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="err"&gt;ï¼&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;layoutDependsOn&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CoordinatorLayout&lt;/span&gt; &lt;span class="n"&gt;parent&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;V&lt;/span&gt; &lt;span class="n"&gt;child&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;View&lt;/span&gt; &lt;span class="n"&gt;dependency&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;


&lt;span class="o"&gt;/**&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;Respond&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;change&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;child&lt;/span&gt;&lt;span class="err"&gt;'&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="n"&gt;dependent&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt;
&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="err"&gt;ï¼&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;onDependentViewChanged&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CoordinatorLayout&lt;/span&gt; &lt;span class="n"&gt;parent&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;V&lt;/span&gt; &lt;span class="n"&gt;child&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;View&lt;/span&gt; &lt;span class="n"&gt;dependency&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¦‚æœæœ‰è‡ªå®šä¹‰åŠŸèƒ½æˆ‘ä»¬å¯ä»¥extends CoordinatorLayout.Behaviorï¼Œä»Šå¤©æˆ‘ä»¬ä»‹ç»ç®€å•ä½¿ç”¨ï¼Œåç»­ä¼šå¯¹CoordinatorLayout.Behavioråšè¯¦ç»†æ¢è®¨ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;é¦–å…ˆè¦åœ¨Gradleä¸­åŠ å…¥Library&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="n"&gt;compile&lt;/span&gt; &lt;span class="err"&gt;'&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;android&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;support&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nl"&gt;design:&lt;/span&gt;&lt;span class="mf"&gt;24.2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="err"&gt;'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨å¸ƒå±€æ–‡ä»¶ä¸­åŠ å…¥CoordinatorLayoutï¼Œå¦‚æœæ˜¯æ–°å»ºé¡¹ç›®çš„è¯é€‰æ‹©Navigation Drawer Actiivtyæ¨¡ç‰ˆä¼šåŒ…å«ï¼Œè¿™é‡ŒåŠ å…¥äº†å¼€æºåº“NavigationTabStripå¯¹&lt;a href="https://github.com/zhangyao0328/RecyclerViewMore"&gt;demo&lt;/a&gt;ä¸­çš„viewpageåšç»‘å®š&lt;/li&gt;
&lt;li&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¦å®ç°å›¾ç‰‡ä¸­çš„Toolbaréšè—æ•ˆæœå¿…é¡»åŠ å…¥ï¼ŒToolbarå…¶å®å°±æ˜¯æˆ‘ä»¬çš„ä¸Šé¢æåˆ°çš„å­view&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;app:layout_scrollFlags="scroll|enterAlways"
&lt;/code&gt;&lt;/pre&gt;
&lt;ol&gt;
&lt;li&gt;åŠ å…¥æ‰€ä¾èµ–çš„behaviorå¯ä»¥ç”¨ViewPager&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;android.support.v4.view.ViewPager&lt;/span&gt; &lt;span class="na"&gt;xmlns:android=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res/android"&lt;/span&gt;
    &lt;span class="na"&gt;xmlns:app=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res-auto"&lt;/span&gt;
    &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/vp"&lt;/span&gt;
    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
    &lt;span class="na"&gt;app:layout_behavior=&lt;/span&gt;&lt;span class="s"&gt;"@string/appbar_scrolling_view_behavior"&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/android.support.v4.view.ViewPager&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;ol&gt;
&lt;li&gt;åŒæ ·å¿…é¡»åŠ å…¥&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;app:layout_behavior="@string/appbar_scrolling_view_behavior"
&lt;/code&gt;&lt;/pre&gt;
&lt;ol&gt;
&lt;li&gt;okï¼Œè‡³äºä¸‹æ‹‰åŠ è½½æ›´å¤šç”¨SwipeRefreshLayout&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;android.support.v4.widget.SwipeRefreshLayout&lt;/span&gt; &lt;span class="na"&gt;xmlns:android=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res/android"&lt;/span&gt;
    &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/swiprefreshlayout"&lt;/span&gt;
    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;com.recyclerviewmore.widget.RecyclerViewUpRefresh&lt;/span&gt;
        &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/recyclerview"&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;/com.recyclerviewmore.widget.RecyclerViewUpRefresh&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;/android.support.v4.widget.SwipeRefreshLayout&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;RecyclerView&lt;/h3&gt;

&lt;p&gt;ä»¥ä¸Šç®€å•å®ç°äº†CoordinatorLayoutçš„æ•ˆæœä¸‹é¢å†ä»‹ç»RecyclerViewçš„ä¸Šæ‹‰åŠ è½½æ›´å¤šï¼Œä¸CoordinatorLayouté…åˆä½¿ç”¨ï¼Œå…¶å®ç›¸å¯¹ä¸å¤§å®¶æ¯”è¾ƒç†Ÿæ‚‰çš„listviewæ¥è¯´RecyclerViewæ›´çµæ´»ï¼Œæ˜¯å®Œç¾çš„æ›¿ä»£å“ï¼Œæ‰€æœ‰æ•ˆæœéƒ½å¯ä»¥è‡ªå®šä¹‰ å¸ƒå±€ç®¡ç†ï¼ˆLayoutManagerï¼‰ä¸‹é¢æ˜¯æœ€ç®€å•çš„ç”¨æ³•ï¼Œè¦ç‰¹æ®Šéœ€æ±‚éœ€è¦è‡ªå®šä¹‰LayoutManager&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å¸ƒå±€ç®¡ç†ï¼ˆLayoutManagerï¼‰ä¸‹é¢æ˜¯æœ€ç®€å•çš„ç”¨æ³•ï¼Œè¦ç‰¹æ®Šéœ€æ±‚éœ€è¦è‡ªå®šä¹‰LayoutManager&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="n"&gt;mRecyclerView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setLayoutManager&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;newLinearLayoutManager&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getActivity&lt;/span&gt;&lt;span class="o"&gt;()));&lt;/span&gt;

&lt;span class="n"&gt;mRecyclerView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setLayoutManager&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;GridLayoutManager&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getActivity&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;ol&gt;
&lt;li&gt;è®¾ç½®åˆ†å‰²çº¿ï¼ˆItemDecorationï¼‰ è¦extends RecyclerView.ItemDecoration&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ItemAnimator åŠ¨ç”»æ•ˆæœ
ï¼ˆåŒæ ·RecyclerView å®ç° RecyclerView.Adapterå¯ä»¥å®ç°ä¸°å¯Œçš„uiæ•ˆæœï¼Œä¸Šæ‹‰åŠ è½½æ›´å¤šå°±æ˜¯åˆ©ç”¨Adapterä¸­çš„viewtypeæ¥å®ç°ï¼‰&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;é‡å†™RecyclerViewçš„onScrollStateChanged&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onScrollStateChanged&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onScrollStateChanged&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;RecyclerView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SCROLL_STATE_IDLE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;loadMoreListener&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;isLoadingData&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;canloadMore&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;LayoutManager&lt;/span&gt; &lt;span class="n"&gt;layoutManager&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;getLayoutManager&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;lastVisibleItemPosition&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;layoutManager&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="n"&gt;GridLayoutManager&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;lastVisibleItemPosition&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;GridLayoutManager&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;layoutManager&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;findLastVisibleItemPosition&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;layoutManager&lt;/span&gt; &lt;span class="k"&gt;instanceof&lt;/span&gt; &lt;span class="n"&gt;StaggeredGridLayoutManager&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;into&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;[((&lt;/span&gt;&lt;span class="n"&gt;StaggeredGridLayoutManager&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;layoutManager&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;getSpanCount&lt;/span&gt;&lt;span class="o"&gt;()];&lt;/span&gt;
                &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;StaggeredGridLayoutManager&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;layoutManager&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;findLastVisibleItemPositions&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;lastVisibleItemPosition&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;last&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;lastVisibleItemPosition&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;LinearLayoutManager&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;layoutManager&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;findLastVisibleItemPosition&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;

            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;layoutManager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getChildCount&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
                    &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;lastVisibleItemPosition&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;layoutManager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getItemCount&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;loadingMoreFooter&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="n"&gt;loadingMoreFooter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVisible&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;
                &lt;span class="n"&gt;isLoadingData&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="n"&gt;loadMoreListener&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onLoadMore&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ ¹æ®viewTypeæ¥æ˜¾ç¤ºFooterView&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;RecyclerView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ViewHolder&lt;/span&gt; &lt;span class="nf"&gt;onCreateViewHolder&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ViewGroup&lt;/span&gt; &lt;span class="n"&gt;parent&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;viewType&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;viewType&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;FOOTER&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nf"&gt;SimpleViewHolder&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;loadingMoreFooter&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;adapter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onCreateViewHolder&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;parent&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;viewType&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç»‘å®šæ•°æ®&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="nd"&gt;@Override&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onBindViewHolder&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RecyclerView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ViewHolder&lt;/span&gt; &lt;span class="n"&gt;holder&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;position&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;holder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;itemView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOnClickListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;holder&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;itemView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOnLongClickListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;adapter&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;adapter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getItemCount&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;position&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;adapter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onBindViewHolder&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;holder&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;position&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¦å¤–äº‹ä»¶å¤„ç†éœ€è¦è‡ªå®šä¹‰ åˆæ¥ä¹åˆ°ï¼Œæœ‰å†™çš„ä¸åˆç†ä¹‹å¤„è¯·å¤šæŒ‡æ­£ï¼Œå…·ä½“ç®€å•å®ç°è§&lt;a href="https://github.com/zhangyao0328/RecyclerViewMore"&gt;demo&lt;/a&gt;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Riot.js ä»£ç é£æ ¼æŒ‡å—</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-09-01.html"/>
    <id>https://jiandanxinli.github.io/2016-09-01.html</id>
    <published>2016-09-01T08:00:00+08:00</published>
    <updated>2016-09-03T08:39:47+08:00</updated>
    <author>
      <name>Ben</name>
    </author>
    <content type="html">&lt;p&gt;æœ¬æ–‡èŠ‚é€‰ç¿»è¯‘è‡ª &lt;a href="https://github.com/voorhoede/riotjs-style-guide"&gt;https://github.com/voorhoede/riotjs-style-guide&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;å®—æ—¨&lt;/h3&gt;

&lt;p&gt;æœ¬æŒ‡å—çš„ç›®æ ‡æ˜¯æä¾›ä¸€ä»½ç»Ÿä¸€çš„ Riot.js ä»£ç é£æ ¼æŒ‡å—ï¼Œä»¥ä½¿ä½ çš„é¡¹ç›®è¾¾åˆ°ä»¥ä¸‹æ•ˆæœï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¸®åŠ©å¼€å‘äººå‘˜ç†è§£å’ŒæŸ¥æ‰¾ä»£ç ï¼›&lt;/li&gt;
&lt;li&gt;æ–¹ä¾¿ IDE é«˜äº®ä»£ç å’Œæä¾›ååŠ©ï¼›&lt;/li&gt;
&lt;li&gt;æ–¹ä¾¿æ„å»ºå·¥å…·æ„å»ºä»£ç ï¼›&lt;/li&gt;
&lt;li&gt;æ–¹ä¾¿ç¼“å­˜ã€æ‰“åŒ…å’Œåˆ†ç¦»ä»£ç ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æœ¬æŒ‡å—å— John Papa çš„ &lt;a href="https://github.com/johnpapa/angular-styleguide"&gt;AngularJS Style Guide&lt;/a&gt; å¯å‘ã€‚&lt;/p&gt;

&lt;h3&gt;ç¤ºä¾‹&lt;/h3&gt;

&lt;p&gt;è¿™äº›æ˜¯æŒ‰ç…§æœ¬æŒ‡å—ç¼–å†™çš„ç¤ºä¾‹é¡¹ç›®ï¼š&lt;a href="https://voorhoede.github.io/riotjs-demos/"&gt;https://voorhoede.github.io/riotjs-demos/&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;æ­£æ–‡&lt;/h3&gt;

&lt;h4&gt;æ¨¡å—åŒ–å¼€å‘&lt;/h4&gt;

&lt;p&gt;è®©ä½ çš„ä»£ç æ¨¡å—åŒ–ï¼Œå¹¶ä¿è¯å…¶ä¸šåŠ¡é€»è¾‘å°è€Œæ¸…æ™°ã€‚&lt;/p&gt;

&lt;p&gt;æ¨¡å—æ˜¯åº”ç”¨çš„ç»„æˆéƒ¨åˆ†ï¼ŒRiot.js å¯ä»¥æ–¹ä¾¿çš„æ„å»ºå’Œç»„ç»‡æ¨¡å—ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ— è®ºå¯¹äºä½ è¿˜æ˜¯ä»–äººï¼Œå°æ¨¡å—éƒ½æ˜¯ä¾¿äºé˜…è¯»ã€ç†è§£ã€ç»´æŠ¤ã€é‡ç”¨å’Œè°ƒè¯•çš„æœ€ä½³é€‰æ‹©ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦ç¬¦åˆ &lt;a href="https://addyosmani.com/first/"&gt;FIRST&lt;/a&gt; åŸåˆ™ï¼šä¸“æ³¨ï¼ˆFocusedï¼Œ&lt;a href="http://en.wikipedia.org/wiki/Single_responsibility_principle"&gt;å•ä¸€èŒè´£&lt;/a&gt;ï¼‰ã€ç‹¬ç«‹ï¼ˆIndependentï¼‰ã€å¯å¤ç”¨ï¼ˆReusableï¼‰ã€ç®€æ´ï¼ˆSmallï¼‰å’Œå¯æµ‹è¯•ï¼ˆTestableï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ çš„æ¨¡å—åŠŸèƒ½å¤ªå¤šï¼Œå¯¼è‡´ä½“ç§¯è‡ƒè‚¿ï¼Œè¯·æŠŠå®ƒåˆ‡åˆ†æˆå¤šä¸ªå°æ¨¡å—ã€‚æ¯”å¦‚ç¡®ä¿æ¯ä¸ªæ¨¡å—çš„ä»£ç ä¸è¶…è¿‡ 100 è¡Œï¼Œå¹¶ä½¿å…¶ä¸å…¶å®ƒæ¨¡å—éš”ç¦»ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å°è´´å£«&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ ä½¿ç”¨ AMD æˆ– CommonJS æ¥åŠ è½½æ¨¡å—ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­åŠ ä¸Š&lt;code&gt;--modular&lt;/code&gt;å‚æ•°&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;# enable AMD and CommonJS
riot --modular
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;æ¨¡å—çš„å‘½å&lt;/h4&gt;

&lt;p&gt;æ¨¡å—çš„åå­—ä»£è¡¨æ¨¡å—çš„ç”¨é€”ï¼Œéœ€è¦éµå®ˆä»¥ä¸‹è¦æ±‚ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ°å½“çš„å«ä¹‰ï¼šé¿å…è¿‡äºå…·ä½“æˆ–è¿‡äºæŠ½è±¡ï¼›&lt;/li&gt;
&lt;li&gt;ç®€çŸ­ï¼š2 ~ 3 ä¸ªå•è¯ï¼›&lt;/li&gt;
&lt;li&gt;é¡ºå£ï¼šä¸ç»•å£ï¼Œæ–¹ä¾¿äº¤æµï¼›&lt;/li&gt;
&lt;li&gt;ç¬¦åˆ W3C çš„&lt;a href="https://www.w3.org/TR/custom-elements/"&gt;è‡ªå®šä¹‰æ ‡ç­¾æ ‡å‡†&lt;/a&gt;ï¼Œä½¿ç”¨è¿å­—ç¬¦ï¼Œé¿å¼€ä¿ç•™åç§°ï¼›&lt;/li&gt;
&lt;li&gt;ä»¥å¯¹è±¡ä½œä¸ºåå­—çš„å‰ç¼€ã€‚é™¤éæ¨¡å—éå¸¸é€šç”¨ï¼Œå¦åˆ™ä¸è¦åªä½¿ç”¨ä¸€ä¸ªè¯ä½œä¸ºåå­—ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ¨¡å—é—´é€šè¿‡åå­—æ¥é€šè®¯ï¼Œæ‰€ä»¥åå­—å¿…é¡»æœ‰æ°å½“çš„å«ä¹‰ã€ç®€çŸ­ä¸”é¡ºå£ï¼›&lt;/li&gt;
&lt;li&gt;åå­—å°†ä½œä¸ºæ ‡ç­¾åå†™å…¥ HTML ä¸­ï¼Œæ‰€ä»¥å¿…é¡»ç¬¦åˆ HTML çš„è§„èŒƒã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="c"&gt;&amp;lt;!-- æ¨è --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;app-header&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;user-list&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;range-slider&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

&lt;span class="c"&gt;&amp;lt;!-- é¿å… --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;btn-group&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- è™½ç„¶ç®€çŸ­ï¼Œä½†ç»•å£ï¼Œå¯ä»¥ç”¨ `button-group` æ›¿ä»£ --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;ui-slider&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- æ‰€æœ‰çš„æ¨¡å—éƒ½æ˜¯ UI æ¨¡å—ï¼Œæ‰€ä»¥ ui åœ¨è¿™é‡Œæ²¡æœ‰æ„ä¹‰ --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;slider&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- ä¸ç¬¦åˆ W3C çš„è‡ªå®šä¹‰æ ‡ç­¾æ ‡å‡† --&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;ä¸€ä¸ªæ¨¡å—ä¸€ä¸ªæ–‡ä»¶å¤¹&lt;/h4&gt;

&lt;p&gt;æ„å»ºæ—¶æŠŠä¸€ä¸ªæ¨¡å—çš„æ‰€æœ‰æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ‰“åŒ…æ–‡ä»¶æ–¹ä¾¿æŸ¥æ‰¾å’Œé‡ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æŠŠæ¨¡å—åä½œä¸ºæ–‡ä»¶å¤¹çš„åå­—å’Œæ–‡ä»¶å‰ç¼€ï¼Œåç¼€ä¸ºæ–‡ä»¶ç±»å‹ã€‚&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;modules/
â””â”€â”€ my-example/
    â”œâ”€â”€ my-example.tag.html
    â”œâ”€â”€ my-example.less
    â”œâ”€â”€ ...
    â””â”€â”€ README.md
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¦‚æœä½ çš„æ¨¡å—é‡Œæœ‰å­æ¨¡å—ï¼Œå¯ä»¥æŠŠå­æ¨¡å—ä½œä¸ºå­æ–‡ä»¶å¤¹ã€‚&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;modules/
â”œâ”€â”€ radio-group/
|   â””â”€â”€ radio-group.tag.html
â””â”€â”€ search-form/
    â”œâ”€â”€ search-form.tag.html
    â”œâ”€â”€ ...
    â””â”€â”€ search-filters/
        â””â”€â”€ search-filters.tag.html
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;ä½¿ç”¨ &lt;code&gt;.tag.html&lt;/code&gt; ä½œä¸ºæ–‡ä»¶åç¼€&lt;/h4&gt;

&lt;p&gt;Riot.js å»ºè®®ä½¿ç”¨ &lt;code&gt;.tag&lt;/code&gt; ä½œä¸ºæ¨¡å—çš„æ–‡ä»¶ååç¼€ï¼Œè™½ç„¶å®ƒçš„æœ¬è´¨æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ ‡ç­¾ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å‘Šè¯‰å¼€å‘è€…è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ª html æ–‡ä»¶ï¼Œè€Œæ˜¯ Riot.js æ¨¡å—ï¼›&lt;/li&gt;
&lt;li&gt;å¸®åŠ© IDE è¯†åˆ«æ–‡ä»¶ç±»å‹ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœåœ¨&lt;a href="http://riotjs.com/guide/compiler/#in-browser-compilation"&gt;æµè§ˆå™¨ç«¯ä½¿ç”¨&lt;/a&gt;ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;script &lt;/span&gt;&lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;"path/to/modules/my-example/my-example.tag.html"&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;"riot/tag"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a href="http://riotjs.com/guide/compiler/#pre-compilation"&gt;é¢„ç¼–è¯‘&lt;/a&gt;æ—¶ï¼Œéœ€è¦åŠ ä¸Š&lt;a href="http://riotjs.com/guide/compiler/#custom-extension"&gt;åç¼€å‚æ•°&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;riot --ext tag.html modules/ dist/tags.js
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¦‚æœä½ ä½¿ç”¨ &lt;a href="https://github.com/srackham/tag-loader"&gt;Webpack tag loader&lt;/a&gt;ï¼Œéœ€è¦&lt;a href="http://webpack.github.io/docs/using-loaders.html#configuration"&gt;è®¾ç½® loader&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;pre class="highlight json"&gt;&lt;code&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;test:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;/\.tag.html$/,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;loader:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;'tag'&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;åœ¨è‡ªå®šä¹‰æ ‡ç­¾é‡Œä½¿ç”¨ &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; æ ‡ç­¾&lt;/h4&gt;

&lt;p&gt;Riot.js æ”¯æŒåœ¨&lt;a href="http://riotjs.com/guide/#no-script-tag"&gt;è‡ªå®šä¹‰æ ‡ç­¾é‡Œä¸ä½¿ç”¨ &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; æ ‡ç­¾&lt;/a&gt;ï¼Œä½†ä½ éœ€è¦æŠŠ Javascript ä»£ç å†™åœ¨ &lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt; æ ‡ç­¾é‡Œã€‚è¿™å¯ä»¥è®©ä»£ç æ›´æ˜“äºç†è§£ä»¥åŠé¿å… IDE è¯†åˆ«æ··ä¹±ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;é¿å…éè„šæœ¬è¯­è¨€è¢«è§£è¯»ä¸ºè„šæœ¬è¯­è¨€ï¼›&lt;/li&gt;
&lt;li&gt;ä¾¿äº IDE è¯†åˆ«ï¼›&lt;/li&gt;
&lt;li&gt;æ˜ç¡®è„šæœ¬ä»å“ªé‡Œå¼€å§‹ï¼Œåœ¨å“ªé‡Œç»“æŸã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="c"&gt;&amp;lt;!-- æ¨è --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;my-example&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;The year is { this.year }&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;year&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nb"&gt;Date&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="nx"&gt;getUTCFullYear&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/my-example&amp;gt;&lt;/span&gt;

&lt;span class="c"&gt;&amp;lt;!-- é¿å… --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;my-example&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;The year is { this.year }&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;

    this.year = (new Date()).getUTCFullYear();
&lt;span class="nt"&gt;&amp;lt;/my-example&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;ä¿æŒè‡ªå®šä¹‰æ ‡ç­¾ä¸­çš„é€»è¾‘ç®€æ´&lt;/h4&gt;

&lt;p&gt;Riot.js æä¾›çš„æ ‡ç­¾å†…ç½®è¯­æ³•æ”¯æŒ Javascript è¯­æ³•ï¼Œä½†è¿™å¹¶ä¸è¡¨ç¤ºå»ºè®®ä½ åœ¨å…¶ä¸­ç¼–å†™å¤æ‚çš„ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¤æ‚çš„å†…ç½®è„šæœ¬ä¼šå¯¼è‡´éš¾ä»¥é˜…è¯»ï¼›&lt;/li&gt;
&lt;li&gt;å¤æ‚çš„å†…ç½®è„šæœ¬éš¾ä»¥é‡ç”¨ï¼›&lt;/li&gt;
&lt;li&gt;IDE æ— æ³•å‡†ç¡®è¯†åˆ«å†…ç½®è„šæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æŠŠå¤æ‚çš„å†…ç½®è„šæœ¬ç§»åˆ°æ¨¡å—å˜é‡æˆ–æ¨¡å—æ–¹æ³•é‡Œã€‚&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="c"&gt;&amp;lt;!-- æ¨è --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;my-example&amp;gt;&lt;/span&gt;
    { year() + '-' + month() }

    &lt;span class="nt"&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
        &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;twoDigits&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'0'&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;num&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;slice&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;month&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;twoDigits&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nb"&gt;Date&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="nx"&gt;getUTCMonth&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;year&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nb"&gt;Date&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="nx"&gt;getUTCFullYear&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/my-example&amp;gt;&lt;/span&gt;

&lt;span class="c"&gt;&amp;lt;!-- é¿å… --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;my-example&amp;gt;&lt;/span&gt;
    { (new Date()).getUTCFullYear() + '-' + ('0' + ((new Date()).getUTCMonth()+1)).slice(-2) }
&lt;span class="nt"&gt;&amp;lt;/my-example&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;ä¿æŒå‚æ•°ç®€æ´&lt;/h4&gt;

&lt;p&gt;Riot.js æ”¯æŒé€šè¿‡è‡ªå®šä¹‰å±æ€§ç»™æ¨¡å—æ·»åŠ å‚æ•°ï¼Œæ¯”å¦‚ &lt;code&gt;&amp;lt;my-tag my-attr=&amp;quot;{ value }&amp;quot; /&amp;gt;&lt;/code&gt;ï¼Œå¯ä»¥åœ¨æ¨¡å—ä¸­é€šè¿‡ &lt;code&gt;opts.MyAttr&lt;/code&gt; è·å–å‚æ•°ã€‚&lt;/p&gt;

&lt;p&gt;å°½ç®¡ Riot.js æ”¯æŒä½¿ç”¨å¤æ‚çš„åŸç”Ÿ Javascript è¯­æ³•æ¥ä¼ é€’å‚æ•°ï¼Œä½†æˆ‘ä»¬åº”ä¿æŒå‚æ•°çš„ç®€æ´ï¼Œåªä½¿ç”¨æ ‡å‡†çš„&lt;a href="https://developer.mozilla.org/en-US/docs/Glossary/Primitive"&gt;Javascript ç±»å‹&lt;/a&gt;ï¼Œå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å‡½æ•°ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;å…è®¸çš„ä¾‹å¤–æƒ…å†µæ˜¯åªèƒ½ä½¿ç”¨å¤æ‚å¯¹è±¡æ¥ä¼ é€’å‚æ•°ï¼ˆå¦‚ä¸€ç»„å¯¹è±¡ã€é€’å½’æ¨¡å—ç­‰ï¼‰æˆ–é€šç”¨çš„ä¸šåŠ¡å¯¹è±¡ï¼ˆå¦‚ &lt;code&gt;Product&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ¯ä¸ªå±æ€§ä½œä¸ºä¸€ä¸ªç‹¬ç«‹å‚æ•°ï¼Œå¯ä»¥è®©å‚æ•°æ˜“äºé˜…è¯»å’Œç†è§£ï¼›&lt;/li&gt;
&lt;li&gt;åªä½¿ç”¨é»˜è®¤çš„ Javascript ç±»å‹å¯ä»¥è®©ä»£ç é£æ ¼æ›´æ¥è¿‘ HTML çš„åŸç”Ÿé£æ ¼ï¼›&lt;/li&gt;
&lt;li&gt;å¤æ‚çš„å‚æ•°ä¼šå¯¼è‡´éš¾ä»¥ç†è§£å’Œé‡æ„ï¼Œå¯¼è‡´æŠ€æœ¯å€ºåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ¯ä¸ªå±æ€§ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å‚æ•°ï¼Œå‚æ•°å€¼ä¸º Javascript åŸç”Ÿç±»å‹ã€‚&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="c"&gt;&amp;lt;!-- æ¨è --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;range-slider&lt;/span&gt;
    &lt;span class="na"&gt;values=&lt;/span&gt;&lt;span class="s"&gt;"[10, 20]"&lt;/span&gt;
    &lt;span class="na"&gt;min=&lt;/span&gt;&lt;span class="s"&gt;"0"&lt;/span&gt;
    &lt;span class="na"&gt;max=&lt;/span&gt;&lt;span class="s"&gt;"100"&lt;/span&gt;
    &lt;span class="na"&gt;step=&lt;/span&gt;&lt;span class="s"&gt;"5"&lt;/span&gt;
    &lt;span class="na"&gt;on-slide=&lt;/span&gt;&lt;span class="s"&gt;"{ updateInputs }"&lt;/span&gt;
    &lt;span class="na"&gt;on-end=&lt;/span&gt;&lt;span class="s"&gt;"{ updateResults }"&lt;/span&gt;
    &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

&lt;span class="c"&gt;&amp;lt;!-- é¿å… --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;range-slider&lt;/span&gt; &lt;span class="na"&gt;config=&lt;/span&gt;&lt;span class="s"&gt;"{ complexConfigObject }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

&lt;span class="c"&gt;&amp;lt;!-- ä¾‹å¤–: è¿­ä»£èœå•æ¨¡å— --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;menu-item&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;"{ opts.url }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;{ opts.text }&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;ul&lt;/span&gt; &lt;span class="na"&gt;if=&lt;/span&gt;&lt;span class="s"&gt;"{ opts.items }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;li&lt;/span&gt; &lt;span class="na"&gt;each=&lt;/span&gt;&lt;span class="s"&gt;"{ item in opts.items }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;menu-item&lt;/span&gt;
                &lt;span class="na"&gt;text=&lt;/span&gt;&lt;span class="s"&gt;"{ item.text }"&lt;/span&gt;
                &lt;span class="na"&gt;url=&lt;/span&gt;&lt;span class="s"&gt;"{ item.url }"&lt;/span&gt;
                &lt;span class="na"&gt;items=&lt;/span&gt;&lt;span class="s"&gt;"{ item.items }"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/menu-item&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;åˆå§‹åŒ–å‚æ•°&lt;/h4&gt;

&lt;p&gt;åœ¨ Riot.js ä¸­ï¼Œå‚æ•°æ˜¯æ¨¡å—çš„ APIã€‚ä¸€ä¸ªå¥å£®çš„å‚æ•°åˆå§‹åŒ–è¿‡ç¨‹ï¼Œå¯ä»¥æ–¹ä¾¿ä»–äººä½¿ç”¨ä½ çš„æ¨¡å—ã€‚&lt;/p&gt;

&lt;p&gt;æ¨¡å—çš„å‚æ•°å¯èƒ½æ˜¯ Riot.js çš„è¡¨è¾¾å¼ï¼ˆ&lt;code&gt;attr=&amp;quot;{ var }&amp;quot;&lt;/code&gt;ï¼‰ã€çº¯å­—ç¬¦ä¸²ï¼ˆ&lt;code&gt;attr=&amp;quot;value&amp;quot;&lt;/code&gt;ï¼‰æˆ–ä¸å­˜åœ¨ã€‚ä½ éœ€è¦åˆå§‹åŒ–å¤„ç†è¿™äº›æƒ…å†µã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åˆå§‹åŒ–å‚æ•°å¯ä»¥ç¡®ä¿ä½ çš„æ¨¡å—æ€»æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œã€‚å“ªæ€•å…¶ä»–å¼€å‘è€…å°†å…¶ç”¨äºè¶…å‡ºä½ é¢„æœŸçš„ç”¨é€”ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ç»™å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼›&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ç±»å‹è½¬æ¢ï¼Œå°†å€¼è½¬æ¢æˆæœŸæœ›çš„ç±»å‹ï¼›&lt;/li&gt;
&lt;li&gt;åœ¨ä½¿ç”¨å‚æ•°å‰ï¼Œå…ˆæ£€æŸ¥å‚æ•°æ˜¯å¦å­˜åœ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åœ¨ &lt;a href="http://riotjs.com/guide/#example"&gt;Riot.js çš„ç¤ºä¾‹&lt;/a&gt; ä¸­ï¼Œå¯ä»¥æŠŠä»£ç è¿›è¡Œå¦‚ä¸‹æ”¹è¿›ï¼š&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;items&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;opts&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;items&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="p"&gt;[];&lt;/span&gt; &lt;span class="c1"&gt;// è®¾ç½®é»˜è®¤å€¼ä¸ºç©ºæ•°ç»„&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ ·æ”¹è¿›åï¼Œå¯ä»¥è®©æ¨¡å—åœ¨ä»¥ä¸‹æƒ…å†µä¸­æ­£å¸¸è¿ä½œï¼š&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;todo&lt;/span&gt; &lt;span class="na"&gt;items=&lt;/span&gt;&lt;span class="s"&gt;"{ [{ title:'Apples' }, { title:'Oranges', done:true }] }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- ä¼ å…¥å‚æ•°æ—¶ --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;todo&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- æœªä¼ å…¥å‚æ•°æ—¶ --&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯¹äº &lt;code&gt;&amp;lt;range-slider&amp;gt;&lt;/code&gt; è¿™ç§æ¨¡å—ï¼Œæˆ‘ä»¬é¢„æœŸå…¶å‚æ•°éƒ½æ˜¯æ•°å­—ç±»å‹ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="c1"&gt;// å¦‚æœæ²¡æœ‰ä¼ å…¥ stepï¼Œå°±è®¾ä¸ºé»˜è®¤å€¼&lt;/span&gt;
&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;step&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nb"&gt;isNaN&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;Number&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;opts&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;step&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;?&lt;/span&gt; &lt;span class="nb"&gt;Number&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;opts&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;step&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»¥æ­¤ç¡®ä¿ä»¥ä¸‹æƒ…å†µéƒ½å¯ä»¥æ­£å¸¸è¿è¡Œï¼š&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;range-slider&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- å…¨éƒ¨ä½¿ç”¨é»˜è®¤å€¼ --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;range-slider&lt;/span&gt; &lt;span class="na"&gt;step=&lt;/span&gt;&lt;span class="s"&gt;"5"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- å°†å­—ç¬¦ä¸² "5" è½¬å˜æˆæ•°å­— 5 --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;range-slider&lt;/span&gt; &lt;span class="na"&gt;step=&lt;/span&gt;&lt;span class="s"&gt;"{ x }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- ä½¿ç”¨å˜é‡ x --&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å½“ &lt;code&gt;&amp;lt;range-slider&amp;gt;&lt;/code&gt; æ¨¡å—æ”¯æŒå¯é€‰çš„ &lt;code&gt;on-slide&lt;/code&gt; äº‹ä»¶æ—¶ï¼Œéœ€è¦åœ¨ä½¿ç”¨å‰ç¡®è®¤æ˜¯å¦ä¼ å…¥äº†å›è°ƒï¼š&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="nx"&gt;slider&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'slide'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;values&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;handle&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;typeof&lt;/span&gt; &lt;span class="nx"&gt;opts&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;onSlide&lt;/span&gt; &lt;span class="o"&gt;===&lt;/span&gt; &lt;span class="s1"&gt;'function'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;opts&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;onSlide&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;values&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;handle&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»¥æ­¤ç¡®ä¿ä»¥ä¸‹æƒ…å†µå¯ä»¥æ­£å¸¸è¿è¡Œï¼š&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;range-slider&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- ä»€ä¹ˆéƒ½ä¸è§¦å‘ --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;range-slider&lt;/span&gt; &lt;span class="na"&gt;on-slide=&lt;/span&gt;&lt;span class="s"&gt;"{ updateInputs }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- è§¦å‘ updateInputs --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;range-slider&lt;/span&gt; &lt;span class="na"&gt;on-slide=&lt;/span&gt;&lt;span class="s"&gt;"invalid option"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- ä»€ä¹ˆéƒ½ä¸è§¦å‘ --&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;å°† this æ”¹åä¸º tag&lt;/h4&gt;

&lt;p&gt;åœ¨ Riot.js æ¨¡å—å†…ï¼Œ&lt;code&gt;this&lt;/code&gt; æŒ‡å‘æ¨¡å—å®ä¾‹ï¼ŒæŠŠ &lt;code&gt;tag&lt;/code&gt; èµ‹å€¼ä¸º &lt;code&gt;this&lt;/code&gt; åï¼Œå¯ä»¥åœ¨ä¸åŒçš„ä½œç”¨åŸŸä¸‹è°ƒç”¨æ¨¡å—å®ä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å°† &lt;code&gt;tag&lt;/code&gt; èµ‹å€¼ä¸ºå®ä¾‹å˜é‡ï¼Œå…¶å®ƒå¼€å‘è€…å°±å¯ä»¥æ–¹ä¾¿çš„è°ƒç”¨äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="cm"&gt;/* æ¨è */&lt;/span&gt;

&lt;span class="c1"&gt;// ES5 çš„èµ‹å€¼å†™æ³•&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;onresize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;adjust&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;// ES6 ä¸­å¯ä»¥æŠŠ tag èµ‹å€¼ä¸ºå¸¸é‡&lt;/span&gt;
&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;onresize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;adjust&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;// ES6 ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ =&amp;gt; æ¥ç»§ç»­ä½¿ç”¨ this&lt;/span&gt;
&lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;onresize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;adjust&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* é¿å… */&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;self&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;_this&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="c1"&gt;// ç­‰ç­‰&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;åœ¨é¡¶éƒ¨å£°æ˜å˜é‡&lt;/h4&gt;

&lt;p&gt;åœ¨ Riot.js çš„æ¨¡å—ä¸­ï¼Œä½ å¯ä»¥ä»»æ„å£°æ˜å˜é‡å’Œæ–¹æ³•ï¼Œä½†è¿™ä¼šå¯¼è‡´å¯è¯»æ€§é—®é¢˜ã€‚æ‰€ä»¥å»ºè®®æŠŠå˜é‡å’Œæ–¹æ³•æŒ‰é¡ºåºåœ¨é¡¶éƒ¨å£°æ˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;åœ¨é¡¶éƒ¨å£°æ˜å˜é‡å’Œæ–¹æ³•ï¼Œå¯ä»¥æ–¹ä¾¿å¼€å‘è€…å¾—çŸ¥å¯ä»¥ä½¿ç”¨å“ªäº›å˜é‡å’Œæ–¹æ³•ï¼›&lt;/li&gt;
&lt;li&gt;æŒ‰å­—æ¯é¡ºåºæ’åˆ—å¯ä»¥ä¾¿äºæŸ¥æ‰¾ï¼›&lt;/li&gt;
&lt;li&gt;å°†æ–¹æ³•æ”¾åœ¨åé¢ï¼Œå¯ä»¥éšè—æ‰§è¡Œç»†èŠ‚ï¼Œä¾¿äºä¸€ç¥å…¨å±€ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æŠŠå˜é‡å£°æ˜å’Œæ–¹æ³•ç§»åˆ°é¡¶éƒ¨ã€‚&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="cm"&gt;/* æ¨è */&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;''&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;todos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;add&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;add&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;edit&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;edit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;toggle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;toggle&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* ... */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;edit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* ... */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;toggle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* ... */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;   

&lt;span class="cm"&gt;/* é¿å… */&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;todos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;add&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* ... */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;''&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;edit&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* ... */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;toggle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;event&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* ... */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä½ ä¹Ÿå¯ä»¥æŠŠ &lt;code&gt;mixins&lt;/code&gt; å’Œ &lt;code&gt;observables&lt;/code&gt; æ”¾åœ¨é¡¶éƒ¨ï¼š&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="cm"&gt;/* recommended */&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="c1"&gt;// alphabetized properties&lt;/span&gt;
&lt;span class="c1"&gt;// alphabetized methods&lt;/span&gt;
&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;mixin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'someBehaviour'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'mount'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;onMount&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;on&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'update'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;onUpdate&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="c1"&gt;// etc&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;é¿å…ä½¿ç”¨éæ ‡å‡†çš„ ES6 è¯­æ³•&lt;/h4&gt;

&lt;p&gt;Riot.js æ”¯æŒ&lt;a href="http://riotjs.com/guide/#tag-syntax"&gt;æ¨¡ä»¿ ES6 çš„æ–¹æ³•å£°æ˜è¯­æ³•&lt;/a&gt;ï¼ŒæŠŠ &lt;code&gt;methodName() { }&lt;/code&gt; ç¼–è¯‘æˆ &lt;code&gt;this.methodName = function() {}.bind(this)&lt;/code&gt;ã€‚ä½†è¿™å¹¶ä¸æ˜¯ ES6 çš„æ ‡å‡†è¯­æ³•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;è¿™å¹¶ä¸æ˜¯ ES6 çš„æ ‡å‡†è¯­æ³•ï¼Œä¼šé€ æˆå¼€å‘è€…çš„å›°æ‰°ï¼›&lt;/li&gt;
&lt;li&gt;IDE æ— æ³•å‡†ç¡®è¯†åˆ«è¿™ç§è¯­æ³•ï¼›&lt;/li&gt;
&lt;li&gt;è¿™ç§è¯­æ³•æ— æ³•æ¸…æ™°è¡¨è¾¾å…¶ä½œç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ &lt;code&gt;tag.methodName =&lt;/code&gt; æ›¿ä»£ &lt;code&gt;methodName() { }&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="cm"&gt;/* æ¨è */&lt;/span&gt;
&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;tag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;todos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;add&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;add&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;add&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;todos&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;push&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt; &lt;span class="na"&gt;title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt; &lt;span class="p"&gt;});&lt;/span&gt;
        &lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;input&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;''&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* é¿å… */&lt;/span&gt;
&lt;span class="nx"&gt;todos&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[];&lt;/span&gt;

&lt;span class="nx"&gt;add&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;todos&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;push&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt; &lt;span class="na"&gt;title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt; &lt;span class="p"&gt;});&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;input&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;''&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;å°è´´å£«&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥åŠ ä¸Š&lt;a href="http://riotjs.com/guide/compiler/#no-transformation"&gt;ç¦ç”¨ ES6 çš„å‚æ•°&lt;/a&gt;ï¼Œæ¥é¿å…ç¼–è¯‘è¿™ç§è¯­æ³•ï¼š&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;riot --type none
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;é¿å…ä½¿ç”¨ &lt;code&gt;tag.parent&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;Riot.js æ”¯æŒ&lt;a href="http://riotjs.com/guide/#nested-tags"&gt;åµŒå¥—æ¨¡å—&lt;/a&gt;ï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;tag.parent&lt;/code&gt; è®¿é—®çˆ¶æ¨¡å—ã€‚ä½†è¿™ç§è¡Œä¸ºè¿åäº† &lt;a href="https://addyosmani.com/first/"&gt;FIRST&lt;/a&gt; åŸåˆ™ï¼Œåº”å½“é¿å…ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹å¤–çš„æƒ…å†µæ˜¯åœ¨å¾ªç¯ä¸­ï¼Œä¸”å­å¯¹è±¡æ˜¯åŒ¿åæ¨¡å—ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ¯ä¸ªæ¨¡å—éœ€è¿è¡Œåœ¨è‡ªå·±çš„ä½œç”¨åŸŸä¸­ï¼Œä¸åŒæ¨¡å—é—´ä¿æŒéš”ç¦»ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸€ä¸ªæ¨¡å—éœ€è¦è®¿é—®çˆ¶æ¨¡å—ï¼Œé‚£å®ƒå°†æ— æ³•åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹å¤ç”¨ï¼›&lt;/li&gt;
&lt;li&gt;å…è®¸è®¿é—®å’Œä¿®æ”¹çˆ¶æ¨¡å—ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸å¯é¢„æœŸçš„é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æŠŠéœ€è¦çš„å€¼ä»çˆ¶æ¨¡å—ä¼ å…¥å­æ¨¡å—ï¼›&lt;/li&gt;
&lt;li&gt;çˆ¶æ¨¡å—ä»¥å›è°ƒçš„å½¢å¼ç›‘å¬å­æ¨¡å—çš„äº‹ä»¶ï¼Œä»¥ä¿®æ”¹è‡ªèº«ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="c"&gt;&amp;lt;!-- æ¨è --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;parent-tag&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;child-tag&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;"{ value }"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- æŠŠå€¼ä¼ å…¥å­æ¨¡å— --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/parent-tag&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;child-tag&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;span&amp;gt;&lt;/span&gt;{ opts.value }&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- ä½¿ç”¨çˆ¶æ¨¡å—ä¼ å…¥çš„å€¼ --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/child-tag&amp;gt;&lt;/span&gt;

&lt;span class="c"&gt;&amp;lt;!-- é¿å… --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;parent-tag&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;child-tag&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/parent-tag&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;child-tag&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;span&amp;gt;&lt;/span&gt;value: { parent.value }&lt;span class="nt"&gt;&amp;lt;/span&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- ä¸è¦è¿™ä¹ˆåš --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/child-tag&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="c"&gt;&amp;lt;!-- æ¨è --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;parent-tag&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;child-tag&lt;/span&gt; &lt;span class="na"&gt;on-event=&lt;/span&gt;&lt;span class="s"&gt;"{ methodToCallOnEvent }"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- ä¼ å…¥å›è°ƒå‡½æ•° --&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;script&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;methodToCallOnEvent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="cm"&gt;/*...*/&lt;/span&gt; &lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;parent-tag&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;child-tag&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;button&lt;/span&gt; &lt;span class="na"&gt;onclick=&lt;/span&gt;&lt;span class="s"&gt;"{ opts.onEvent }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;/button&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- äº‹ä»¶è§¦å‘æ—¶é€šçŸ¥çˆ¶æ¨¡å— --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/child-tag&amp;gt;&lt;/span&gt;

&lt;span class="c"&gt;&amp;lt;!-- é¿å… --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;parent-tag&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;child-tag&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;script&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;methodToCallOnEvent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="cm"&gt;/*...*/&lt;/span&gt; &lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;parent-tag&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;child-tag&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;button&lt;/span&gt; &lt;span class="na"&gt;onclick=&lt;/span&gt;&lt;span class="s"&gt;"{ parent.methodToCallOnEvent }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;/button&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- ä¸è¦è¿™ä¹ˆåš --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/child-tag&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="c"&gt;&amp;lt;!-- å…è®¸çš„ä¾‹å¤–æƒ…å†µ --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;parent-tag&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;button&lt;/span&gt; &lt;span class="na"&gt;each=&lt;/span&gt;&lt;span class="s"&gt;"{ item in items }"&lt;/span&gt;
        &lt;span class="na"&gt;onclick=&lt;/span&gt;&lt;span class="s"&gt;"{ parent.onEvent }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- button ä¸æ˜¯ Riot.js çš„æ¨¡å— --&amp;gt;&lt;/span&gt;
        { item.text }
    &lt;span class="nt"&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;script&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;onEvent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;alert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;text&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/parent-tag&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;ä½¿ç”¨ &lt;code&gt;each ... in&lt;/code&gt; è¯­æ³•&lt;/h4&gt;

&lt;p&gt;Riot.js æ”¯æŒå¤šç§&lt;a href="http://riotjs.com/guide/#loops"&gt;å¾ªç¯çš„è¯­æ³•&lt;/a&gt;ï¼šæ•°ç»„å¯ä»¥å†™æˆ &lt;code&gt;each=&amp;quot;{ item in items }&amp;quot;&lt;/code&gt;ï¼›å¯¹è±¡å¯ä»¥å†™æˆ &lt;code&gt;each=&amp;quot;{ key, value in items }&amp;quot;&lt;/code&gt;ï¼›ä»¥åŠç®€å†™ &lt;code&gt;each=&amp;quot;{ items }&amp;quot;&lt;/code&gt;ã€‚ä½†è¿™ç§ç®€å†™ä¼šå¯¼è‡´æ··æ·†ï¼Œæ‰€ä»¥å»ºè®®ç”¨ &lt;code&gt;each ... in&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å½“ Riot.js æ‰§è¡Œå¾ªç¯è¯­å¥æ—¶ï¼Œä¼šæŠŠå½“å‰å¯¹è±¡æ”¾åˆ° &lt;code&gt;this&lt;/code&gt; ä¸­ï¼Œè¿™ç§åšæ³•å¹¶ä¸ç›´è§‚ï¼Œå¯èƒ½ä¼šå¼•èµ·å¼€å‘è€…çš„å›°æ‰°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ &lt;code&gt;each=&amp;quot;{ item in items }&amp;quot;&lt;/code&gt; æˆ– &lt;code&gt;each=&amp;quot;{ key, value in items }&amp;quot;&lt;/code&gt; æ›¿ä»£ &lt;code&gt;each=&amp;quot;{ items }&amp;quot;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="c"&gt;&amp;lt;!-- æ¨è --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;ul&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;li&lt;/span&gt; &lt;span class="na"&gt;each=&lt;/span&gt;&lt;span class="s"&gt;"{ item in items }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;label&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;"{ completed: item.done }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;"checkbox"&lt;/span&gt; &lt;span class="na"&gt;checked=&lt;/span&gt;&lt;span class="s"&gt;"{ item.done }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; { item.title }
        &lt;span class="nt"&gt;&amp;lt;/label&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;

&lt;span class="c"&gt;&amp;lt;!-- æ¨è --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;ul&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;li&lt;/span&gt; &lt;span class="na"&gt;each=&lt;/span&gt;&lt;span class="s"&gt;"{ key, item in items }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;label&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;"{ completed: item.done }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;"checkbox"&lt;/span&gt; &lt;span class="na"&gt;checked=&lt;/span&gt;&lt;span class="s"&gt;"{ item.done }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; { key }. { item.title }
        &lt;span class="nt"&gt;&amp;lt;/label&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;

&lt;span class="c"&gt;&amp;lt;!-- é¿å… --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;ul&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;li&lt;/span&gt; &lt;span class="na"&gt;each=&lt;/span&gt;&lt;span class="s"&gt;"{ items }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;label&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;"{ completed: done }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;"checkbox"&lt;/span&gt; &lt;span class="na"&gt;checked=&lt;/span&gt;&lt;span class="s"&gt;"{ done }"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; { title }
        &lt;span class="nt"&gt;&amp;lt;/label&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/li&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;å°†æ ·å¼æ”¾åœ¨ç‹¬ç«‹çš„æ–‡ä»¶&lt;/h4&gt;

&lt;p&gt;ä¸ºäº†ç»™å¼€å‘è€…æä¾›ä¾¿åˆ©ï¼ŒRiot.js å…è®¸åœ¨æ¨¡å—ä¸­&lt;a href="http://riotjs.com/guide/#tag-styling"&gt;åµŒå¥— &lt;code&gt;&amp;lt;style&amp;gt;&lt;/code&gt;&lt;/a&gt;ï¼Œå¹¶æä¾›äº† &lt;a href="http://riotjs.com/guide/#scoped-css"&gt;scope&lt;/a&gt; åŠŸèƒ½æ¥é™åˆ¶æ ·å¼çš„ä½œç”¨åŸŸï¼Œä½†è¿™å¹¶ä¸æ˜¯çœŸæ­£çš„æ ·å¼éš”ç¦»ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ç‹¬ç«‹çš„æ ·å¼æ–‡ä»¶å¯ä»¥è®©æµè§ˆå™¨æ›´å®¹æ˜“çš„è¯»å–ï¼Œå¹¶ä¸”é¿å…å› æ¨¡å—åŠ è½½å‡ºé”™æˆ–è€…æœªåŠ è½½è€Œå¯¼è‡´é—®é¢˜ï¼›&lt;/li&gt;
&lt;li&gt;ç‹¬ç«‹çš„æ ·å¼æ–‡ä»¶å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œé¢„ç¼–è¯‘ï¼ˆå¦‚ Sassã€PostCSS ç­‰ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;ç‹¬ç«‹çš„æ ·å¼æ–‡ä»¶å¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œå‹ç¼©ã€æ„å»ºå’Œç¼“å­˜ï¼Œè¿™æ ·æœ‰åˆ©äºæå‡æ€§èƒ½ï¼›&lt;/li&gt;
&lt;li&gt;Riot.js å¹¶æ²¡æœ‰é¢å¤–çš„åŠŸèƒ½æä¾›ç»™å†…åµŒæ ·å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å°†æ ·å¼æ‹†åˆ†ä¸ºç‹¬ç«‹æ–‡ä»¶æ”¾åœ¨æ¨¡å—æ–‡ä»¶å¤¹å†…ï¼š&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;my-example/
â”œâ”€â”€ my-example.tag.html
â”œâ”€â”€ my-example.(css|less|scss)    &amp;lt;-- external stylesheet next to tag file
â””â”€â”€ ...
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;ä½¿ç”¨æ ‡ç­¾åå­—ä½œä¸ºæ ·å¼çš„ä½œç”¨åŸŸ&lt;/h4&gt;

&lt;p&gt;Riot.js çš„æ¨¡å—æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ ‡ç­¾ï¼Œæ ‡ç­¾åéå¸¸é€‚åˆä½œä¸ºæ ·å¼çš„ä½œç”¨åŸŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨æ ‡ç­¾åä½œä¸ºæ ·å¼çš„ä½œç”¨åŸŸï¼Œå¯ä»¥è®©æ ·å¼æ•ˆæœæ›´å¯é¢„æœŸï¼›&lt;/li&gt;
&lt;li&gt;ç»Ÿä¸€çš„åå­—ä¾¿äºå¼€å‘è€…ç†è§£ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨æ ‡ç­¾åä½œä¸ºæ ·å¼çš„çˆ¶ç±»æˆ–ä½œç”¨åŸŸã€‚&lt;/p&gt;
&lt;pre class="highlight css"&gt;&lt;code&gt;&lt;span class="c"&gt;/* æ¨è */&lt;/span&gt;
&lt;span class="nt"&gt;my-example&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nt"&gt;my-example&lt;/span&gt; &lt;span class="nt"&gt;li&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nc"&gt;.my-example__item&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c"&gt;/* é¿å… */&lt;/span&gt;
&lt;span class="nc"&gt;.my-alternative&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="c"&gt;/* not scoped to tag or module name */&lt;/span&gt;
&lt;span class="nc"&gt;.my-parent&lt;/span&gt; &lt;span class="nc"&gt;.my-example&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="c"&gt;/* .my-parent is outside scope, so should not be used in this file */&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;å°è´´å£«&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœä½¿ç”¨ 2.3.17 ä¹‹åçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ &lt;a href="http://riotjs.com/guide/#html-elements-as-tags"&gt;&lt;code&gt;[data-is=&amp;quot;my-example&amp;quot;]&lt;/code&gt;&lt;/a&gt; æ¥æ›¿ä»£ &lt;code&gt;.my-example&lt;/code&gt;&lt;/p&gt;

&lt;h4&gt;ä¸ºæ¨¡å—æ·»åŠ è¯´æ˜æ–‡æ¡£&lt;/h4&gt;

&lt;p&gt;ä¸€ä¸ªæ¨¡å—åŒ…æ‹¬äº†å±æ€§å’Œæ–¹æ³•ï¼Œä¸ºäº†ä¾¿äºå…¶ä»–å¼€å‘äººå‘˜ä½¿ç”¨ï¼Œéœ€è¦å†™ä¸€ä»½æ–‡æ¡£æ¥è¯´æ˜è¿™äº›å±æ€§å’Œæ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ–‡æ¡£å¸®åŠ©å¼€å‘è€…å¿«é€Ÿäº†è§£æ¨¡å—çš„æ•´ä½“æƒ…å†µï¼Œè€Œä¸éœ€è¦é˜…è¯»å…·ä½“çš„ä»£ç ã€‚è¿™ä½¿å¾—æ¨¡å—æ›´æ˜“äºä½¿ç”¨ï¼›&lt;/li&gt;
&lt;li&gt;æ–‡æ¡£é‡Œæ ‡æ˜äº†æ¨¡å—çš„å±æ€§ä¿¡æ¯ï¼Œå¯ä»¥è®©åªæƒ³ä½¿ç”¨ï¼ˆè€Œéå¼€å‘ï¼‰å®ƒçš„äººå¿«é€Ÿä¸Šæ‰‹ï¼›&lt;/li&gt;
&lt;li&gt;æ–‡æ¡£å¸®åŠ©å¼€å‘è€…ç†æ¸…å“ªäº›å†…å®¹æ˜¯å¯¹å¤–æš´éœ²çš„ï¼Œæ›´æ–°æ—¶éœ€è¦è€ƒè™‘å…¼å®¹æ€§ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;README.md&lt;/code&gt; æ˜¯æ ‡å‡†çš„è¯´æ˜æ–‡ä»¶æ ¼å¼ï¼Œåƒ Github ä¹‹ç±»çš„ä»£ç æ‰˜ç®¡å·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿çš„å±•ç¤ºå’Œé˜…è¯»è¿™ä»½æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ·»åŠ  &lt;code&gt;README.md&lt;/code&gt; åˆ°æ¨¡å—æ–‡ä»¶å¤¹ï¼š&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;range-slider/
â”œâ”€â”€ range-slider.tag.html
â”œâ”€â”€ range-slider.less
â””â”€â”€ README.md
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨æ–‡æ¡£ä¸­ï¼Œæè¿°è¯¥æ¨¡å—çš„åŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¹¶è¯´æ˜å…¶è‡ªå®šä¹‰å±æ€§å’Œæ–¹æ³•çš„å«ä¹‰å’Œç”¨æ³•ã€‚&lt;/p&gt;
&lt;pre class="highlight markdown"&gt;&lt;code&gt;&lt;span class="gh"&gt;# Range slider&lt;/span&gt;

&lt;span class="gu"&gt;## Functionality&lt;/span&gt;

The range slider lets the user to set a numeric range by dragging a handle on a slider rail for both the start and end value.

This module uses the &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;noUiSlider&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="sx"&gt;http://refreshless.com/nouislider/&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; for cross browser and touch support.

&lt;span class="gu"&gt;## Usage&lt;/span&gt;

&lt;span class="sb"&gt;`&amp;lt;range-slider&amp;gt;`&lt;/span&gt; supports the following custom tag attributes:

| attribute | type | description
| --- | --- | ---
| &lt;span class="sb"&gt;`min`&lt;/span&gt; | Number | number where range starts (lower limit).
| &lt;span class="sb"&gt;`max`&lt;/span&gt; | Number | Number where range ends (upper limit).
| &lt;span class="sb"&gt;`values`&lt;/span&gt; | Number&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;] *optional* | Array containing start and end value.  E.g. `values="[10, 20&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;"&lt;span class="sb"&gt;`. Defaults to `&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;opts.min, opts.max&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;.
| &lt;span class="sb"&gt;`step`&lt;/span&gt; | Number &lt;span class="ge"&gt;*optional*&lt;/span&gt; | Number to increment / decrement values by. Defaults to 1.
| &lt;span class="sb"&gt;`on-slide`&lt;/span&gt; | Function &lt;span class="ge"&gt;*optional*&lt;/span&gt; | Function called with &lt;span class="sb"&gt;`(values, HANDLE)`&lt;/span&gt; while a user drags the start (&lt;span class="sb"&gt;`HANDLE == 0`&lt;/span&gt;) or end (&lt;span class="sb"&gt;`HANDLE == 1`&lt;/span&gt;) handle. E.g. &lt;span class="sb"&gt;`on-slide={ updateInputs }`&lt;/span&gt;, with &lt;span class="sb"&gt;`tag.updateInputs = (values, HANDLE) =&amp;gt; { const value = values[HANDLE]; }`&lt;/span&gt;.
| &lt;span class="sb"&gt;`on-end`&lt;/span&gt; | Function &lt;span class="ge"&gt;*optional*&lt;/span&gt; | Function called with &lt;span class="sb"&gt;`(values, HANDLE)`&lt;/span&gt; when user stops dragging a handle.

For customising the slider appearance see the &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;Styling section in the noUiSlider docs&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="sx"&gt;http://refreshless.com/nouislider/more/#section-styling&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;.
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;å¢åŠ æ¨¡å—ç¤ºä¾‹&lt;/h4&gt;

&lt;p&gt;å¢åŠ  &lt;code&gt;*.demo.html&lt;/code&gt; ç¤ºä¾‹æ–‡ä»¶ï¼Œæ¥è¡¨ç¤ºæ¨¡å—è¯¥å¦‚ä½•è¢«ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ¨¡å—ç¤ºä¾‹è¯æ˜è¯¥æ¨¡å—å¯ä»¥è¢«ç‹¬ç«‹ä½¿ç”¨ï¼›&lt;/li&gt;
&lt;li&gt;æ¨¡å—ç¤ºä¾‹è®©ä½¿ç”¨è€…åœ¨æŸ¥çœ‹æ–‡æ¡£å’Œä»£ç å‰å°±å¯¹æ¨¡å—æœ‰ä¸ªå¤§ä½“æ¦‚å¿µï¼›&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹ä¸­å¯ä»¥å±•ç¤ºè¯¥æ¨¡å—æ‰€æœ‰å¯èƒ½çš„ä½¿ç”¨æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ·»åŠ  &lt;code&gt;*.demo.html&lt;/code&gt; æ–‡ä»¶åˆ°æ¨¡å—æ–‡ä»¶å¤¹ï¼š&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;city-map/
â”œâ”€â”€ city-map.tag.html
â”œâ”€â”€ city-map.demo.html
â”œâ”€â”€ city-map.css
â””â”€â”€ ...
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨ç¤ºä¾‹æ–‡ä»¶ä¸­ï¼Œéœ€è¦ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¼•å…¥ &lt;code&gt;riot+compiler.min.js&lt;/code&gt; æ¥è§£æå’Œæ‰§è¡Œç¤ºä¾‹ï¼›&lt;/li&gt;
&lt;li&gt;å¼•å…¥æ¨¡å—æ–‡ä»¶ï¼Œå¦‚ &lt;code&gt;./city-map.tag.html&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ª &lt;code&gt;demo&lt;/code&gt; æ ‡ç­¾ç”¨äºåµŒå…¥æ¨¡å—ï¼›&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;code&gt;&amp;lt;demo&amp;gt;&lt;/code&gt; ä¸­ç¼–å†™ç¤ºä¾‹ï¼›&lt;/li&gt;
&lt;li&gt;å¯ä»¥ç»™ &lt;code&gt;demo&lt;/code&gt; æ ‡ç­¾åŠ ä¸Š &lt;code&gt;aria-label&lt;/code&gt; å±æ€§æ¥è¯´æ˜ç¤ºä¾‹çš„å†…å®¹ï¼›&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;riot.mount(&amp;#39;demo&amp;#39;, {})&lt;/code&gt; æ¥åˆå§‹åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="c"&gt;&amp;lt;!-- modules/city-map/city-map.demo.html: --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;city-map demos&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;demo&lt;/span&gt; &lt;span class="na"&gt;aria-label=&lt;/span&gt;&lt;span class="s"&gt;"City map of London"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;city-map&lt;/span&gt; &lt;span class="na"&gt;location=&lt;/span&gt;&lt;span class="s"&gt;"London"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;    
    &lt;span class="nt"&gt;&amp;lt;/demo&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;demo&lt;/span&gt; &lt;span class="na"&gt;aria-label=&lt;/span&gt;&lt;span class="s"&gt;"City map of Paris"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;city-map&lt;/span&gt; &lt;span class="na"&gt;location=&lt;/span&gt;&lt;span class="s"&gt;"Paris"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;    
    &lt;span class="nt"&gt;&amp;lt;/demo&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;link&lt;/span&gt; &lt;span class="na"&gt;rel=&lt;/span&gt;&lt;span class="s"&gt;"stylesheet"&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;"./city-map.css"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;script &lt;/span&gt;&lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;"path/to/riot+compiler.min.js"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;script &lt;/span&gt;&lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;"riot/tag"&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;"./city-map.tag.html"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
        &lt;span class="nx"&gt;riot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;tag&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'demo'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'&amp;lt;yield/&amp;gt;'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;riot&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;mount&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'demo'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{});&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;style&amp;gt;&lt;/span&gt;
        &lt;span class="c"&gt;/* add a grey bar with the `aria-label` as demo title */&lt;/span&gt;
        &lt;span class="nt"&gt;demo&lt;/span&gt;&lt;span class="nd"&gt;:before&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nl"&gt;content&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;"Demo: "&lt;/span&gt; &lt;span class="n"&gt;attr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aria-label&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="nl"&gt;display&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;block&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nl"&gt;background&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;#F3F5F5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nl"&gt;padding&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;.5em&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="nl"&gt;clear&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;both&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;æ£€æŸ¥æ¨¡å—æ–‡ä»¶çš„ä»£ç é£æ ¼&lt;/h4&gt;

&lt;p&gt;æ£€æŸ¥å·¥å…·å¯ä»¥æ”¹è¿›ä»£ç é£æ ¼çš„ä¸€è‡´æ€§å¹¶æ‰¾å‡ºè¯­æ³•é”™è¯¯ã€‚é€šè¿‡ä¸€äº›é¢å¤–çš„é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥ Riot.js æ¨¡å—çš„ä»£ç é£æ ¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ä¿è¯å¼€å‘è€…ä»¬æœ‰ä¸€è‡´çš„ä»£ç é£æ ¼ï¼›&lt;/li&gt;
&lt;li&gt;æå‰å‘ç°è¯­æ³•é”™è¯¯ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;å¦‚ä½•åšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ &lt;a href="http://eslint.org/"&gt;ESLint&lt;/a&gt; å’Œ &lt;a href="http://jshint.com/"&gt;JSHint&lt;/a&gt; æ¥æ£€æŸ¥ä»£ç é£æ ¼ã€‚&lt;/p&gt;

&lt;h4&gt;ç»™ä½ çš„é¡¹ç›®åŠ ä¸Š &lt;code&gt;RiotJS Style Guide&lt;/code&gt; æ ‡è¯†&lt;/h4&gt;

&lt;p&gt;ç»™é¡¹ç›®åŠ ä¸Šæ ‡è¯†ï¼Œå¹¶é“¾æ¥åˆ°æœ¬æŒ‡å—ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href="https://github.com/voorhoede/riotjs-style-guide"&gt;&lt;img src="https://cdn.rawgit.com/voorhoede/riotjs-style-guide/master/riotjs-style-guide.svg" alt="RiotJS Style Guide badge" /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è®©å…¶ä»–å¼€å‘äººå‘˜çŸ¥é“å’Œäº†è§£æœ¬æŒ‡å—ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ€ä¹ˆåšï¼Ÿ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ markdown æ–‡ä»¶ä¸­å¼•å…¥ï¼š&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;[![RiotJS Style Guide badge](https://cdn.rawgit.com/voorhoede/riotjs-style-guide/master/riotjs-style-guide.svg)](https://github.com/voorhoede/riotjs-style-guide)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨ html æ–‡ä»¶ä¸­å¼•å…¥ï¼š&lt;/p&gt;
&lt;pre class="highlight html"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;"https://github.com/voorhoede/riotjs-style-guide"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;alt=&lt;/span&gt;&lt;span class="s"&gt;"RiotJS Style Guide badge"&lt;/span&gt;
         &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;"https://cdn.rawgit.com/voorhoede/riotjs-style-guide/master/riotjs-style-guide.svg"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;</content>
  </entry>
  <entry>
    <title>WebViewÂ·å¼€è½¦æŒ‡å—</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-08-31.html"/>
    <id>https://jiandanxinli.github.io/2016-08-31.html</id>
    <published>2016-08-31T08:00:00+08:00</published>
    <updated>2016-08-31T11:50:41+08:00</updated>
    <author>
      <name>BugDev</name>
    </author>
    <content type="html">&lt;p&gt;&lt;strong&gt;Tips&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ç”±äºWebViewçš„ç”¨æ³•å®åœ¨å¤ªå¤šï¼Œå¦‚æœæ‚¨åªæ˜¯æƒ³æŸ¥è¯¢æŸä¸ªåŠŸèƒ½çš„ä½¿ç”¨â€”â€”å»ºè®®Ctrl+Fï¼ˆCommad+Fï¼‰åœ¨æœ¬é¡µé¢æœç´¢å…³é”®å­—æŸ¥æ‰¾ã€‚&lt;br&gt;&lt;/li&gt;
&lt;li&gt;æ–‡ç« ç»™å‰åŠéƒ¨åˆ†å¤§å¤šæ˜¯æ–¹æ³•çš„ä»‹ç»ï¼Œè‹¥å«Œçç¢å¯ç›´æ¥æ‹–åˆ°æœ€åçœ‹ä»£ç æ¼”ç¤ºã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;Thanks for reading~ï¼&lt;/strong&gt;Ù©(â™¡Îµâ™¡ )Û¶&lt;/p&gt;

&lt;h3&gt;å‰è¨€&lt;/h3&gt;

&lt;p&gt;å–é…’ä¸å¼€è½¦ï¼Œå¼€è½¦ä¸å–é…’ã€‚&lt;/p&gt;

&lt;h3&gt;ç›®å½•&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;WebViewç®€ä»‹&lt;/li&gt;
&lt;li&gt;WebViewåŸºæœ¬ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;WebViewå¸¸ç”¨æ–¹æ³•&lt;/li&gt;
&lt;li&gt;WebSettings&lt;/li&gt;
&lt;li&gt;WebViewClient&lt;/li&gt;
&lt;li&gt;WebChromeClient&lt;/li&gt;
&lt;li&gt;JavaScriptä¸WebViewäº¤äº’&lt;/li&gt;
&lt;li&gt;WebViewåŠ è½½ä¼˜åŒ–&lt;/li&gt;
&lt;li&gt;é©¾ç…§è€ƒè¯•&lt;/li&gt;
&lt;li&gt;ä¸Šè·¯&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;WebViewç®€ä»‹&lt;/h3&gt;

&lt;p&gt;ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…å®ç°åœ¨appå†…å±•ç¤ºç½‘é¡µå¹¶ä¸ç½‘é¡µäº¤äº’çš„éœ€æ±‚ï¼ŒAndroid SDKæä¾›äº†WebViewç»„ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;å®ƒç»§æ‰¿è‡ªAbsoluteLayoutï¼Œå±•ç¤ºç½‘é¡µçš„åŒæ—¶ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä¸­æ”¾å…¥å…¶ä»–çš„å­Viewã€‚&lt;/p&gt;

&lt;p&gt;ç°å¦‚ä»Šï¼ŒHybridåº”ç”¨ä¼¼ä¹å æ®çš„APPçš„ä¸»æµç±»å‹ï¼Œé‚£ä¹ˆå…³äºWebViewçš„ä½¿ç”¨å°±å˜å¾—è¶Šå‘çš„é‡è¦ã€‚&lt;/p&gt;

&lt;p&gt;ä»Android 4.4ï¼ˆKitKatï¼‰å¼€å§‹ï¼ŒåŸæœ¬åŸºäºWebKitçš„WebViewå¼€å§‹åŸºäºChromiumå†…æ ¸ï¼Œè¿™ä¸€æ”¹åŠ¨å¤§å¤§æå‡äº†WebViewç»„ä»¶çš„æ€§èƒ½ä»¥åŠå¯¹HTML5,CSS3,JavaScriptçš„æ”¯æŒã€‚ä¸è¿‡å®ƒçš„APIå´æ²¡æœ‰å¾ˆå¤§çš„æ”¹åŠ¨ï¼Œåœ¨å…¼å®¹ä½ç‰ˆæœ¬çš„åŒæ—¶åªå¼•è¿›äº†å°‘éƒ¨åˆ†æ–°çš„APIï¼Œå¹¶ä¸éœ€è¦ä½ åšå¾ˆå¤§çš„æ”¹åŠ¨ã€‚&lt;/p&gt;

&lt;p&gt;ä¸è¿‡æœ‰å‡ ç‚¹æ”¹å˜éœ€è¦æ³¨æ„ï¼Œä½†æˆ‘å°è¯•ç€ç¿»è¯‘äº†ä¸‹ï¼Œå‘ç°è¿˜æ˜¯è‹±æ–‡åŸæ–‡è¯´å¾—å¥½ï¼Œæ‰€ä»¥æˆ‘è´´é“¾æ¥å§~~~&lt;/p&gt;

&lt;p&gt;&lt;a href="https://developer.android.com/guide/webapps/migrating.html"&gt;Migrating to WebView in Android 4.4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;åœ¨WebViewä¸­ï¼Œæœ‰å‡ ä¸ªåœ°æ–¹æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¥å®šåˆ¶æˆ‘ä»¬çš„WebViewå„ç§è¡Œä¸ºçš„ï¼Œåˆ†åˆ«æ˜¯ï¼š&lt;strong&gt;WebSettings&lt;/strong&gt;ã€&lt;strong&gt;JavaScriptInterface&lt;/strong&gt;ã€&lt;strong&gt;WebViewClient&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;WebChromeClient&lt;/strong&gt;ã€‚è¿™äº›æˆ‘éƒ½ä¼šåœ¨æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­ä¸€ä¸€ä»‹ç»ã€‚&lt;/p&gt;

&lt;h3&gt;WebViewåŸºæœ¬ä½¿ç”¨&lt;/h3&gt;

&lt;p&gt;ä¸‹é¢ç®€å•ä»‹ç»ä¸‹WebViewçš„åŸºæœ¬ä½¿ç”¨ï¼š&lt;/p&gt;

&lt;p&gt;é¦–å…ˆæ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œåœ¨layoutæ–‡ä»¶é‡Œæ”¾å…¥ä¸€ä¸ªWebViewæ§ä»¶ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡Javaä»£ç åŠ¨æ€æ”¾å…¥ï¼Œè¿™é‡Œä¸æ¼”ç¤ºäº†ï¼‰&lt;/p&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;?xml version="1.0" encoding="utf-8"?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;LinearLayout&lt;/span&gt; &lt;span class="na"&gt;xmlns:android=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res/android"&lt;/span&gt;
    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;WebView&lt;/span&gt;
        &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/web_view"&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/LinearLayout&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç„¶ååœ¨Activityçš„onCreateæ–¹æ³•é‡Œå†™å…¥å¦‚ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;"https://www.google.com"&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;WebView&lt;/span&gt; &lt;span class="n"&gt;webView&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebView&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;web_view&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;loadUrl&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¥ç€åœ¨AndroidManifestå£°æ˜è®¿é—®ç½‘ç»œçš„æƒé™ï¼š&lt;/p&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;uses-permission&lt;/span&gt; &lt;span class="na"&gt;android:name=&lt;/span&gt;&lt;span class="s"&gt;"android.permission.INTERNET"&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å°±ï¼Œå®Œäº‹äº†~&lt;/p&gt;

&lt;p&gt;è¿™æ—¶è¿è¡Œappï¼Œå®ƒå·²ç»å¯ä»¥è®¿é—®æŒ‡å®šåœ°å€çš„ç½‘é¡µäº†ã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šé¢æåˆ°äº†WebViewç»§æ‰¿è‡ªAbsoluteLayoutï¼Œå¯ä»¥åœ¨å…¶ä¸­æ”¾å…¥ä¸€äº›å­Viewï¼Œé‚£ä¹Ÿé¡ºæ‰‹æ¥ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;Layoutæ–‡ä»¶æ”¹ä¸ºï¼š&lt;/p&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;?xml version="1.0" encoding="utf-8"?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;LinearLayout&lt;/span&gt; &lt;span class="na"&gt;xmlns:android=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res/android"&lt;/span&gt;
  &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
  &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

  &lt;span class="nt"&gt;&amp;lt;WebView&lt;/span&gt;
      &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/web_view"&lt;/span&gt;
      &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
      &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

      &lt;span class="nt"&gt;&amp;lt;Button&lt;/span&gt;
          &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/button"&lt;/span&gt;
          &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
          &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;
          &lt;span class="na"&gt;android:layout_x=&lt;/span&gt;&lt;span class="s"&gt;"170dp"&lt;/span&gt;
          &lt;span class="na"&gt;android:layout_y=&lt;/span&gt;&lt;span class="s"&gt;"400dp"&lt;/span&gt;
          &lt;span class="na"&gt;android:background=&lt;/span&gt;&lt;span class="s"&gt;"@color/colorAccent"&lt;/span&gt;
          &lt;span class="na"&gt;android:text=&lt;/span&gt;&lt;span class="s"&gt;"@string/app_name"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/WebView&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/LinearLayout&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Activityçš„onCreateé‡ŒåŠ ä¸Šï¼š&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="n"&gt;Button&lt;/span&gt; &lt;span class="n"&gt;button&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;button&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;button&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOnClickListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;View&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;OnClickListener&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onClick&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;View&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;makeText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getApplicationContext&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="s"&gt;"ç³»å¥½å®‰å…¨å¸¦!"&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LENGTH_SHORT&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ—¶ï¼Œè¿è¡Œappï¼Œé‡Œé¢å°±ä¼šå¤šå‡ºä¸€ä¸ªButton~ ä½†å¦‚æœä½ çœŸçš„è¿è¡Œçš„è¯ï¼Œä½ å°±ä¼šå‘ç°ï¼Œappä¼šè‡ªåŠ¨è·³åˆ°æµè§ˆå™¨å¹¶æ‰“å¼€æŒ‡å®šçš„ç½‘é¡µï¼Œè€Œå¹¶éåœ¨appå†…å±•ç¤ºç½‘é¡µï¼Œé‚£è¿™å°±ä¸æˆ‘ä»¬çš„åˆè¡·èƒŒé“è€Œé©°äº†ï¼Œé‚£ä¹ˆè¦å¦‚ä½•å®ç°ç½‘é¡µåœ¨Appå†…æ‰“å¼€å‘¢?è¿™å°±å¼•å‡ºäº†ä¸‹é¢çš„ç« èŠ‚ä¼šæåˆ°çš„ä¸œè¥¿ï¼šWebViewClientã€‚æˆ‘å…ˆå°†ä»£ç è´´å‡ºï¼Œå…·ä½“å®ç°åŸç†ç•™åˆ°ä¸‹èŠ‚è¯´æ˜ã€‚&lt;/p&gt;

&lt;p&gt;æœ€ç»ˆXMLå¸ƒå±€å°±å¦‚ä¸Šé¢é‚£æ ·ï¼ŒJavaä»£ç ï¼ˆæœ€ç»ˆï¼‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MainActivity&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;AppCompatActivity&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onCreate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Bundle&lt;/span&gt; &lt;span class="n"&gt;savedInstanceState&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onCreate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;savedInstanceState&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;setContentView&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;layout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;activity_main&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;"https://www.google.com"&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;WebView&lt;/span&gt; &lt;span class="n"&gt;webView&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebView&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;web_view&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;loadUrl&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setWebViewClient&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;WebViewClient&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="nd"&gt;@Override&lt;/span&gt;
            &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;shouldOverrideUrlLoading&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebView&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;WebResourceRequest&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;loadUrl&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
                &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;});&lt;/span&gt;

        &lt;span class="n"&gt;Button&lt;/span&gt; &lt;span class="n"&gt;button&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;button&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;button&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOnClickListener&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;View&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;OnClickListener&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="nd"&gt;@Override&lt;/span&gt;
            &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onClick&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;View&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;makeText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getApplicationContext&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="s"&gt;"ç³»å¥½å®‰å…¨å¸¦!"&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LENGTH_SHORT&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;});&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ•ˆæœå›¾ï¼š&lt;a href="http://www.iqiyi.com/w_19rsx20xst.html"&gt;æ•ˆæœè§†é¢‘&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;WebViewç®€ä»‹&lt;/h3&gt;

&lt;p&gt;æ¥ä¸‹æ¥å†ä»‹ç»ä¸€äº›WebViewçš„å¸¸ç”¨æ–¹æ³•ï¼Œå…·ä½“æ¼”ç¤ºä¼šåœ¨åé¢ç« èŠ‚çš„ä»£ç é‡Œç»Ÿä¸€å±•ç¤ºã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;String getUrl&lt;/strong&gt;()ï¼šè·å–å½“å‰é¡µé¢çš„URLã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;reload&lt;/strong&gt;()ï¼šé‡æ–°reloadå½“å‰çš„URLï¼Œå³åˆ·æ–°ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;boolean canGoBack&lt;/strong&gt;()ï¼šç”¨æ¥ç¡®è®¤WebViewé‡Œæ˜¯å¦è¿˜æœ‰å¯å›é€€çš„å†å²è®°å½•ã€‚é€šå¸¸æˆ‘ä»¬ä¼šåœ¨WebViewé‡Œé‡å†™è¿”å›é”®çš„ç‚¹å‡»äº‹ä»¶ï¼Œé€šè¿‡è¯¥æ–¹æ³•åˆ¤æ–­WebViewé‡Œæ˜¯å¦è¿˜æœ‰å†å²è®°å½•ï¼Œè‹¥æœ‰åˆ™è¿”å›ä¸Šä¸€é¡µã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;boolean canGoForward&lt;/strong&gt;()ï¼šç”¨æ¥ç¡®è®¤WebViewæ˜¯å¦è¿˜æœ‰å¯å‘å‰çš„å†å²è®°å½•ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;boolean canGoBackOrForward&lt;/strong&gt;(int steps)ï¼šä»¥å½“å‰çš„é¡µé¢ä¸ºèµ·å§‹ç‚¹ï¼Œç”¨æ¥ç¡®è®¤WebViewçš„å†å²è®°å½•æ˜¯å¦è¶³ä»¥åé€€æˆ–å‰è¿›ç»™å®šçš„æ­¥æ•°ï¼Œæ­£æ•°ä¸ºå‰è¿›ï¼Œè´Ÿæ•°ä¸ºåé€€ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;goBack&lt;/strong&gt;()ï¼šåœ¨WebViewå†å²è®°å½•åé€€åˆ°ä¸Šä¸€é¡¹ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;goForward&lt;/strong&gt;()ï¼šåœ¨WebViewå†å²è®°å½•é‡Œå‰è¿›åˆ°ä¸‹ä¸€é¡¹ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;goBackOrForward&lt;/strong&gt;(int steps)ï¼šä»¥å½“å‰é¡µé¢ä¸ºèµ·å§‹ç‚¹ï¼Œå‰è¿›æˆ–åé€€å†å²è®°å½•ä¸­æŒ‡å®šçš„æ­¥æ•°ï¼Œæ­£æ•°ä¸ºå‰è¿›ï¼Œè´Ÿæ•°ä¸ºåé€€ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;clearCache&lt;/strong&gt;(boolean includeDiskFiles)ï¼šæ¸…ç©ºç½‘é¡µè®¿é—®ç•™ä¸‹çš„ç¼“å­˜æ•°æ®ã€‚éœ€è¦æ³¨æ„çš„æ—¶ï¼Œç”±äºç¼“å­˜æ˜¯å…¨å±€çš„ï¼Œæ‰€ä»¥åªè¦æ˜¯WebViewç”¨åˆ°çš„ç¼“å­˜éƒ½ä¼šè¢«æ¸…ç©ºï¼Œå³ä¾¿å…¶ä»–åœ°æ–¹ä¹Ÿä¼šä½¿ç”¨åˆ°ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä»å‘½åå³å¯çœ‹å‡ºä½œç”¨ã€‚è‹¥è®¾ä¸ºfalseï¼Œåˆ™åªæ¸…ç©ºå†…å­˜é‡Œçš„èµ„æºç¼“å­˜ï¼Œè€Œä¸æ¸…ç©ºç£ç›˜é‡Œçš„ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;clearHistory&lt;/strong&gt;()ï¼šæ¸…é™¤å½“å‰webviewè®¿é—®çš„å†å²è®°å½•ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;clearFormData&lt;/strong&gt;()ï¼šæ¸…é™¤è‡ªåŠ¨å®Œæˆå¡«å……çš„è¡¨å•æ•°æ®ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥æ–¹æ³•ä»…ä»…æ¸…é™¤&lt;strong&gt;å½“å‰è¡¨å•åŸŸè‡ªåŠ¨å®Œæˆå¡«å……çš„è¡¨å•æ•°æ®&lt;/strong&gt;ï¼Œå¹¶ä¸ä¼šæ¸…é™¤WebViewå­˜å‚¨åˆ°æœ¬åœ°çš„æ•°æ®ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onPause&lt;/strong&gt;()ï¼šå½“é¡µé¢è¢«å¤±å»ç„¦ç‚¹è¢«åˆ‡æ¢åˆ°åå°ä¸å¯è§çŠ¶æ€ï¼Œéœ€è¦æ‰§è¡ŒonPauseæ“ä½œï¼Œè¯¥æ“ä½œä¼šé€šçŸ¥å†…æ ¸å®‰å…¨åœ°æš‚åœæ‰€æœ‰åŠ¨ä½œï¼Œæ¯”å¦‚åŠ¨ç”»çš„æ‰§è¡Œæˆ–å®šä½çš„è·å–ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¯¥æ–¹æ³•å¹¶ä¸ä¼šæš‚åœJavaScriptçš„æ‰§è¡Œï¼Œè‹¥è¦æš‚åœJavaScriptçš„æ‰§è¡Œè¯·ä½¿ç”¨æ¥ä¸‹æ¥çš„è¿™ä¸ªæ–¹æ³•ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onResume&lt;/strong&gt;()ï¼šåœ¨å…ˆå‰è°ƒç”¨&lt;strong&gt;&lt;em&gt;onPause()&lt;/em&gt;&lt;/strong&gt;åï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨è¯¥æ–¹æ³•æ¥æ¢å¤WebViewçš„è¿è¡Œã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;pauseTimers&lt;/strong&gt;()ï¼šè¯¥æ–¹æ³•é¢å‘å…¨å±€æ•´ä¸ªåº”ç”¨ç¨‹åºçš„webviewï¼Œå®ƒä¼šæš‚åœæ‰€æœ‰webviewçš„layoutï¼Œparsingï¼ŒJavaScript Timerã€‚å½“ç¨‹åºè¿›å…¥åå°æ—¶ï¼Œè¯¥æ–¹æ³•çš„è°ƒç”¨å¯ä»¥é™ä½CPUåŠŸè€—ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;resumeTimers&lt;/strong&gt;()ï¼šæ¢å¤pauseTimersæ—¶çš„æ‰€æœ‰æ“ä½œã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;destroy&lt;/strong&gt;()ï¼šé”€æ¯WebViewã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨åº”åœ¨WebViewä»çˆ¶å®¹å™¨ä¸­è¢«removeæ‰ä¹‹åã€‚æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨åœ°è°ƒç”¨&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="n"&gt;rootLayout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;removeView&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;destroy&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;getScrollY&lt;/strong&gt;()ï¼šè¯¥æ–¹æ³•è¿”å›çš„å½“å‰å¯è§åŒºåŸŸçš„é¡¶ç«¯è·æ•´ä¸ªé¡µé¢é¡¶ç«¯çš„è·ç¦»ï¼Œä¹Ÿå°±æ˜¯å½“å‰å†…å®¹æ»šåŠ¨çš„è·ç¦»ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;getHeight&lt;/strong&gt;()ï¼šæ–¹æ³•éƒ½è¿”å›å½“å‰WebViewè¿™ä¸ªå®¹å™¨çš„é«˜åº¦ã€‚å…¶å®ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•éƒ½å±äºViewã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;getContentHeight&lt;/strong&gt;()ï¼šè¯¥æ–¹æ³•è¿”å›æ•´ä¸ªHTMLé¡µé¢çš„é«˜åº¦ï¼Œä½†è¯¥é«˜åº¦å€¼å¹¶ä¸ç­‰åŒäºå½“å‰æ•´ä¸ªé¡µé¢çš„é«˜åº¦ï¼Œå› ä¸ºWebViewæœ‰ç¼©æ”¾åŠŸèƒ½ï¼Œ æ‰€ä»¥å½“å‰æ•´ä¸ªé¡µé¢çš„é«˜åº¦å®é™…ä¸Šåº”è¯¥æ˜¯åŸå§‹HTMLçš„é«˜åº¦å†ä¹˜ä¸Šç¼©æ”¾æ¯”ä¾‹ã€‚å› æ­¤ï¼Œå‡†ç¡®çš„åˆ¤æ–­æ–¹æ³•åº”è¯¥æ˜¯&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getContentHeight&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getScale&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getHeight&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getScrollY&lt;/span&gt;&lt;span class="o"&gt;()))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;//å·²ç»å¤„äºåº•ç«¯&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getScrollY&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;){&lt;/span&gt;
    &lt;span class="c1"&gt;//å¤„äºé¡¶ç«¯&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;pageUp&lt;/strong&gt;(boolean top)ï¼šå°†WebViewå±•ç¤ºçš„é¡µé¢æ»‘åŠ¨è‡³é¡¶éƒ¨ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;pageDown&lt;/strong&gt;(boolean bottom)ï¼šå°†WebViewå±•ç¤ºçš„é¡µé¢æ»‘åŠ¨è‡³åº•éƒ¨ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;WebSettings&lt;/h3&gt;

&lt;p&gt;WebSettingsæ˜¯ç”¨æ¥ç®¡ç†WebViewé…ç½®çš„ç±»ã€‚å½“WebViewç¬¬ä¸€æ¬¡åˆ›å»ºæ—¶ï¼Œå†…éƒ¨ä¼šåŒ…å«ä¸€ä¸ªé»˜è®¤é…ç½®çš„é›†åˆã€‚è‹¥æˆ‘ä»¬æƒ³æ›´æ”¹è¿™äº›é…ç½®ï¼Œä¾¿å¯ä»¥é€šè¿‡WebSettingsé‡Œçš„æ–¹æ³•æ¥è¿›è¡Œè®¾ç½®ã€‚&lt;/p&gt;

&lt;p&gt;WebSettingså¯¹è±¡å¯ä»¥é€šè¿‡&lt;strong&gt;&lt;em&gt;WebView.getSettings()&lt;/em&gt;&lt;/strong&gt;è·å¾—ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸å®ƒçš„WebViewæœ¬èº«æ¯æ¯ç›¸å…³çš„ï¼Œå¦‚æœWebViewè¢«é”€æ¯äº†ï¼Œé‚£ä¹ˆä»»ä½•ç”±WebSettingsè°ƒç”¨çš„æ–¹æ³•ä¹ŸåŒæ ·ä¸èƒ½ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;h3&gt;è·å–WebSettingså¯¹è±¡&lt;/h3&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;  &lt;span class="n"&gt;WebSettings&lt;/span&gt; &lt;span class="n"&gt;webSettings&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getSettings&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;WebSettingså¸¸ç”¨æ–¹æ³•&lt;/h3&gt;

&lt;p&gt;ï¼ˆå‡ ä¹æ‰€æœ‰çš„setæ–¹æ³•éƒ½æœ‰ç›¸åº”çš„getæ–¹æ³•ï¼Œè¿™é‡Œå°±åªä»‹ç»setäº†ã€‚&lt;strong&gt;å¦ï¼Œæ‰€æœ‰æœªå†™æ–¹æ³•è¿”å›å€¼ç±»å‹çš„çš†ä¸ºç©ºç±»å‹&lt;/strong&gt;ï¼‰&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setJavaScriptEnabled&lt;/strong&gt;(boolean flag)ï¼šè®¾ç½®WebViewæ˜¯å¦å¯ä»¥è¿è¡ŒJavaScriptã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setJavaScriptCanOpenWindowsAutomatically&lt;/strong&gt;(boolean flag)ï¼šè®¾ç½®WebViewæ˜¯å¦å¯ä»¥ç”±JavaScriptè‡ªåŠ¨æ‰“å¼€çª—å£ï¼Œé»˜è®¤ä¸ºfalseï¼Œé€šå¸¸ä¸JavaScriptçš„&lt;strong&gt;&lt;em&gt;window.open()&lt;/em&gt;&lt;/strong&gt;é…åˆä½¿ç”¨ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setAllowFileAccess&lt;/strong&gt;(boolean allow)ï¼šå¯ç”¨æˆ–ç¦ç”¨WebViewè®¿é—®æ–‡ä»¶æ•°æ®ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setBlockNetworkImage&lt;/strong&gt;(boolean flag)ï¼šç¦æ­¢æˆ–å…è®¸WebViewä»ç½‘ç»œä¸ŠåŠ è½½å›¾ç‰‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè®¾ç½®æ˜¯ä»ç¦æ­¢åˆ°å…è®¸çš„è½¬å˜çš„è¯ï¼Œå›¾ç‰‡æ•°æ®å¹¶ä¸ä¼šåœ¨è®¾ç½®æ”¹å˜åç«‹åˆ»å»è·å–ï¼Œè€Œæ˜¯åœ¨WebViewè°ƒç”¨reload()çš„æ—¶å€™æ‰ä¼šç”Ÿæ•ˆã€‚&lt;br&gt;è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦ç¡®ä¿è¿™ä¸ªappæ‹¥æœ‰è®¿é—®Internetçš„æƒé™ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå®‰å…¨å¼‚å¸¸ã€‚&lt;br&gt;é€šå¸¸æ²¡æœ‰ç¦æ­¢å›¾ç‰‡åŠ è½½çš„éœ€æ±‚çš„æ—¶å€™ï¼Œå®Œå…¨ä¸ç”¨ç®¡è¿™ä¸ªæ–¹æ³•ï¼Œå› ä¸ºå½“æˆ‘ä»¬çš„appæ‹¥æœ‰è®¿é—®Internetçš„æƒé™æ—¶ï¼Œè¿™ä¸ªflagçš„é»˜è®¤å€¼å°±æ˜¯falseã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setSupportZoom&lt;/strong&gt;(boolean support)ï¼šè®¾ç½®æ˜¯å¦æ”¯æŒç¼©æ”¾ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setBuiltInZoomControls&lt;/strong&gt;(boolean enabled)ï¼šæ˜¾ç¤ºæˆ–ä¸æ˜¾ç¤ºç¼©æ”¾æŒ‰é’®ï¼ˆwapç½‘é¡µä¸æ”¯æŒï¼‰ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setSupportMultipleWindows&lt;/strong&gt;(boolean support)ï¼šè®¾ç½®WebViewæ˜¯å¦æ”¯æŒå¤šçª—å£ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setLayoutAlgorithm&lt;/strong&gt;(WebSettings.LayoutAlgorithm l)ï¼šæŒ‡å®šWebViewçš„é¡µé¢å¸ƒå±€æ˜¾ç¤ºå½¢å¼ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ä¼šå¼•èµ·é¡µé¢é‡ç»˜ã€‚é»˜è®¤å€¼ä¸ºLayoutAlgorithm#NARROW_COLUMNSã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setNeedInitialFocus(boolean flag)&lt;/strong&gt;ï¼šé€šçŸ¥WebViewæ˜¯å¦éœ€è¦è®¾ç½®ä¸€ä¸ªèŠ‚ç‚¹è·å–ç„¦ç‚¹å½“WebView#requestFocus(int,android.graphics.Rect)è¢«è°ƒç”¨æ—¶ï¼Œé»˜è®¤ä¸ºtrueã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setAppCacheEnabled(boolean flag)&lt;/strong&gt;ï¼šå¯ç”¨æˆ–ç¦ç”¨åº”ç”¨ç¼“å­˜ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setAppCachePath(String appCachePath)&lt;/strong&gt;ï¼šè®¾ç½®åº”ç”¨ç¼“å­˜è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„å¿…é¡»æ˜¯å¯ä»¥è®©appå†™å…¥æ–‡ä»¶çš„ã€‚è¯¥æ–¹æ³•åº”è¯¥åªè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œé‡å¤è°ƒç”¨ä¼šè¢«æ— è§†~&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setCacheMode(int mode)&lt;/strong&gt;ï¼š&lt;strong&gt;ç”¨æ¥è®¾ç½®WebViewçš„ç¼“å­˜æ¨¡å¼ã€‚&lt;/strong&gt;å½“æˆ‘ä»¬åŠ è½½é¡µé¢æˆ–ä»ä¸Šä¸€ä¸ªé¡µé¢è¿”å›çš„æ—¶å€™ï¼Œä¼šæŒ‰ç…§è®¾ç½®çš„ç¼“å­˜æ¨¡å¼å»æ£€æŸ¥å¹¶ä½¿ç”¨ï¼ˆæˆ–ä¸ä½¿ç”¨ï¼‰ç¼“å­˜ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç¼“å­˜æ¨¡å¼æœ‰å››ç§ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;LOAD_DEFAULT&lt;/strong&gt;ï¼šé»˜è®¤çš„ç¼“å­˜ä½¿ç”¨æ¨¡å¼ã€‚åœ¨è¿›è¡Œé¡µé¢å‰è¿›æˆ–åé€€çš„æ“ä½œæ—¶ï¼Œå¦‚æœç¼“å­˜å¯ç”¨å¹¶æœªè¿‡æœŸå°±ä¼˜å…ˆåŠ è½½ç¼“å­˜ï¼Œå¦åˆ™ä»ç½‘ç»œä¸ŠåŠ è½½æ•°æ®ã€‚è¿™æ ·å¯ä»¥å‡å°‘é¡µé¢çš„ç½‘ç»œè¯·æ±‚æ¬¡æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LOAD_CACHE_ELSE_NETWORK&lt;/strong&gt;ï¼šåªè¦ç¼“å­˜å¯ç”¨å°±åŠ è½½ç¼“å­˜ï¼Œå“ªæ€•å®ƒä»¬å·²ç»è¿‡æœŸå¤±æ•ˆã€‚å¦‚æœç¼“å­˜ä¸å¯ç”¨å°±ä»ç½‘ç»œä¸ŠåŠ è½½æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LOAD_NO_CACHE&lt;/strong&gt;ï¼šä¸åŠ è½½ç¼“å­˜ï¼Œåªä»ç½‘ç»œåŠ è½½æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LOAD_CACHE_ONLY&lt;/strong&gt;ï¼šä¸ä»ç½‘ç»œåŠ è½½æ•°æ®ï¼Œåªä»ç¼“å­˜åŠ è½½æ•°æ®ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;é€šå¸¸æˆ‘ä»¬å¯ä»¥æ ¹æ®ç½‘ç»œæƒ…å†µå°†è¿™å‡ ç§æ¨¡å¼ç»“åˆä½¿ç”¨ï¼Œæ¯”å¦‚æœ‰ç½‘çš„æ—¶å€™ä½¿ç”¨LOAD_DEFAULTï¼Œç¦»çº¿æ—¶ä½¿ç”¨LOAD_CACHE_ONLYã€LOAD_CACHE_ELSE_NETWORKï¼Œè®©ç”¨æˆ·ä¸è‡³äºåœ¨ç¦»çº¿æ—¶å•¥éƒ½çœ‹ä¸åˆ°ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setDatabaseEnabled(boolean flag)&lt;/strong&gt;ï¼šå¯ç”¨æˆ–ç¦ç”¨æ•°æ®åº“ç¼“å­˜ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setDomStorageEnabled(boolean flag)&lt;/strong&gt;ï¼šå¯ç”¨æˆ–ç¦ç”¨DOMç¼“å­˜ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setUserAgentString(String ua)&lt;/strong&gt;ï¼šè®¾ç½®WebViewçš„UserAgentå€¼ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setDefaultEncodingName(String encoding)&lt;/strong&gt;ï¼šè®¾ç½®ç¼–ç æ ¼å¼ï¼Œé€šå¸¸éƒ½è®¾ä¸ºâ€œUTF-8â€ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setStandardFontFamily(String font)&lt;/strong&gt;ï¼šè®¾ç½®æ ‡å‡†çš„å­—ä½“æ—ï¼Œé»˜è®¤â€œsans-serifâ€ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setCursiveFontFamily&lt;/strong&gt;ï¼šè®¾ç½®è‰ä¹¦å­—ä½“æ—ï¼Œé»˜è®¤â€œcursiveâ€ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setFantasyFontFamily&lt;/strong&gt;ï¼šè®¾ç½®CursiveFontå­—ä½“æ—ï¼Œé»˜è®¤â€œcursiveâ€ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setFixedFontFamily&lt;/strong&gt;ï¼šè®¾ç½®æ··åˆå­—ä½“æ—ï¼Œé»˜è®¤â€œmonospaceâ€ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setSansSerifFontFamily&lt;/strong&gt;ï¼šè®¾ç½®æ¢µæ–‡å­—ä½“æ—ï¼Œé»˜è®¤â€œsans-serifâ€ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setSerifFontFamily&lt;/strong&gt;ï¼šè®¾ç½®è¡¬çº¿å­—ä½“æ—ï¼Œé»˜è®¤â€œsans-serifâ€&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setDefaultFixedFontSize(int size)&lt;/strong&gt;ï¼šè®¾ç½®é»˜è®¤å¡«å……å­—ä½“å¤§å°ï¼Œé»˜è®¤16ï¼Œå–å€¼åŒºé—´ä¸º[1-72]ï¼Œè¶…è¿‡èŒƒå›´ï¼Œä½¿ç”¨å…¶ä¸Šé™å€¼ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setDefaultFontSize(int size)&lt;/strong&gt;ï¼šè®¾ç½®é»˜è®¤å­—ä½“å¤§å°ï¼Œé»˜è®¤16ï¼Œå–å€¼åŒºé—´[1-72]ï¼Œè¶…è¿‡èŒƒå›´ï¼Œä½¿ç”¨å…¶ä¸Šé™å€¼ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setMinimumFontSize&lt;/strong&gt;ï¼šè®¾ç½®æœ€å°å­—ä½“ï¼Œé»˜è®¤8. å–å€¼åŒºé—´[1-72]ï¼Œè¶…è¿‡èŒƒå›´ï¼Œä½¿ç”¨å…¶ä¸Šé™å€¼ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;setMinimumLogicalFontSize&lt;/strong&gt;ï¼šè®¾ç½®æœ€å°é€»è¾‘å­—ä½“ï¼Œé»˜è®¤8. å–å€¼åŒºé—´[1-72]ï¼Œè¶…è¿‡èŒƒå›´ï¼Œä½¿ç”¨å…¶ä¸Šé™å€¼ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä»¥ä¸Šå°±æ˜¯ä¸€äº›WebSettingsçš„å¸¸ç”¨æ–¹æ³•ï¼Œå…·ä½“çš„ä½¿ç”¨ä»¥åŠä¸€äº›ç¼“å­˜çš„é—®é¢˜ä¼šåœ¨æ¥ä¸‹æ¥çš„ä»£ç ä»¥åŠæ–‡ç« ä¸­æœ‰æ›´åŠ ç›´è§‚çš„è¯´æ˜ã€‚&lt;/p&gt;

&lt;h3&gt;WebViewClient&lt;/h3&gt;

&lt;p&gt;ä»åå­—ä¸Šä¸éš¾ç†è§£ï¼Œè¿™ä¸ªç±»å°±åƒWebViewçš„å§”æ‰˜äººä¸€æ ·ï¼Œæ˜¯å¸®åŠ©WebViewå¤„ç†å„ç§é€šçŸ¥å’Œè¯·æ±‚äº‹ä»¶çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä»–ä¸ºWebViewçš„â€œå†…æ”¿å¤§è‡£â€ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onLoadResource(WebView view, String url)&lt;/strong&gt;ï¼šè¯¥æ–¹æ³•åœ¨åŠ è½½é¡µé¢èµ„æºæ—¶ä¼šå›è°ƒï¼Œæ¯ä¸€ä¸ªèµ„æºï¼ˆæ¯”å¦‚å›¾ç‰‡ï¼‰çš„åŠ è½½éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onPageStarted(WebView view, String url, Bitmap favicon)&lt;/strong&gt;ï¼šè¯¥æ–¹æ³•åœ¨WebViewå¼€å§‹åŠ è½½é¡µé¢ä¸”ä»…åœ¨&lt;strong&gt;Main frame loading&lt;/strong&gt;ï¼ˆå³&lt;strong&gt;&lt;em&gt;æ•´é¡µåŠ è½½&lt;/em&gt;&lt;/strong&gt;ï¼‰æ—¶å›è°ƒï¼Œä¸€æ¬¡Main frameçš„åŠ è½½åªä¼šå›è°ƒè¯¥æ–¹æ³•ä¸€æ¬¡ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•é‡Œè®¾å®šå¼€å¯ä¸€ä¸ªåŠ è½½çš„åŠ¨ç”»ï¼Œå‘Šè¯‰ç”¨æˆ·ç¨‹åºåœ¨ç­‰å¾…ç½‘ç»œçš„å“åº”ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onPageFinished(WebView view, String url)&lt;/strong&gt;ï¼šè¯¥æ–¹æ³•åªåœ¨WebViewå®Œæˆä¸€ä¸ªé¡µé¢åŠ è½½æ—¶è°ƒç”¨ä¸€æ¬¡ï¼ˆåŒæ ·ä¹Ÿåªåœ¨&lt;strong&gt;Main frame loading&lt;/strong&gt;æ—¶è°ƒç”¨ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å¯ä»¥åœ¨æ­¤æ—¶å…³é—­åŠ è½½åŠ¨ç”»ï¼Œè¿›è¡Œå…¶ä»–æ“ä½œã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onReceivedError(WebView view, WebResourceRequest request, WebResourceError error)&lt;/strong&gt;ï¼šè¯¥æ–¹æ³•åœ¨webé¡µé¢åŠ è½½é”™è¯¯æ—¶å›è°ƒï¼Œè¿™äº›é”™è¯¯é€šå¸¸éƒ½æ˜¯ç”±æ— æ³•ä¸æœåŠ¡å™¨æ­£å¸¸è¿æ¥å¼•èµ·çš„ï¼Œæœ€å¸¸è§çš„å°±æ˜¯ç½‘ç»œé—®é¢˜ã€‚
è¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;1.è¿™ä¸ªæ–¹æ³•åªåœ¨ä¸æœåŠ¡å™¨æ— æ³•æ­£å¸¸è¿æ¥æ—¶è°ƒç”¨ï¼Œç±»ä¼¼äºæœåŠ¡å™¨è¿”å›é”™è¯¯ç çš„é‚£ç§é”™è¯¯ï¼ˆå³&lt;strong&gt;HTTP ERROR&lt;/strong&gt;ï¼‰ï¼Œè¯¥æ–¹æ³•æ˜¯ä¸ä¼šå›è°ƒçš„ï¼Œå› ä¸ºä½ å·²ç»å’ŒæœåŠ¡å™¨æ­£å¸¸è¿æ¥ä¸Šäº†ï¼ˆå…¨æ€ªå®˜æ–¹æ–‡æ¡£(ï¸¶^ï¸¶)ï¼‰ï¼›&lt;br&gt;
2.è¿™ä¸ªæ–¹æ³•æ˜¯æ–°ç‰ˆæœ¬çš„onReceivedError()æ–¹æ³•ï¼Œä»API23å¼€å§‹å¼•è¿›ï¼Œä¸æ—§æ–¹æ³•onReceivedError(WebView view,int errorCode,String description,String failingUrl)ä¸åŒçš„æ˜¯ï¼Œæ–°æ–¹æ³•åœ¨é¡µé¢å±€éƒ¨åŠ è½½å‘ç”Ÿé”™è¯¯æ—¶ä¹Ÿä¼šè¢«è°ƒç”¨ï¼ˆæ¯”å¦‚é¡µé¢é‡Œä¸¤ä¸ªå­Tabæˆ–è€…ä¸€å¼ å›¾ç‰‡ï¼‰ã€‚è¿™å°±æ„å‘³ç€è¯¥æ–¹æ³•çš„è°ƒç”¨é¢‘ç‡å¯èƒ½ä¼šæ›´åŠ é¢‘ç¹ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥åœ¨è¯¥æ–¹æ³•é‡Œæ‰§è¡Œå°½é‡å°‘çš„æ“ä½œã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onReceivedHttpError(WebView view, WebResourceRequest request, WebResourceResponse errorResponse)&lt;/strong&gt;ï¼šä¸Šä¸€ä¸ªæ–¹æ³•æåˆ°onReceivedErrorå¹¶ä¸ä¼šåœ¨æœåŠ¡å™¨è¿”å›é”™è¯¯ç æ—¶è¢«å›è°ƒï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬éœ€è¦æ•æ‰HTTP ERRORå¹¶è¿›è¡Œç›¸åº”æ“ä½œæ—¶åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ&lt;strong&gt;API23&lt;/strong&gt;ä¾¿å¼•å…¥äº†è¯¥æ–¹æ³•ã€‚å½“æœåŠ¡å™¨è¿”å›ä¸€ä¸ªHTTP ERRORå¹¶ä¸”å®ƒçš„status code&amp;gt;=400æ—¶ï¼Œè¯¥æ–¹æ³•ä¾¿ä¼šå›è°ƒã€‚è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨åŸŸå¹¶ä¸å±€é™äºMain Frameï¼Œä»»ä½•èµ„æºçš„åŠ è½½å¼•å‘HTTP ERRORéƒ½ä¼šå¼•èµ·è¯¥æ–¹æ³•çš„å›è°ƒï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿåº”è¯¥åœ¨è¯¥æ–¹æ³•é‡Œæ‰§è¡Œå°½é‡å°‘çš„æ“ä½œï¼Œåªè¿›è¡Œéå¸¸å¿…è¦çš„é”™è¯¯å¤„ç†ç­‰ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onReceivedSslError(WebView view, SslErrorHandler handler, SslError error)&lt;/strong&gt;ï¼šå½“WebViewåŠ è½½æŸä¸ªèµ„æºå¼•å‘SSLé”™è¯¯æ—¶ä¼šå›è°ƒè¯¥æ–¹æ³•ï¼Œè¿™æ—¶WebViewè¦ä¹ˆæ‰§è¡Œhandler.cancel()å–æ¶ˆåŠ è½½ï¼Œè¦ä¹ˆæ‰§è¡Œhandler.proceed()æ–¹æ³•ç»§ç»­åŠ è½½ï¼ˆé»˜è®¤ä¸ºcancelï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªå†³å®šå¯èƒ½ä¼šè¢«ä¿ç•™å¹¶åœ¨å°†æ¥å†æ¬¡é‡åˆ°SSLé”™è¯¯æ—¶æ‰§è¡ŒåŒæ ·çš„æ“ä½œã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;WebResourceResponse shouldInterceptRequest(WebView view, WebResourceRequest request)&lt;/strong&gt;ï¼šå½“WebViewéœ€è¦è¯·æ±‚æŸä¸ªæ•°æ®æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥æ‹¦æˆªè¯¥è¯·æ±‚æ¥å‘ŠçŸ¥appå¹¶ä¸”å…è®¸appæœ¬èº«è¿”å›ä¸€ä¸ªæ•°æ®æ¥æ›¿ä»£æˆ‘ä»¬åŸæœ¬è¦åŠ è½½çš„æ•°æ®ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¯”å¦‚ä½ å¯¹webçš„æŸä¸ªjsåšäº†æœ¬åœ°ç¼“å­˜ï¼Œå¸Œæœ›åœ¨åŠ è½½è¯¥jsæ—¶ä¸å†å»è¯·æ±‚æœåŠ¡å™¨è€Œæ˜¯å¯ä»¥ç›´æ¥è¯»å–æœ¬åœ°ç¼“å­˜çš„jsï¼Œè¿™ä¸ªæ–¹æ³•å°±å¯ä»¥å¸®åŠ©ä½ å®Œæˆè¿™ä¸ªéœ€æ±‚ã€‚ä½ å¯ä»¥å†™ä¸€äº›é€»è¾‘æ£€æµ‹è¿™ä¸ªrequestï¼Œå¹¶è¿”å›ç›¸åº”çš„æ•°æ®ï¼Œä½ è¿”å›çš„æ•°æ®å°±ä¼šè¢«WebViewä½¿ç”¨ï¼Œå¦‚æœä½ è¿”å›nullï¼ŒWebViewä¼šç»§ç»­å‘æœåŠ¡å™¨è¯·æ±‚ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request)&lt;/strong&gt;ï¼šå“ˆ~ ç»ˆäºåˆ°äº†è¿™ä¸ªæ–¹æ³•ï¼Œåœ¨æœ€å¼€å§‹çš„åŸºç¡€æ¼”ç¤ºæ—¶æˆ‘ä»¬ç”¨åˆ°äº†è¿™ä¸ªæ–¹æ³•ã€‚ä»å®è·µä¸­æˆ‘ä»¬çŸ¥é“ï¼Œå½“æˆ‘ä»¬æ²¡æœ‰ç»™WebViewæä¾›WebViewClientæ—¶ï¼ŒWebViewå¦‚æœè¦åŠ è½½ä¸€ä¸ªurlä¼šå‘ActivityManagerå¯»æ±‚ä¸€ä¸ªé€‚åˆçš„å¤„ç†è€…æ¥åŠ è½½è¯¥urlï¼ˆæ¯”å¦‚ç³»ç»Ÿè‡ªå¸¦çš„æµè§ˆå™¨ï¼‰ï¼Œè¿™é€šå¸¸æ˜¯æˆ‘ä»¬ä¸æƒ³çœ‹åˆ°çš„ã€‚äºæ˜¯æˆ‘ä»¬éœ€è¦ç»™WebViewæä¾›ä¸€ä¸ªWebViewClientï¼Œå¹¶é‡å†™è¯¥æ–¹æ³•è¿”å›trueæ¥å‘ŠçŸ¥WebView urlçš„åŠ è½½å°±åœ¨appä¸­è¿›è¡Œã€‚è¿™æ—¶ä¾¿å¯ä»¥å®ç°åœ¨appå†…è®¿é—®ç½‘é¡µã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onScaleChanged(WebView view, float oldScale, float newScale)&lt;/strong&gt;ï¼šå½“WebViewå¾—é¡µé¢Scaleå€¼å‘ç”Ÿæ”¹å˜æ—¶å›è°ƒã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;boolean shouldOverrideKeyEvent(WebView view, KeyEvent event)&lt;/strong&gt;ï¼šé»˜è®¤å€¼ä¸ºfalseï¼Œé‡å†™æ­¤æ–¹æ³•å¹¶return trueå¯ä»¥è®©æˆ‘ä»¬åœ¨WebViewå†…å¤„ç†æŒ‰é”®äº‹ä»¶ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;WebChromeClient&lt;/h3&gt;

&lt;p&gt;å¦‚æœè¯´WebViewClientæ˜¯å¸®åŠ©WebViewå¤„ç†å„ç§é€šçŸ¥ã€è¯·æ±‚äº‹ä»¶çš„â€œå†…æ”¿å¤§è‡£â€çš„è¯ï¼Œé‚£ä¹ˆWebChromeClientå°±æ˜¯è¾…åŠ©WebViewå¤„ç†Javascriptçš„å¯¹è¯æ¡†ï¼Œç½‘ç«™å›¾æ ‡ï¼Œç½‘ç«™titleï¼ŒåŠ è½½è¿›åº¦ç­‰åå¤–éƒ¨äº‹ä»¶çš„â€œå¤–äº¤å¤§è‡£â€ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onProgressChanged(WebView view, int newProgress)&lt;/strong&gt;ï¼šå½“é¡µé¢åŠ è½½çš„è¿›åº¦å‘ç”Ÿæ”¹å˜æ—¶å›è°ƒï¼Œç”¨æ¥å‘ŠçŸ¥ä¸»ç¨‹åºå½“å‰é¡µé¢çš„åŠ è½½è¿›åº¦ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onReceivedIcon(WebView view, Bitmap icon)&lt;/strong&gt;ï¼šç”¨æ¥æ¥æ”¶webé¡µé¢çš„iconï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œå°†è¯¥é¡µé¢çš„iconè®¾ç½®åˆ°Toolbarã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onReceivedTitle(WebView view, String title)&lt;/strong&gt;ï¼šç”¨æ¥æ¥æ”¶webé¡µé¢çš„titleï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œå°†é¡µé¢çš„titleè®¾ç½®åˆ°Toolbarã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•æ˜¯ä¸ºäº†æ”¯æŒwebé¡µé¢è¿›å…¥å…¨å±æ¨¡å¼è€Œå­˜åœ¨çš„ï¼ˆæ¯”å¦‚æ’­æ”¾è§†é¢‘ï¼‰ï¼Œå¦‚æœä¸å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œè¯¥webä¸Šçš„å†…å®¹ä¾¿ä¸èƒ½è¿›å…¥å…¨å±æ¨¡å¼ã€‚&lt;br&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onShowCustomView(View view, WebChromeClient.CustomViewCallback callback)&lt;/strong&gt;ï¼šè¯¥æ–¹æ³•åœ¨å½“å‰é¡µé¢è¿›å…¥å…¨å±æ¨¡å¼æ—¶å›è°ƒï¼Œä¸»ç¨‹åºå¿…é¡»æä¾›ä¸€ä¸ªåŒ…å«å½“å‰webå†…å®¹ï¼ˆè§†é¢‘ or Somethingï¼‰çš„è‡ªå®šä¹‰çš„Viewã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onHideCustomView()&lt;/strong&gt;ï¼šè¯¥æ–¹æ³•åœ¨å½“å‰é¡µé¢é€€å‡ºå…¨å±æ¨¡å¼æ—¶å›è°ƒï¼Œä¸»ç¨‹åºåº”åœ¨è¿™æ—¶éšè—ä¹‹å‰showå‡ºæ¥çš„Viewã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Bitmap getDefaultVideoPoster()&lt;/strong&gt;ï¼šå½“æˆ‘ä»¬çš„Webé¡µé¢åŒ…å«è§†é¢‘æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨HTMLé‡Œä¸ºå®ƒè®¾ç½®ä¸€ä¸ªé¢„è§ˆå›¾ï¼ŒWebViewä¼šåœ¨ç»˜åˆ¶é¡µé¢æ—¶æ ¹æ®å®ƒçš„å®½é«˜ä¸ºå®ƒå¸ƒå±€ã€‚è€Œå½“æˆ‘ä»¬å¤„äºå¼±ç½‘çŠ¶æ€ä¸‹æ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰æ¯”è¾ƒå¿«çš„è·å–è¯¥å›¾ç‰‡ï¼Œé‚£WebViewç»˜åˆ¶é¡µé¢æ—¶çš„gitWidth()æ–¹æ³•å°±ä¼šæŠ¥å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸~ äºæ˜¯appå°±crashäº†ã€‚ã€‚&lt;br&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦é‡å†™è¯¥æ–¹æ³•ï¼Œåœ¨æˆ‘ä»¬å°šæœªè·å–webé¡µé¢ä¸Šçš„videoé¢„è§ˆå›¾æ—¶ï¼Œç»™äºˆå®ƒä¸€ä¸ªæœ¬åœ°çš„å›¾ç‰‡ï¼Œé¿å…ç©ºæŒ‡é’ˆçš„å‘ç”Ÿã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;View getVideoLoadingProgressView()&lt;/strong&gt;ï¼šé‡å†™è¯¥æ–¹æ³•å¯ä»¥åœ¨è§†é¢‘loadingæ—¶ç»™äºˆä¸€ä¸ªè‡ªå®šä¹‰çš„Viewï¼Œå¯ä»¥æ˜¯åŠ è½½åœ†ç¯ or somethingã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;boolean onJsAlert(WebView view, String url, String message, JsResult result)&lt;/strong&gt;ï¼šå¤„ç†Javascriptä¸­çš„Alertå¯¹è¯æ¡†ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;boolean onJsPrompt(WebView view, String url, String message, String defaultValue, JsPromptResult result)&lt;/strong&gt;ï¼šå¤„ç†Javascriptä¸­çš„Promptå¯¹è¯æ¡†ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;boolean onJsConfirm(WebView view, String url, String message, JsResult result)&lt;/strong&gt;ï¼šå¤„ç†Javascriptä¸­çš„Confirmå¯¹è¯æ¡†&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;boolean onShowFileChooser(WebView webView, ValueCallback&lt;Uri[]&gt; filePathCallback, WebChromeClient.FileChooserParams fileChooserParams)&lt;/strong&gt;ï¼šè¯¥æ–¹æ³•åœ¨ç”¨æˆ·è¿›è¡Œäº†webä¸ŠæŸä¸ªéœ€è¦ä¸Šä¼ æ–‡ä»¶çš„æ“ä½œæ—¶å›è°ƒã€‚æˆ‘ä»¬åº”è¯¥åœ¨è¿™é‡Œæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶é€‰æ‹©å™¨ï¼Œå¦‚æœè¦å–æ¶ˆè¿™ä¸ªè¯·æ±‚æˆ‘ä»¬å¯ä»¥è°ƒç”¨&lt;strong&gt;&lt;em&gt;filePathCallback.onReceiveValue(null)&lt;/em&gt;&lt;/strong&gt;å¹¶è¿”å›&lt;strong&gt;&lt;em&gt;true&lt;/em&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onPermissionRequest(PermissionRequest request)&lt;/strong&gt;ï¼šè¯¥æ–¹æ³•åœ¨webé¡µé¢è¯·æ±‚æŸä¸ªå°šæœªè¢«å…è®¸æˆ–æ‹’ç»çš„æƒé™æ—¶å›è°ƒï¼Œä¸»ç¨‹åºåœ¨æ­¤æ—¶è°ƒç”¨&lt;strong&gt;&lt;em&gt;grant(String [])&lt;/em&gt;&lt;/strong&gt;æˆ–&lt;strong&gt;&lt;em&gt;deny()&lt;/em&gt;&lt;/strong&gt;æ–¹æ³•ã€‚å¦‚æœè¯¥æ–¹æ³•æ²¡æœ‰è¢«é‡å†™ï¼Œåˆ™é»˜è®¤æ‹’ç»webé¡µé¢è¯·æ±‚çš„æƒé™ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;onPermissionRequestCanceled(PermissionRequest request)&lt;/strong&gt;ï¼šè¯¥æ–¹æ³•åœ¨webæƒé™ç”³è¯·æƒé™è¢«å–æ¶ˆæ—¶å›è°ƒï¼Œè¿™æ—¶åº”è¯¥éšè—ä»»ä½•ä¸ä¹‹ç›¸å…³çš„UIç•Œé¢ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Jsä¸WebViewäº¤äº’&lt;/h3&gt;

&lt;p&gt;æ—¢ç„¶å—¨é¸Ÿåº”ç”¨å¤§è¡Œå…¶é“ï¼Œé‚£ä¹ˆæ¯«æ— ç–‘é—®Androidä¸JavaScriptçš„äº¤äº’æˆ‘ä»¬ä¹Ÿå¿…é¡»äº†è§£æ¸…æ¥šï¼Œä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹JavaScriptä¸Androidæ˜¯å¦‚ä½•äº’ç›¸è°ƒç”¨çš„ã€‚&lt;/p&gt;

&lt;h4&gt;åˆ©ç”¨WebViewè°ƒç”¨ç½‘é¡µä¸Šçš„JavaScriptä»£ç &lt;/h4&gt;

&lt;p&gt;åœ¨WebViewä¸­è°ƒç”¨Jsçš„åŸºæœ¬æ ¼å¼ä¸º&lt;strong&gt;webView.loadUrl(&amp;quot;javascript:methodName(parameterValues)&amp;quot;);&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ç°æœ‰ä»¥ä¸‹è¿™æ®µJavaScriptä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;  &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;readyToGo&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nx"&gt;alert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"Hello"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;alertMessage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;message&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="nx"&gt;alert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;message&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;getYourCar&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;"Car"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;1. WebViewè°ƒç”¨JavaScriptæ— å‚æ— è¿”å›å€¼å‡½æ•°&lt;/h4&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;call&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;"javascript:readyToGo()"&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;loadUrl&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;2. WebViewè°ƒç”¨JavScriptæœ‰å‚æ— è¿”å›å€¼å‡½æ•°&lt;/h4&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;call&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;"javascript:alertMessage(\""&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;"content"&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;"\")"&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;loadUrl&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;3. WebViewè°ƒç”¨JavaScriptæœ‰å‚æ•°æœ‰è¿”å›å€¼çš„å‡½æ•°&lt;/h4&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="nd"&gt;@TargetApi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Build&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;VERSION_CODES&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;KITKAT&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;evaluateJavaScript&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebView&lt;/span&gt; &lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;){&lt;/span&gt;
    &lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;evaluateJavascript&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"getYourCar()"&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ValueCallback&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="nd"&gt;@Override&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onReceiveValue&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;Log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;d&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"findCar"&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;});&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;JavaScripté€šè¿‡WebViewè°ƒç”¨Javaä»£ç &lt;/h4&gt;

&lt;p&gt;ä»API19å¼€å§‹ï¼ŒAndroidæä¾›äº†@JavascriptInterfaceå¯¹è±¡æ³¨è§£çš„æ–¹å¼æ¥å»ºç«‹èµ·Javascriptå¯¹è±¡å’ŒAndroidåŸç”Ÿå¯¹è±¡çš„ç»‘å®šï¼Œæä¾›ç»™JavScriptè°ƒç”¨çš„å‡½æ•°å¿…é¡»å¸¦æœ‰@JavascriptInterfaceã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¼”ç¤ºä¸€ JavaScriptè°ƒç”¨Android Toastæ–¹æ³•&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1. ç¼–å†™JavaåŸç”Ÿæ–¹æ³•å¹¶ç”¨ä½¿ç”¨@JavascriptInterfaceæ³¨è§£&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="nd"&gt;@JavascriptInterface&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;show&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;){&lt;/span&gt;
    &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;makeText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getApplication&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LENGTH_SHORT&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;2.æ³¨å†ŒJavaScriptInterface&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addJavascriptInterface&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;"android"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;addJavascriptInterfaceçš„ä½œç”¨æ˜¯æŠŠthisæ‰€ä»£è¡¨çš„ç±»æ˜ å°„ä¸ºJavaScriptä¸­çš„androidå¯¹è±¡ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3.ç¼–å†™JavaScriptä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;toastClick&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
    &lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;android&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;show&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"JavaScript called~!"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ¼”ç¤ºäºŒ JavaScriptè°ƒç”¨æœ‰è¿”å›å€¼çš„Javaæ–¹æ³•&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1.å®šä¹‰ä¸€ä¸ªå¸¦è¿”å›å€¼çš„Javaæ–¹æ³•ï¼Œå¹¶ä½¿ç”¨@JavaInterfaceï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="nd"&gt;@JavaInterface&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;getMessage&lt;/span&gt;&lt;span class="o"&gt;(){&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s"&gt;"Hello,boy~"&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;2.æ·»åŠ JavaScriptçš„æ˜ å°„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addJavaScriptInterface&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="s"&gt;"Android"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;3.é€šè¿‡JavaScriptè°ƒç”¨Javaæ–¹æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;showHello&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;str&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Android&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getMessage&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;str&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šå°±æ˜¯Jsä¸WebViewäº¤äº’çš„ä¸€äº›ä»‹ç»ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰å¸®åŠ©ã€‚&lt;/p&gt;

&lt;h3&gt;WebViewåŠ è½½ä¼˜åŒ–&lt;/h3&gt;

&lt;p&gt;å½“WebViewçš„ä½¿ç”¨é¢‘ç‡å˜å¾—é¢‘ç¹çš„æ—¶å€™ï¼Œå¯¹äºå…¶å„æ–¹é¢çš„ä¼˜åŒ–å°±å˜å¾—é€æ¸é‡è¦äº†èµ·æ¥ã€‚å¯ä»¥çŸ¥é“çš„æ˜¯ï¼Œæˆ‘ä»¬æ¯åŠ è½½ä¸€ä¸ª H5é¡µé¢ï¼Œéƒ½ä¼šæœ‰å¾ˆå¤šçš„è¯·æ±‚ã€‚é™¤äº†HTMLä¸»URLè‡ªèº«çš„è¯·æ±‚å¤–ï¼ŒHTMLå¤–éƒ¨å¼•ç”¨çš„ JSã€CSSã€å­—ä½“æ–‡ä»¶ã€å›¾ç‰‡éƒ½æ˜¯ä¸€ä¸ªä¸ªç‹¬ç«‹çš„HTTP è¯·æ±‚ï¼Œè™½ç„¶è¯·æ±‚æ˜¯å¹¶å‘çš„ï¼Œä½†å½“ç½‘é¡µæ•´ä½“æ•°é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦çš„æ—¶å€™ï¼Œå†åŠ ä¸Šæµè§ˆå™¨è§£æã€æ¸²æŸ“çš„æ—¶é—´ï¼ŒWebæ•´ä½“çš„åŠ è½½æ—¶é—´å˜å¾—å¾ˆé•¿ã€‚åŒæ—¶è¯·æ±‚æ–‡ä»¶è¶Šå¤šï¼Œæ¶ˆè€—çš„æµé‡ä¹Ÿä¼šè¶Šå¤šã€‚é‚£ä¹ˆå¯¹äºåŠ è½½çš„ä¼˜åŒ–å°±å˜å¾—éå¸¸é‡è¦ï¼Œè¿™æ–¹é¢çš„ç»éªŒæˆ‘ä¹Ÿæ²¡æœ‰ä»€ä¹ˆåˆ«çš„ï¼Œå¤§æ¦‚ä¸‰ä¸ªæ–¹é¢ï¼š&lt;/p&gt;

&lt;h4&gt;ä¸€ä¸ªï¼Œå°±æ˜¯èµ„æºæœ¬åœ°åŒ–çš„é—®é¢˜&lt;/h4&gt;

&lt;p&gt;é¦–å…ˆå¯ä»¥æ˜ç¡®çš„æ˜¯ï¼Œä»¥ç›®å‰çš„ç½‘ç»œæ¡ä»¶ï¼Œé€šè¿‡ç½‘ç»œå»æœåŠ¡å™¨è·å–èµ„æºçš„é€Ÿåº¦æ˜¯è¿œè¿œæ¯”ä¸ä¸Šä»æœ¬åœ°è¯»å–çš„ã€‚&lt;strong&gt;è°ˆè®ºå„ç§ä¼˜åŒ–ç­–ç•¥å…¶å®æ°æ°å¿½ç•¥äº†â€œéœ€è¦åŠ è½½â€æ‰æ˜¯é˜»æŒ¡é€Ÿåº¦æå‡çš„æœ€å¤§ç»Šè„šçŸ³ã€‚&lt;/strong&gt;æ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯ä¸€ï¼Œå°±æ˜¯å°†ä¸€äº›è¾ƒé‡çš„èµ„æºæ¯”å¦‚jsã€cssã€å›¾ç‰‡ç”šè‡³HTMLæœ¬èº«è¿›è¡Œæœ¬åœ°åŒ–å¤„ç†ï¼Œåœ¨æ¯æ¬¡åŠ è½½åˆ°è¿™äº›èµ„æºçš„æ—¶å€™ï¼Œä»æœ¬åœ°è¯»å–è¿›è¡ŒåŠ è½½ï¼Œå¯ä»¥ç®€å•è®°å¿†ä¸º&lt;strong&gt;â€œå­˜Â·å–Â·æ›´â€&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“å®ç°æ€è·¯ä¸ºï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;â€œå­˜â€&lt;/strong&gt;â€”â€”å°†ä¸Šè¿°é‡é‡çº§èµ„æºæ‰“åŒ…è¿›apkæ–‡ä»¶ï¼Œæ¯æ¬¡åŠ è½½ç›¸åº”æ–‡ä»¶æ—¶æ—¶ä»æœ¬åœ°å–å³å¯ã€‚ä¹Ÿå¯ä¸æ‰“åŒ…ï¼Œåœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ä»¥åŠæ¥ä¸‹æ¥çš„è‹¥å¹²é—´éš”æ—¶é—´é‡ŒåŠ¨æ€ä¸‹è½½å­˜å‚¨ï¼Œå°†æ‰€æœ‰çš„èµ„æºæ–‡ä»¶éƒ½å­˜åœ¨Androidçš„assetç›®å½•ä¸‹ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;â€œå–â€&lt;/strong&gt;â€”â€”é‡å†™WebViewClientçš„&lt;strong&gt;&lt;em&gt;WebResourceResponse  shouldInterceptRequest&lt;/em&gt;&lt;/strong&gt;(WebView view, WebResourceRequest request)æ–¹æ³•ï¼Œé€šè¿‡ä¸€å®šçš„åˆ¤åˆ«æ–¹æ³•ï¼ˆä¾‹å¦‚æ­£åˆ™è¡¨è¾¾å¼ï¼‰æ‹¦æˆªç›¸åº”çš„è¯·æ±‚ï¼Œä»æœ¬åœ°è¯»å–ç›¸åº”èµ„æºå¹¶è¿”å›ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;â€œæ›´â€&lt;/strong&gt;â€”â€”å»ºç«‹èµ·Cache Controlæœºåˆ¶ï¼Œå®šæœŸæˆ–ä½¿ç”¨APIé€šçŸ¥çš„å½¢å¼æ§åˆ¶æœ¬åœ°èµ„æºçš„æ›´æ–°ï¼Œä¿è¯æœ¬åœ°èµ„æºæ˜¯æœ€æ–°å’Œå¯ç”¨çš„ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¿™é‡Œé™„ä¸Šä¸€ç¯‡åšå®¢é“¾æ¥ï¼Œéå¸¸æ£’å¯ä¾›å‚è€ƒï¼š&lt;a href="http://tutorials.jenkov.com/android/android-web-apps-using-android-webview.html#caching-web-resources-in-the-android-device"&gt;caching-web-resources-in-the-android-device&lt;/a&gt;  &lt;/p&gt;

&lt;h4&gt;ç¬¬äºŒä¸ªï¼Œå°±æ˜¯ç¼“å­˜çš„é—®é¢˜&lt;/h4&gt;

&lt;p&gt;å€˜è‹¥ä½ ä¸é‡‡ç”¨æˆ–ä¸å®Œå…¨é‡‡ç”¨ç¬¬ä¸€æ¡èµ„æºæœ¬åœ°åŒ–çš„æ€è·¯ï¼Œé‚£ä¹ˆä½ çš„WebViewç¼“å­˜æ˜¯å¿…é¡»è¦å¼€å¯çš„ï¼ˆè™½ç„¶è¿™ä¸€æ€è·¯å’Œç¬¬ä¸€æ¡æœ‰é‡åˆçš„åœ°æ–¹ï¼‰ã€‚&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="n"&gt;WebSettings&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;webView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getSettings&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setAppCacheEnabled&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDatabaseEnabled&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDomStorageEnabled&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;&lt;span class="c1"&gt;//å¼€å¯DOMç¼“å­˜&lt;/span&gt;
&lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setCacheMode&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebSettings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LOAD_DEFAULT&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨ç½‘ç»œæ­£å¸¸æ—¶ï¼Œé‡‡ç”¨é»˜è®¤ç¼“å­˜ç­–ç•¥ï¼Œåœ¨ç¼“å­˜å¯è·å–å¹¶ä¸”æ²¡æœ‰è¿‡æœŸçš„æƒ…å†µä¸‹åŠ è½½ç¼“å­˜ï¼Œå¦åˆ™é€šè¿‡ç½‘ç»œè·å–èµ„æºä»¥å‡å°‘é¡µé¢çš„ç½‘ç»œè¯·æ±‚æ¬¡æ•°ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œå€¼å¾—æèµ·çš„æ˜¯ï¼Œæˆ‘ä»¬ç»å¸¸åœ¨appé‡Œç”¨WebViewå±•ç¤ºé¡µé¢æ—¶ï¼Œå¹¶ä¸æƒ³è®©ç”¨æˆ·è§‰å¾—ä»–æ˜¯åœ¨è®¿é—®ä¸€ä¸ªç½‘é¡µã€‚å› ä¸ºå€˜è‹¥æˆ‘ä»¬çš„appé‡Œç½‘é¡µéå¸¸å¤šï¼Œè€Œæˆ‘ä»¬ç»™ç”¨æˆ·çš„æ„Ÿè§‰åˆéƒ½åƒåœ¨è®¿é—®ç½‘é¡µçš„è¯ï¼Œæˆ‘ä»¬çš„appä¾¿å¤±å»äº†æ„ä¹‰ã€‚ï¼ˆæˆ‘çš„æ„æ€æ˜¯ä¸ºä»€ä¹ˆç”¨æˆ·ä¸ç›´æ¥ä½¿ç”¨æµè§ˆå™¨å‘¢ï¼Ÿï¼‰&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥è¿™æ—¶ï¼Œç¦»çº¿ç¼“å­˜çš„é—®é¢˜å°±å€¼å¾—æˆ‘ä»¬æ³¨æ„ã€‚æˆ‘ä»¬éœ€è¦è®©ç”¨æˆ·åœ¨æ²¡æœ‰ç½‘çš„æ—¶å€™ï¼Œä¾ç„¶èƒ½å¤Ÿæ“ä½œæˆ‘ä»¬çš„appï¼Œè€Œä¸æ˜¯é¢å¯¹ä¸€ä¸ªå’Œæµè§ˆå™¨é‡Œçš„ç½‘ç»œé”™è¯¯ä¸€æ ·çš„é¡µé¢ï¼Œå“ªæ€•ä»–èƒ½è¿›è¡Œçš„æ“ä½œååˆ†æœ‰é™ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæˆ‘çš„æ€è·¯æ˜¯ï¼Œåœ¨å¼€å¯ç¼“å­˜çš„å‰æä¸‹ï¼ŒWebViewåœ¨åŠ è½½é¡µé¢æ—¶æ£€æµ‹ç½‘ç»œå˜åŒ–ï¼Œå€˜è‹¥åœ¨åŠ è½½é¡µé¢æ—¶ç”¨æˆ·çš„ç½‘ç»œçªç„¶æ–­æ‰ï¼Œæˆ‘ä»¬åº”å½“æ›´æ”¹WebViewçš„ç¼“å­˜ç­–ç•¥ã€‚&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="n"&gt;ConnectivityManager&lt;/span&gt; &lt;span class="n"&gt;connectivityManager&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ConnectivityManager&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;getSystemService&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Context&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CONNECTIVITY_SERVICE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;NetworkInfo&lt;/span&gt; &lt;span class="n"&gt;networkInfo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;connectivityManager&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getActiveNetworkInfo&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;networkInfo&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isAvailable&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setCacheMode&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebSettings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LOAD_DEFAULT&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;&lt;span class="c1"&gt;//ç½‘ç»œæ­£å¸¸æ—¶ä½¿ç”¨é»˜è®¤ç¼“å­˜ç­–ç•¥&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setCacheMode&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebSettings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LOAD_CACHE_ONLY&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;&lt;span class="c1"&gt;//ç½‘ç»œä¸å¯ç”¨æ—¶åªä½¿ç”¨ç¼“å­˜&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ—¢ç„¶æœ‰ç¼“å­˜ï¼Œå°±è¦æœ‰ç¼“å­˜æ§åˆ¶ï¼Œä¸ä¸€ç›¸ä¼¼çš„æ˜¯æˆ‘ä»¬ä¹Ÿè¦å»ºç«‹ç¼“å­˜æ§åˆ¶æœºåˆ¶ï¼Œå®šæœŸæˆ–æ¥å—æœåŠ¡å™¨é€šçŸ¥æ¥è¿›è¡Œç¼“å­˜çš„æ¸…ç©ºæˆ–æ›´æ–°ã€‚&lt;/p&gt;

&lt;h4&gt;ç¬¬ä¸‰ä¸ªï¼Œå°±æ˜¯å»¶è¿ŸåŠ è½½å’Œæ‰§è¡Œjs&lt;/h4&gt;

&lt;p&gt;åœ¨WebViewä¸­ï¼ŒonPageFinished()çš„å›è°ƒæ„å‘³ç€é¡µé¢åŠ è½½çš„å®Œæˆã€‚ä½†è¯¥æ–¹æ³•ä¼šåœ¨JavScriptè„šæœ¬æ‰§è¡Œå®Œæˆåæ‰ä¼šè§¦å‘ï¼Œå€˜è‹¥æˆ‘ä»¬è¦åŠ è½½çš„é¡µé¢ä½¿ç”¨äº†JQueryï¼Œä¼šåœ¨å¤„ç†å®ŒDOMå¯¹è±¡ï¼Œæ‰§è¡Œå®Œ$(document).ready(function() {})åæ‰ä¼šæ¸²æŸ“å¹¶æ˜¾ç¤ºé¡µé¢ã€‚è¿™æ˜¯ä¸å¯æ¥å—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹Jsè¿›è¡Œå»¶è¿ŸåŠ è½½ï¼Œå½“ç„¶è¿™éƒ¨åˆ†æ˜¯Webå‰ç«¯çš„å·¥ä½œã€‚&lt;/p&gt;

&lt;h4&gt;å¦‚æœè¯´è¿˜æœ‰ä»€ä¹ˆ&lt;/h4&gt;

&lt;p&gt;é‚£å°±æ˜¯JsBridgeä¸€å¾‹ä¸å¾—æ»¥ç”¨ï¼Œè¿™ä¸ªå¯¹é¡µé¢åŠ è½½çš„å®Œæˆé€Ÿåº¦æ˜¯æœ‰å¾ˆå¤§å½±å“çš„ï¼Œå€˜è‹¥ä¸€ä¸ªé¡µé¢å¾ˆå¤šæ“ä½œéƒ½é€šè¿‡JSbridgeæ¥æ§åˆ¶ï¼Œå†æ€ä¹ˆä¼˜åŒ–ä¹Ÿæ— æµäºäº‹ï¼ˆå› ä¸ºæ¯•ç«Ÿæœ‰é‚£ä¹ˆå¤šæ“ä½œè¦å®é™…æ‰§è¡Œï¼‰ã€‚åŒæ—¶è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ç®¡ä½ æ˜¯å¦å¯¹èµ„æºè¿›è¡Œç¼“å­˜ï¼Œéƒ½è¯·å°†èµ„æºåœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œå‹ç¼©ã€‚å› ä¸ºæ— è®ºæ˜¯èµ„æºçš„è·å–å’Œæ›´æ–°ï¼Œéƒ½æ˜¯è¦ä»æœåŠ¡å™¨è·å–çš„ï¼Œæ‰€ä»¥å¯¹äºèµ„æºæ–‡ä»¶çš„å‹ç¼©å…¶å®æ˜¯&lt;strong&gt;æœ€ç›´æ¥ä¹Ÿæœ€åº”è¯¥åš&lt;/strong&gt;çš„äº‹æƒ…ä¹‹ä¸€ï¼Œä½†æ˜¯ä¸€èˆ¬æœåŠ¡å™¨ç«¯éƒ½ä¼šåšå¥½ï¼Œæ‰€ä»¥ä¸»è¦å°±æ˜¯ä¸Šé¢è¿™ä¸‰ä»¶äº‹ã€‚&lt;/p&gt;

&lt;h2&gt;é©¾ç…§è€ƒè¯•&lt;/h2&gt;

&lt;p&gt;ä»‹ç»äº†è¿™ä¹ˆå¤šï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰ç‚¹å¸®åŠ©ã€‚æ¥ä¸‹æ¥æ—¶çº¯å®æˆ˜æ—¶é—´ï¼Œæˆ‘ä¼šå°†ä¸Šé¢æ‰€ä»‹ç»çš„å¾ˆå¤šçŸ¥è¯†ç‚¹åœ¨æ¥ä¸‹æ¥çš„ä»£ç é‡Œå®é™…åº”ç”¨ä¸€éï¼Œå¸Œæœ›èƒ½å¤Ÿå¸¦ç»™ä½ æ›´åŠ ç›´è§‚çš„ä½¿ç”¨æ„Ÿå—ã€‚&lt;/p&gt;
&lt;pre class="highlight xml"&gt;&lt;code&gt;&lt;span class="cp"&gt;&amp;lt;?xml version="1.0" encoding="utf-8"?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;LinearLayout&lt;/span&gt; &lt;span class="na"&gt;xmlns:android=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res/android"&lt;/span&gt;
    &lt;span class="na"&gt;xmlns:app=&lt;/span&gt;&lt;span class="s"&gt;"http://schemas.android.com/apk/res-auto"&lt;/span&gt;
    &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
    &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
    &lt;span class="na"&gt;android:orientation=&lt;/span&gt;&lt;span class="s"&gt;"vertical"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;android.support.design.widget.AppBarLayout&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"wrap_content"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;android.support.v7.widget.Toolbar&lt;/span&gt;
            &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/toolbar"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"?attr/actionBarSize"&lt;/span&gt;
            &lt;span class="na"&gt;android:background=&lt;/span&gt;&lt;span class="s"&gt;"?attr/colorPrimary"&lt;/span&gt;
            &lt;span class="na"&gt;app:theme=&lt;/span&gt;&lt;span class="s"&gt;"@style/ThemeOverlay.AppCompat.Light"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;/android.support.design.widget.AppBarLayout&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;FrameLayout&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
        &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;WebView&lt;/span&gt;
            &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/web_view"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"match_parent"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;ProgressBar&lt;/span&gt;
            &lt;span class="na"&gt;android:id=&lt;/span&gt;&lt;span class="s"&gt;"@+id/progress_bar"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_width=&lt;/span&gt;&lt;span class="s"&gt;"50dp"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_height=&lt;/span&gt;&lt;span class="s"&gt;"50dp"&lt;/span&gt;
            &lt;span class="na"&gt;android:layout_gravity=&lt;/span&gt;&lt;span class="s"&gt;"center"&lt;/span&gt;
            &lt;span class="na"&gt;android:visibility=&lt;/span&gt;&lt;span class="s"&gt;"gone"&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/FrameLayout&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/LinearLayout&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Javaéƒ¨åˆ†&lt;/p&gt;
&lt;pre class="highlight java"&gt;&lt;code&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MainActivity&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;AppCompatActivity&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;WebView&lt;/span&gt; &lt;span class="n"&gt;mWebView&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;ProgressBar&lt;/span&gt; &lt;span class="n"&gt;mProgressbar&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Toolbar&lt;/span&gt; &lt;span class="n"&gt;mToolbar&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

  &lt;span class="nd"&gt;@Override&lt;/span&gt;
  &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onCreate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Bundle&lt;/span&gt; &lt;span class="n"&gt;savedInstanceState&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;supportRequestWindowFeature&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Window&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FEATURE_NO_TITLE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onCreate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;savedInstanceState&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;setContentView&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;layout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;activity_main&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

      &lt;span class="n"&gt;initAppBar&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;&lt;span class="c1"&gt;//åˆå§‹åŒ–Toolbar&lt;/span&gt;

      &lt;span class="n"&gt;initWebView&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;&lt;span class="c1"&gt;//åˆå§‹åŒ–WebView&lt;/span&gt;
      &lt;span class="n"&gt;initWebSettings&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;&lt;span class="c1"&gt;//åˆå§‹åŒ–WebSettings&lt;/span&gt;
      &lt;span class="n"&gt;initWebViewClient&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;&lt;span class="c1"&gt;//åˆå§‹åŒ–WebViewClient&lt;/span&gt;
      &lt;span class="n"&gt;initWebChromeClient&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;&lt;span class="c1"&gt;//åˆå§‹åŒ–WebChromeClient&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;initAppBar&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;mToolbar&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Toolbar&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toolbar&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;mToolbar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setTitle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"è½½å…¥ä¸­.."&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;mToolbar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setTitleTextColor&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getResources&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getColor&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;color&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;colorWhite&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
      &lt;span class="n"&gt;setSupportActionBar&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mToolbar&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;getSupportActionBar&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;setDisplayHomeAsUpEnabled&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;initWebView&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;mWebView&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebView&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;web_view&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;mProgressbar&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ProgressBar&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="n"&gt;findViewById&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;progress_bar&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;"https://www.google.com"&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;mWebView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;loadUrl&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;initWebSettings&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;WebSettings&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mWebView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getSettings&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
      &lt;span class="c1"&gt;//æ”¯æŒè·å–æ‰‹åŠ¿ç„¦ç‚¹&lt;/span&gt;
      &lt;span class="n"&gt;mWebView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;requestFocusFromTouch&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
      &lt;span class="c1"&gt;//æ”¯æŒJS&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setJavaScriptEnabled&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="c1"&gt;//æ”¯æŒæ’ä»¶&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setPluginState&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebSettings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PluginState&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ON&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="c1"&gt;//è®¾ç½®é€‚åº”å±å¹•&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setUseWideViewPort&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setLoadWithOverviewMode&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="c1"&gt;//æ”¯æŒç¼©æ”¾&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setSupportZoom&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="c1"&gt;//éšè—åŸç”Ÿçš„ç¼©æ”¾æ§ä»¶&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDisplayZoomControls&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="c1"&gt;//æ”¯æŒå†…å®¹é‡æ–°å¸ƒå±€&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setLayoutAlgorithm&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebSettings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LayoutAlgorithm&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SINGLE_COLUMN&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;supportMultipleWindows&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setSupportMultipleWindows&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="c1"&gt;//è®¾ç½®ç¼“å­˜æ¨¡å¼&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDomStorageEnabled&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDatabaseEnabled&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setCacheMode&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebSettings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LOAD_DEFAULT&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setAppCacheEnabled&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setAppCachePath&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mWebView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getContext&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getCacheDir&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getAbsolutePath&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;

      &lt;span class="c1"&gt;//è®¾ç½®å¯è®¿é—®æ–‡ä»¶&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setAllowFileAccess&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="c1"&gt;//å½“webviewè°ƒç”¨requestFocusæ—¶ä¸ºwebviewè®¾ç½®èŠ‚ç‚¹&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setNeedInitialFocus&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="c1"&gt;//æ”¯æŒè‡ªåŠ¨åŠ è½½å›¾ç‰‡&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Build&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;VERSION&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SDK_INT&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setLoadsImagesAutomatically&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setLoadsImagesAutomatically&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setNeedInitialFocus&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="c1"&gt;//è®¾ç½®ç¼–ç æ ¼å¼&lt;/span&gt;
      &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDefaultTextEncodingName&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"UTF-8"&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;initWebViewClient&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;mWebView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setWebViewClient&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;WebViewClient&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

          &lt;span class="c1"&gt;//é¡µé¢å¼€å§‹åŠ è½½æ—¶&lt;/span&gt;
          &lt;span class="nd"&gt;@Override&lt;/span&gt;
          &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onPageStarted&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebView&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Bitmap&lt;/span&gt; &lt;span class="n"&gt;favicon&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
              &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onPageStarted&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;favicon&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
              &lt;span class="n"&gt;mProgressbar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVisibility&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;View&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;VISIBLE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;


          &lt;span class="c1"&gt;//é¡µé¢å®ŒæˆåŠ è½½æ—¶&lt;/span&gt;
          &lt;span class="nd"&gt;@Override&lt;/span&gt;
          &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onPageFinished&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebView&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
              &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onPageFinished&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
              &lt;span class="n"&gt;mProgressbar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setVisibility&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;View&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;GONE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;

          &lt;span class="c1"&gt;//æ˜¯å¦åœ¨WebViewå†…åŠ è½½æ–°é¡µé¢&lt;/span&gt;
          &lt;span class="nd"&gt;@Override&lt;/span&gt;
          &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;shouldOverrideUrlLoading&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebView&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;WebResourceRequest&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
              &lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;loadUrl&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
              &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;

          &lt;span class="c1"&gt;//ç½‘ç»œé”™è¯¯æ—¶å›è°ƒçš„æ–¹æ³•&lt;/span&gt;
          &lt;span class="nd"&gt;@Override&lt;/span&gt;
          &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onReceivedError&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebView&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;WebResourceRequest&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;WebResourceError&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
              &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onReceivedError&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
              &lt;span class="cm"&gt;/**
               * åœ¨è¿™é‡Œå†™ç½‘ç»œé”™è¯¯æ—¶çš„é€»è¾‘,æ¯”å¦‚æ˜¾ç¤ºä¸€ä¸ªé”™è¯¯é¡µé¢
               *
               * è¿™é‡Œæˆ‘å·ä¸ªæ‡’ä¸å†™äº†
               * */&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;

          &lt;span class="nd"&gt;@TargetApi&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Build&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;VERSION_CODES&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;M&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
          &lt;span class="nd"&gt;@Override&lt;/span&gt;
          &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onReceivedHttpError&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebView&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;WebResourceRequest&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;WebResourceResponse&lt;/span&gt; &lt;span class="n"&gt;errorResponse&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
              &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onReceivedHttpError&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;errorResponse&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;
      &lt;span class="o"&gt;});&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;initWebChromeClient&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

      &lt;span class="n"&gt;mWebView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setWebChromeClient&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;WebChromeClient&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

          &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Bitmap&lt;/span&gt; &lt;span class="n"&gt;mDefaultVideoPoster&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;&lt;span class="c1"&gt;//é»˜è®¤çš„è§†é¢‘å±•ç¤ºå›¾&lt;/span&gt;

          &lt;span class="nd"&gt;@Override&lt;/span&gt;
          &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onReceivedTitle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WebView&lt;/span&gt; &lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
              &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onReceivedTitle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;view&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
              &lt;span class="n"&gt;setToolbarTitle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;

          &lt;span class="nd"&gt;@Override&lt;/span&gt;
          &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Bitmap&lt;/span&gt; &lt;span class="nf"&gt;getDefaultVideoPoster&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
              &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mDefaultVideoPoster&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                  &lt;span class="n"&gt;mDefaultVideoPoster&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;BitmapFactory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;decodeResource&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                          &lt;span class="n"&gt;getResources&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;drawable&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;video_default&lt;/span&gt;
                  &lt;span class="o"&gt;);&lt;/span&gt;
                  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;mDefaultVideoPoster&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
              &lt;span class="o"&gt;}&lt;/span&gt;
              &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDefaultVideoPoster&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;
      &lt;span class="o"&gt;});&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="cm"&gt;/**
   * è®¾ç½®Toolbaræ ‡é¢˜
   *
   * @param title
   */&lt;/span&gt;
  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setToolbarTitle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;Log&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;d&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;"setToolbarTitle"&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;" WebDetailActivity "&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mToolbar&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="n"&gt;mToolbar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;post&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Runnable&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
              &lt;span class="nd"&gt;@Override&lt;/span&gt;
              &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                  &lt;span class="n"&gt;mToolbar&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setTitle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TextUtils&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isEmpty&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="n"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;string&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;loading&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
              &lt;span class="o"&gt;}&lt;/span&gt;
          &lt;span class="o"&gt;});&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="nd"&gt;@Override&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;onCreateOptionsMenu&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Menu&lt;/span&gt; &lt;span class="n"&gt;menu&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;getMenuInflater&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;inflate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menu&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;menu_main&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;menu&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onCreateOptionsMenu&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;menu&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="nd"&gt;@Override&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;onOptionsItemSelected&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MenuItem&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getItemId&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;page_up&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
              &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;makeText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getApplicationContext&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="s"&gt;"é¡µé¢å‘ä¸Š"&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LENGTH_SHORT&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
              &lt;span class="n"&gt;mWebView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pageUp&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
              &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;page_down&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
              &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;makeText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getApplicationContext&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="s"&gt;"é¡µé¢å‘ä¸‹"&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LENGTH_SHORT&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
              &lt;span class="n"&gt;mWebView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pageDown&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
              &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;refresh&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
              &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;makeText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getApplicationContext&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="s"&gt;"åˆ·æ–°~"&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LENGTH_SHORT&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
              &lt;span class="n"&gt;mWebView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;reload&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
          &lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
              &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onOptionsItemSelected&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onOptionsItemSelected&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="nd"&gt;@Override&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;onKeyDown&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;keyCode&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;KeyEvent&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

      &lt;span class="c1"&gt;//å¦‚æœæŒ‰ä¸‹çš„æ˜¯å›é€€é”®ä¸”å†å²è®°å½•é‡Œç¡®å®è¿˜æœ‰é¡µé¢&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;keyCode&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;KeyEvent&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;KEYCODE_BACK&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;mWebView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;canGoBack&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="n"&gt;mWebView&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;goBack&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
          &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;makeText&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getApplicationContext&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="s"&gt;"è€ƒè¯•ç»“æŸ,æ­å–œæ‚¨è€ƒè¯•åˆæ ¼!"&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Toast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LENGTH_LONG&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;show&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onKeyDown&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;keyCode&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ•ˆæœå›¾ï¼š&lt;/p&gt;

&lt;p&gt;fuckï¼Œæ•ˆæœå›¾å¤ªå¤§å‹ç¼©æ— æœ›~~~
&lt;a href="http://www.iqiyi.com/w_19rsx24znp.html"&gt;æ•ˆæœå›¾çœ‹å¤–é“¾è§†é¢‘å§&lt;/a&gt;&lt;/p&gt;

&lt;h2&gt;ä¸Šè·¯&lt;/h2&gt;

&lt;p&gt;å¥½äº†ï¼Œåˆ°æ­¤ä¸ºæ­¢ä½ å·²é˜…è¯»å®Œæ‰€æœ‰çš„æŒ‡å—ï¼Œé€ä½ ä¸€è¾†è½¦ï¼Œä¸Šè·¯å§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src="https://cloud.githubusercontent.com/assets/12692071/18089238/78f70d26-6ef1-11e6-8b7d-2b821fd92355.jpg" alt="è½¦" /&gt;&lt;/p&gt;

&lt;h2&gt;å‚è€ƒæ–‡ç« &lt;/h2&gt;

&lt;p&gt;&lt;a href="https://developer.android.com/guide/index.html"&gt;Androidå®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href="http://tutorials.jenkov.com/android/android-web-apps-using-android-webview.html"&gt;Android Web Apps Using Android WebView&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href="https://yq.aliyun.com/articles/32559"&gt;å²ä¸Šæœ€å…¨webviewè¯¦è§£&lt;/a&gt;  &lt;/p&gt;

&lt;p&gt;&lt;a href="http://bugly.qq.com/bbs/forum.php?mod=viewthread&amp;amp;tid=267"&gt;H5 ç¼“å­˜æœºåˆ¶æµ…æ ç§»åŠ¨ç«¯ Web åŠ è½½æ€§èƒ½ä¼˜åŒ– &lt;/a&gt;  &lt;/p&gt;

&lt;p&gt;&lt;a href="http://www.jianshu.com/p/427600ca2107"&gt;WebViewåŠ è½½é€Ÿåº¦ä¼˜åŒ–&lt;/a&gt;  &lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>å¸¸ç”¨æœ‰ç”¨çš„ Git Tips</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-08-25.html"/>
    <id>https://jiandanxinli.github.io/2016-08-25.html</id>
    <published>2016-08-25T08:00:00+08:00</published>
    <updated>2016-08-29T11:22:16+08:00</updated>
    <author>
      <name>fengd</name>
    </author>
    <content type="html">&lt;h3&gt;ç”¨å¥½Git Log&lt;/h3&gt;

&lt;p&gt;ä½ åº”è¯¥ç”¨è¿‡ git log, ä½†æ˜¯ log æ”¯æŒå¾ˆå¤šæœ‰ç”¨çš„å‚æ•°ä¹Ÿè®¸ä½ ä¸çŸ¥é“ï¼Œä¸‹é¢åˆ—å‡ºä¸€äº›æ¯”è¾ƒæœ‰ç”¨çš„&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;--author=&amp;quot;jack&amp;quot; : åªæ˜¾ç¤ºjackæäº¤çš„commit&lt;/li&gt;
&lt;li&gt;--name-only : åªæ˜¾ç¤ºæ”¹åŠ¨äº†çš„æ–‡ä»¶å&lt;/li&gt;
&lt;li&gt;--oneline : åœ¨ä¸€è¡Œå†…æ˜¾ç¤ºä¿¡æ¯&lt;/li&gt;
&lt;li&gt;--grath : æ˜¾ç¤ºä¸€äº›åˆ†æ”¯ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;--reverse : å€’åºæ˜¾ç¤ºcommits&lt;/li&gt;
&lt;li&gt;--after : æ˜¾ç¤ºè¿™ä¸ªæ—¶é—´ä¹‹åçš„commits&lt;/li&gt;
&lt;li&gt;--before : æ˜¾ç¤ºè¿™ä¸ªæ—¶é—´ä¹‹å‰çš„commits&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è¿™äº›å‚æ•°ç»„åˆèµ·æ¥æŒºæœ‰ç”¨çš„ï¼Œæ¯”å¦‚&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;git log --author="jack" --after="1 week ago" -- oneline
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;æŸ¥çœ‹è¿˜æ²¡æœ‰åˆå¹¶åˆ°Master/çˆ¶åˆ†ä¹‹ä¸­çš„æ”¹åŠ¨&lt;/h3&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;git log --no-merges masters..
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ä»å¦ä¸€ä¸ªåˆ†æ”¯ä¸­è·å–æ–‡ä»¶&lt;/h3&gt;

&lt;p&gt;å…ˆçœ‹å¦ä¸€ä¸ªåˆ†æ”¯çš„æŸä¸ªæ–‡ä»¶ï¼Œå…¶å®å¯ä»¥ä¸ç”¨åˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥ç›´æ¥æŸ¥çœ‹&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;git show some-branch:somefile.js
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¦‚æœä½ æƒ³å’ŒæŸä¸ªåˆ†æ”¯ä¸Šçš„ç‰ˆæœ¬è¿›è¡Œå¯¹æ¯”&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;git diff some-branch some-file.js
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;å…³äº rebasing&lt;/h3&gt;

&lt;p&gt;Rebaseå…¶å®æ¯”è¾ƒå¤æ‚ï¼Œå•ç‹¬å†™ä¸€ç¯‡æ–‡ç« éƒ½æœªå¿…è®²çš„æ¸…æ¥šæ˜ç™½, å½“æ—¶æœ‰ä¸€ä¸ªå¾ˆå®ç”¨çš„æŠ€å·§ä¸å¾—ä¸æ&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;`git pull --rebase`
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ˜¯ä»€ä¹ˆï¼Ÿ
å½“ä½ åœ¨æœ¬åœ°æ”¹å®Œï¼Œæƒ³è¦æŠŠä»£ç pushä¸Šå»ï¼Œå¦‚æœä¸»åˆ†æ”¯ä¸Šå·²ç»æœ‰æ”¹åŠ¨ï¼Œè¿™æ—¶å€™pushå¤±è´¥ï¼Œè€Œä¸”ä¼šæç¤ºä½ ä½¿ç”¨&lt;code&gt;git pull&lt;/code&gt; æ¥è·å–æœ€æ–°çš„ä»£ç , å’Œæœ¬åœ°çš„ä»£ç åˆå¹¶ï¼Œäº§ç”Ÿlog&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;&amp;gt; Merge remote-tracking branch 'origin/master'
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ—¶rebaseå°±æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œ&lt;code&gt;git pull --rebase&lt;/code&gt;, git ä¼šå…ˆä»remoteè·å–æœ€æ–°çš„ä»£ç ï¼Œç„¶ååœ¨pushæœ¬åœ°çš„æ”¹åŠ¨ï¼Œä¸ä¼šæœ‰mergeäº§ç”Ÿ.&lt;/p&gt;

&lt;h3&gt;ä¿®æ”¹ä¸Šä¸€ä¸ª Commit&lt;/h3&gt;

&lt;p&gt;å‘ç°åˆšåˆšæäº¤çš„Commitæœ‰ä¸€ä¸ªTypoæˆ–è€…å…¶å®ƒå¾ˆå°çš„æ”¹åŠ¨ï¼ŒWellï¼Œå½“ç„¶å¯ä»¥æäº¤ä¸ªæ–°çš„Commitï¼Œ ç„¶ålogå†™ä¸Š â€œfix typoâ€.&lt;/p&gt;

&lt;p&gt;å½“æ—¶å…¶å®åº”è¯¥è¿™ä¹ˆåšï¼Œ&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Fix Typo&lt;/li&gt;
&lt;li&gt;Stage è¿™ä¸ªæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œ &lt;code&gt;git commit --amend&lt;/code&gt; è¿™ä¼šæŠŠè¿™ä¸€æ¬¡çš„æ”¹åŠ¨æäº¤åˆ°ä¸Šä¸€ä¸ªCommitä¸­&lt;/li&gt;
&lt;li&gt;Push&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;Gitçš„ä¸‰ä¸ªçŠ¶æ€ï¼Œä¸‰ä¸ªçŠ¶æ€ä¹‹é—´å¦‚ä½•åˆ‡æ¢&lt;/h3&gt;

&lt;h4&gt;ä¸‰ä¸ªçŠ¶æ€ï¼š&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;æ²¡æœ‰Staged, æ²¡æœ‰æ‰§è¡Œ&lt;code&gt;git add&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Staged, å½“æ—¶æ²¡æœ‰Commitçš„ï¼Œ æ‰§è¡Œäº† &lt;code&gt;git add&lt;/code&gt; , å½“æ—¶æ²¡æœ‰æ‰§è¡Œ &lt;code&gt;git commit&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Commitçš„, æ‰§è¡Œäº† &lt;code&gt;git commit&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç”¨ &lt;code&gt;git status&lt;/code&gt; å¯ä»¥æŸ¥çœ‹å¤„åœ¨1ï¼Œ 2çŠ¶æ€çš„æ–‡ä»¶&lt;/p&gt;

&lt;h4&gt;å¦‚ä½•åœ¨ä¸‰ä¸ªçŠ¶æ€ä¹‹é—´åˆ‡æ¢&lt;/h4&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;git reset --head {{some-commit-hash}}&lt;/code&gt; è¿”å›åˆ°æŸä¸€ä¸ªCommitï¼Œ æ‰€æœ‰è¿™ä¸ªcommitä¹‹åçš„æ”¹åŠ¨éƒ½ä¸¢å¼ƒ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;git reset {{some-commit-hash}}&lt;/code&gt; è¿”å›åˆ°æŸä¸€ä¸ªcommitï¼Œæ‰€æœ‰è¿™ä¸ªcommitä¹‹åçš„æ”¹åŠ¨éƒ½å½’åˆ°çŠ¶æ€1ï¼Œ æ²¡æœ‰stagedï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;git reset --soft {{some-commit-hash}}&lt;/code&gt; è¿”å›åˆ°æŸä¸€ä¸ªcommitï¼Œ è¿™ä¸ªcommitä¹‹åçš„æ”¹åŠ¨éƒ½å½’åˆ°çŠ¶æ€2&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æœ€å¸¸ç”¨çš„ä¸€ä¸ªå¯èƒ½æ˜¯ç¬¬ä¸€ä¸ª, æ”¾å¼ƒæœ¬åœ°æ‰€æœ‰çš„æ”¹åŠ¨&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;git reset --hard HEAD
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;Revert Commit&lt;/h3&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;git revert -n
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å–æ¶ˆä¹‹å‰çš„Commit&lt;/p&gt;

&lt;h3&gt;ä¸ºå¸¸ç”¨çš„gitå‘½ä»¤è®¾ç½®åˆ«å&lt;/h3&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;git l = git log --online --grath
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç­‰ç­‰ç­‰ç­‰&lt;/p&gt;

&lt;p&gt;æ¥è‡ªæ–‡ç«  &lt;a href="http://www.alexkras.com/19-git-tips-for-everyday-use/"&gt;Top 19 Tips For everyday git use&lt;/a&gt;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>CSS å‘½åè§„èŒƒæ€»ç»“</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-08-11.html"/>
    <id>https://jiandanxinli.github.io/2016-08-11.html</id>
    <published>2016-08-11T08:00:00+08:00</published>
    <updated>2016-08-11T20:05:39+08:00</updated>
    <author>
      <name>zangbianxuegu</name>
    </author>
    <content type="html">&lt;p&gt;é¦–å…ˆï¼Œè¿™æ˜¯ä¸€ç¯‡ä»…å¯¹ CSS å‘½åçš„æ€»ç»“ï¼Œæ›´å¤š CSS è§„èŒƒè¯·å‚è€ƒè§„èŒƒæ–‡æ¡£ã€‚å…¶æ¬¡ CSS å‘½åå¹¶æ— å¯¹é”™ä¹‹åˆ†ï¼Œåªæ˜¯ä¸åŒçš„å‘½åæ–¹å¼å’Œä»£ç çš„ä¼˜é›…ç¨‹åº¦ä¸åæœŸç»´æŠ¤æœ‰ç€å¯†åˆ‡å…³ç³»ã€‚&lt;/p&gt;

&lt;blockquote class="twitter-tweet" data-lang="zh-cn"&gt;&lt;p lang="und" dir="ltr"&gt;&lt;a href="https://twitter.com/iamdevloper"&gt;@iamdevloper&lt;/a&gt; &lt;a href="https://t.co/4SRgVDDaiC"&gt;pic.twitter.com/4SRgVDDaiC&lt;/a&gt;&lt;/p&gt;&amp;mdash; Saeed Prez (@SaeedPrez) &lt;a href="https://twitter.com/SaeedPrez/status/753731421525700608"&gt;2016å¹´7æœˆ14æ—¥&lt;/a&gt;&lt;/blockquote&gt;

&lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

&lt;p&gt;CSS å¾ˆå®¹æ˜“å†™ï¼Œä½†æ˜¯ç»´æŠ¤å®ƒå´å¾ˆéš¾ï¼Œå› ä¸º CSS å£°æ˜å±æ€§çš„æ€§è´¨ä¸å…·å¤‡ç¼–ç¨‹è¯­è¨€æµç¨‹æ§åˆ¶çš„ç‰¹ç‚¹ï¼ŒCSS(Cascading Style Sheets)ä¹Ÿå¯ä»¥å±‚å ç”Ÿæ•ˆï¼Œä¸åŒåœ°æ–¹çš„ classes ç›¸äº’å½±å“ã€‚CSS å‘½åæ˜¯è§„èŒƒä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå®ƒå‡ ä¹å°±æ˜¯ CSS è§„èŒƒçš„å…¨éƒ¨ï¼Œæˆ‘ä»¬ä¹Ÿå°±æ˜¯ä¾èµ–å®ƒå®Œæˆå¯¹ CSS çš„æ§åˆ¶ã€‚&lt;/p&gt;

&lt;h2&gt;åˆ†ç¦»&lt;/h2&gt;

&lt;p&gt;æ›¾ç»æˆ‘ä»¬è¿™æ ·å®šä¹‰é€‰æ‹©å™¨ï¼š&lt;/p&gt;
&lt;pre class="highlight sass"&gt;&lt;code&gt;&lt;span class="nc"&gt;.fl&lt;/span&gt;
  &lt;span class="nl"&gt;float&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;left&lt;/span&gt;

&lt;span class="nc"&gt;.fr&lt;/span&gt;
  &lt;span class="nl"&gt;float&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;right&lt;/span&gt;

&lt;span class="nc"&gt;.mr10&lt;/span&gt;
  &lt;span class="nl"&gt;margin-right&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;10px&lt;/span&gt;

&lt;span class="nc"&gt;.pb10&lt;/span&gt;
  &lt;span class="nl"&gt;padding-bottom&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;10px&lt;/span&gt;

&lt;span class="nc"&gt;.hidden&lt;/span&gt;
  &lt;span class="nl"&gt;overflow&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;hidden&lt;/span&gt;

&lt;span class="nc"&gt;.highlight&lt;/span&gt;
  &lt;span class="nl"&gt;color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nv"&gt;$green&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åœ¨ html ä¸­æ·»åŠ é€‰æ‹©å™¨ï¼š&lt;/p&gt;
&lt;pre class="highlight sass"&gt;&lt;code&gt;&lt;span class="nc"&gt;.fl.pb10.highlight&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™å°±æ˜¯è§„åˆ™åˆ†ç¦»çš„åšæ³•ï¼Œå°†ä¸€äº›ç¡®å®šå€¼çš„ CSS è§„åˆ™å•ç‹¬å®šä¹‰é€‰æ‹©å™¨ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯æé«˜ä»£ç çš„é‡ç”¨ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¾ˆå¤šç¼ºç‚¹ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¯ä¾›åˆ†ç¦»çš„å±æ€§æœ‰é™ï¼Œè¿˜æœ‰å¾ˆå¤šä¸ç¡®å®šå€¼çš„å±æ€§ï¼Œæ¯”å¦‚ widthã€colorï¼Œè€Œä¸”ç°å®å¸ƒå±€çš„å¤šæ ·æ€§ä½¿ mr10 è¿™æ ·çš„åˆ†ç¦»ä¹Ÿå¾ˆå°‘ç”¨åˆ°ï¼Œå› æ­¤æ— æ³•åšåˆ°å½»åº•åˆ†ç¦»ï¼›&lt;/li&gt;
&lt;li&gt;åˆ†ç¦»ä¹‹åå¯¼è‡´ html ä¸­ class ç‰¹åˆ«å¤šï¼Œè€Œä¸”ä¸å…·æœ‰è¯­ä¹‰åŒ–ï¼›&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ—¢ç„¶è¿˜æ˜¯éœ€è¦æ·»åŠ è¯­ä¹‰åŒ–çš„ class æ¥å®šä¹‰ä¸€éƒ¨åˆ†æ ·å¼ï¼Œé‚£ä¹ˆåˆ†ç¦»ä¸€éƒ¨åˆ†å‡ºå»ä¹Ÿæ²¡æœ‰æ„ä¹‰ï¼Œæ“ä½œä¸Šç¼ºç‚¹è¿œè¿œå¤§äºä¼˜ç‚¹ã€‚å¸å–è¿™ç§å‘½åçš„ä¼˜ç‚¹ï¼Œç°åœ¨ä¾ç„¶ä¼šä½¿ç”¨å®ƒï¼Œä½†æ˜¯åªä¿ç•™äº†å°‘æ•°è¯­ä¹‰åŒ–ä¸”å¸¸ç”¨çš„ï¼Œä¾‹å¦‚ï¼š&lt;code&gt;.hidden&lt;/code&gt;ã€&lt;code&gt;.highlight&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2&gt;ä¸å¥½çš„å†™æ³•&lt;/h2&gt;

&lt;p&gt;htmlï¼š&lt;/p&gt;
&lt;pre class="highlight slim"&gt;&lt;code&gt;&lt;span class="nc"&gt;.container&lt;/span&gt;
  &lt;span class="nc"&gt;.actions&lt;/span&gt;
    &lt;span class="nc"&gt;.card_wrapper&lt;/span&gt;
      &lt;span class="nc"&gt;.card&lt;/span&gt;
        &lt;span class="nc"&gt;.title.light&lt;/span&gt;
        &lt;span class="nc"&gt;.content&lt;/span&gt;
          &lt;span class="nc"&gt;.list&lt;/span&gt;
            &lt;span class="nt"&gt;i&lt;/span&gt;&lt;span class="nc"&gt;.fa.fa-cog&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;CSSï¼š&lt;/p&gt;
&lt;pre class="highlight sass"&gt;&lt;code&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="nc"&gt;.events&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="nc"&gt;.aaa&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="nc"&gt;.bbb&lt;/span&gt;

  &lt;span class="nc"&gt;.actions&lt;/span&gt;

    &lt;span class="nc"&gt;.card_wrapper&lt;/span&gt;

      &lt;span class="nc"&gt;.card&lt;/span&gt;

        &lt;span class="nc"&gt;.title&lt;/span&gt;

        &lt;span class="nc"&gt;.content&lt;/span&gt;

          &lt;span class="nc"&gt;.list&lt;/span&gt;

            &lt;span class="nc"&gt;.fa&lt;/span&gt;

    &lt;span class="nc"&gt;.another&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šæ˜¯æˆ‘ä»¬ç°åœ¨å¸¸è§çš„å†™æ³•ï¼Œä½†æ˜¯æ˜¯éœ€è¦ç»å¯¹é¿å…çš„ï¼Œè™½ç„¶ class æœ‰ä¸€å®šè¯­ä¹‰äº†ï¼Œä½†æ˜¯å¹¶ä¸èƒ½çœŸæ­£çš„é‡ç”¨ã€‚class å‘½åå¤ªé€šç”¨äº†ï¼Œæˆ‘ä»¬ä¸çŸ¥é“è¿˜æœ‰ä»€ä¹ˆåœ°æ–¹ç”¨åˆ° &lt;code&gt;.title&lt;/code&gt; &lt;code&gt;.content&lt;/code&gt; è¿™æ ·çš„å‘½åï¼Œå°±ä¸æ•¢ç›´æ¥ä½¿ç”¨ï¼Œä¸€æ–¹é¢å±‚å±‚åµŒå¥—é˜²æ­¢å†²çªï¼Œä¸€æ–¹é¢æƒ³è¦é‡ç”¨æ—¶å°±åœ¨é¡¶å±‚æ·»åŠ  &lt;code&gt;body.aaa&lt;/code&gt; è¿™æ ·çš„ä¸œè¥¿ï¼Œå¯¼è‡´å¾ˆå¤šæ ·å¼ç”¨ä¸åˆ°ï¼Œå†™çš„ä¹±ä¸ƒå…«ç³Ÿã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ ·ä¸€ç›´å†™ä¸‹å»ï¼Œæ—§çš„ CSS æˆ‘ä»¬æ°¸è¿œä¸ä¼šåˆ ï¼Œåªæ•·è¡å†™å‡ºæ•ˆæœï¼Œå¦‚æ­¤å¾€å¤å¾ªç¯ï¼Œæœ€ç»ˆå°±ä¼šåƒä¸Šé¢çš„çª—å¸˜ï¼Œè®©äººå¿æ— å¯å¿ã€‚æ¯ä¸ªé¡µé¢éƒ½æœ‰ &lt;code&gt;.content&lt;/code&gt; ç”šè‡³æ¯ä¸ªæ¨¡å—éƒ½æœ‰ &lt;code&gt;.content&lt;/code&gt;ï¼Œ&lt;code&gt;.content&lt;/code&gt; å°±æ¯«æ— æ„ä¹‰ï¼ˆ.content ä¸æ˜¯æŠ½è±¡åŒ–çš„å…¨å±€å…±ç”¨æ¨¡å—ï¼‰ã€‚æ·±å±‚æ¬¡çš„åµŒå¥—ä¹Ÿä¼šé™ä½æ¸²æŸ“æ•ˆç‡ã€‚&lt;/p&gt;

&lt;p&gt;å¦ä¸€ç§å¸¸è§çš„ï¼š&lt;/p&gt;

&lt;p&gt;htmlï¼š&lt;/p&gt;
&lt;pre class="highlight slim"&gt;&lt;code&gt;&lt;span class="nc"&gt;.main-news-box&lt;/span&gt;
  &lt;span class="nt"&gt;h2&lt;/span&gt;&lt;span class="nc"&gt;.news-title&lt;/span&gt;
  &lt;span class="nt"&gt;ul&lt;/span&gt;&lt;span class="nc"&gt;.main-news-list&lt;/span&gt;
    &lt;span class="nt"&gt;li&lt;/span&gt;
      &lt;span class="nt"&gt;a&lt;/span&gt;
        &lt;span class="nt"&gt;span&lt;/span&gt;
        &lt;span class="nt"&gt;span&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;CSSï¼š&lt;/p&gt;
&lt;pre class="highlight sass"&gt;&lt;code&gt;&lt;span class="nc"&gt;.main-news-box&lt;/span&gt;

&lt;span class="nc"&gt;.main-news-box&lt;/span&gt; &lt;span class="nc"&gt;.news-title&lt;/span&gt;

&lt;span class="nc"&gt;.main-news-list&lt;/span&gt;

&lt;span class="nc"&gt;.main-news-list&lt;/span&gt; &lt;span class="nt"&gt;li&lt;/span&gt;

&lt;span class="nc"&gt;.main-news-list&lt;/span&gt; &lt;span class="nt"&gt;a&lt;/span&gt;

&lt;span class="nc"&gt;.main-news-list&lt;/span&gt; &lt;span class="nt"&gt;span&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ç§å†™æ³•çš„é—®é¢˜ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;.news-title&lt;/code&gt; åœ¨åˆ«çš„åœ°æ–¹æœ‰æ²¡æœ‰å®šä¹‰ï¼Ÿèƒ½ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Ÿå…¶ä»–åœ°æ–¹å®šä¹‰çš„ &lt;code&gt;.news-title&lt;/code&gt; ä¼šç›¸äº’å½±å“ï¼Œçˆ¶çº§æ›´æ·±å±‚æ¬¡çš„ &lt;code&gt;li&lt;/code&gt;ã€&lt;code&gt;a&lt;/code&gt; ä¹Ÿä¼šè¦†ç›–ç°æœ‰çš„å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;è¿™ç§å‘½åä¹Ÿæœ‰æ€§èƒ½é—®é¢˜ï¼ŒCSS ä»å³å‘å·¦æ¸²æŸ“ï¼Œä¾‹å¦‚ &lt;code&gt;.main-news-list a&lt;/code&gt;ï¼Œå…ˆæ¸²æŸ“é¡µé¢æ‰€æœ‰çš„ aï¼Œå†æ¸²æŸ“ .main-news-listã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;BEM å‘½å&lt;/h2&gt;

&lt;p&gt;BEM æ˜¯ä¸€ç§çœŸæ­£æ¶ˆé™¤ä¸ç¡®å®šæ€§çš„å‘½åæ–¹å¼ï¼Œå®ƒä½¿å¾—ç»“æ„æ ·å¼æ›´åŠ æ¸…æ™°ï¼Œæˆ‘ä»¬æœ‰è¶³å¤Ÿçš„ä¿¡å¿ƒåšä»»ä½•ä¿®æ”¹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;blockï¼šæ¨¡å—ï¼Œåå­—å•è¯é—´ç”¨ &lt;code&gt;-&lt;/code&gt; è¿æ¥&lt;/li&gt;
&lt;li&gt;elementï¼šå…ƒç´ ï¼Œæ¨¡å—çš„å­å…ƒç´ ï¼Œä»¥ &lt;code&gt;__&lt;/code&gt; ä¸ block è¿æ¥&lt;/li&gt;
&lt;li&gt;modifierï¼šä¿®é¥°ï¼Œæ¨¡å—çš„å˜ä½“ï¼Œå®šä¹‰ç‰¹æ®Šæ¨¡å—ï¼Œä»¥ &lt;code&gt;--&lt;/code&gt; ä¸ block è¿æ¥&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre class="highlight slim"&gt;&lt;code&gt;&lt;span class="nc"&gt;.user-home-nav&lt;/span&gt;
  &lt;span class="nc"&gt;.user-home-nav-item.user-home-nav-item--small&lt;/span&gt;
    &lt;span class="nc"&gt;.user-home-nav-item__icon&lt;/span&gt;
    &lt;span class="nc"&gt;.user-home-nav-item__text&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;CSS ä¸­è¿™æ ·å†™ï¼š&lt;/p&gt;
&lt;pre class="highlight sass"&gt;&lt;code&gt;&lt;span class="nc"&gt;.user-home-nav&lt;/span&gt;

  &lt;span class="k"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nt"&gt;-item&lt;/span&gt;

    &lt;span class="k"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nt"&gt;--small&lt;/span&gt;

    &lt;span class="k"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nt"&gt;__icon&lt;/span&gt;

    &lt;span class="k"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nt"&gt;__text&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ ·å‘½åçš„å¥½å¤„ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;è¯­ä¹‰åŒ–ï¼Œæ­¤å¤„çš„è¯­ä¹‰åŒ–ä¸æ˜¯æŒ‡ html æ ‡ç­¾çš„è¯­ä¹‰åŒ–ï¼Œå¯¹ SEO å¯èƒ½ä¹Ÿæ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œä½†æ˜¯è¿™æ˜¯ä¸€ç§äººé˜…è¯»çš„è¯­ä¹‰åŒ–ã€‚è¯­ä¹‰åŒ–çš„é‡è¦æ„ä¹‰ï¼šå®å¯å¢åŠ  html å¤§å°ï¼ŒåŠ›å›¾ä½¿ç»´æŠ¤å˜å¾—è½»æ¾ã€‚&lt;/li&gt;
&lt;li&gt;å‡å°‘å±‚å±‚åµŒå¥—ï¼Œæœ‰åˆ©äºæ¸²æŸ“æ•ˆç‡ã€‚ä»¥ä¸Š sass è§£æä¹‹åå°±æ˜¯ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="highlight sass"&gt;&lt;code&gt;&lt;span class="nc"&gt;.user-home-nav&lt;/span&gt;

&lt;span class="nc"&gt;.user-home-nav-item&lt;/span&gt;

&lt;span class="nc"&gt;.user-home-nav-item__icon&lt;/span&gt;

&lt;span class="nc"&gt;.user-home-nav-item__text&lt;/span&gt;

&lt;span class="nc"&gt;.user-home-nav-item--small&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç¼ºç‚¹ï¼Ÿ&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æœ‰äººè¯´åˆæ˜¯ &lt;code&gt;__&lt;/code&gt; åˆæ˜¯ &lt;code&gt;--&lt;/code&gt;ï¼Œä»€ä¹ˆä¹±ä¸ƒå…«ç³Ÿçš„ç¬¦å·ï¼Œæˆ‘å¹¶ä¸è§‰å¾—æœ‰ä»»ä½•é—®é¢˜ï¼Œè¿™ç§å‘½åè®©ç»“æ„ååˆ†æ¸…æ™°ï¼Œåªçœ‹ html æˆ– CSS å°±èƒ½çœ‹å‡ºå®ƒå¯¹åº”çš„æ¨¡å—æˆ–è€…æ¨¡å—çš„å…ƒç´ æˆ–è€…ä¸åŒç±»å‹çš„æ¨¡å—ï¼ŒåæœŸç»´æŠ¤çš„å¢åˆ ä¹Ÿååˆ†ç¡®å®šã€‚&lt;/li&gt;
&lt;li&gt;é•¿é•¿çš„ class åå¢åŠ äº† html çš„å­—èŠ‚ã€‚ä»åŠ è½½é€Ÿåº¦ä¸Šæ¥è¯´ï¼Œå½“ç„¶æ˜¯åå­—è¶ŠçŸ­è¶Šå¥½ã€‚ä½†æ˜¯è¿™ä¸ªå¯¹åº”çš„å°±æ˜¯è¯­ä¹‰åŒ–ï¼Œå–èˆä¸Šæˆ‘æ›´å€¾å‘äºè¯­ä¹‰åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;BEM çš„é—®é¢˜&lt;/h2&gt;

&lt;p&gt;ä½†æ˜¯ BEM æœ€å¤§çš„é—®é¢˜å´æ˜¯è¿™ä¸ªï¼šå¦‚ä½•ç»™ modifier ä¸‹çš„ element å®šä¹‰è§„åˆ™å‘¢ï¼Ÿ&lt;/p&gt;
&lt;pre class="highlight sass"&gt;&lt;code&gt;&lt;span class="nc"&gt;.user-home-nav&lt;/span&gt;

  &lt;span class="k"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nt"&gt;-item&lt;/span&gt;

    &lt;span class="k"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nt"&gt;--small&lt;/span&gt;

      &lt;span class="nc"&gt;.user-home-nav__icon&lt;/span&gt;

      &lt;span class="nc"&gt;.user-home-nav__text&lt;/span&gt;

    &lt;span class="k"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nt"&gt;__icon&lt;/span&gt;

    &lt;span class="k"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nt"&gt;__text&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ ·åšå¤ªä¸ä¼˜é›…äº†ï¼Œå¤ªè¿èƒŒ sass çš„ä¼˜é›…æ€§è´¨äº†ã€‚æˆ–è®¸æ˜¯æˆ‘æ²¡æœ‰æ‰¾åˆ°æ›´å¥½çš„å†™æ³•ï¼Ÿ&lt;/p&gt;

&lt;p&gt;è¿˜èƒ½äº§ç”Ÿæ›´å¤šçš„å†™æ³•ï¼Œä¾‹å¦‚ &lt;code&gt;.user-home-nav-item--small__icon&lt;/code&gt; ã€&lt;code&gt;.user-home-nav-item__icon--small&lt;/code&gt;ï¼Œä½†æ˜¯æˆ–å¤šæˆ–å°‘ä¼šå­˜åœ¨é—®é¢˜ï¼Œè¿˜æ˜¯å°½é‡ä¿æŒç®€å•ã€‚&lt;/p&gt;

&lt;p&gt;å…¶ä»–é—®é¢˜ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;å¦‚ä½•ç¡®å®šä¸€ä¸ª blockï¼Ÿå°±åƒä¸Šé¢ &lt;code&gt;.user-home-nav-item&lt;/code&gt; ä¹Ÿå¯ä»¥å†™æˆ &lt;code&gt;.user-home-nav__item&lt;/code&gt;ï¼Œå¦‚æœ item ä¸‹æœ‰ titleï¼Œé‚£ä¹ˆå°±æ˜¯ &lt;code&gt;.user-home-nav__title&lt;/code&gt;ï¼Œä»¥é¿å…å†™æˆ &lt;code&gt;.user-home-nav__item__title&lt;/code&gt;ï¼Œä½†æ˜¯å¦‚æœ nav å·²æœ‰ title &lt;code&gt;.user-home-nav__title&lt;/code&gt; äº†ï¼Œæˆ–è®¸æˆ‘ä»¬è¦æŠŠ item ä¸‹çš„ title å†™æˆ &lt;code&gt;.user-home-nav__item-title&lt;/code&gt;ï¼Œæ€»ä¹‹ä¸ºäº†ä½¿ BEM ä¹Ÿä¸è‡³äºå¤æ‚åŒ–ï¼Œå‘½åä¸Šä¹Ÿè®¸è¿˜æ˜¯è¦çº ç»“ä¸€ç•ªã€‚æ‰€ä»¥æˆ‘æœ€ç»ˆå†™æˆäº† &lt;code&gt;.user-home-nav-item&lt;/code&gt;ï¼Œä¹Ÿè®¸å¯ä»¥è¿™ä¹ˆå†™ä¸‹å»ï¼Œæ²¡æœ‰ B å’Œ Mï¼Œtrello è²Œä¼¼å°±æ˜¯è¿™æ ·ï¼Œä¾‹å¦‚ï¼š&lt;code&gt;.attachment-thumbnail-details-options-item-text&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;BEM å¯¼è‡´ CSS è§„åˆ™é‡ç”¨æ€§é™ä½ï¼Œå¦‚æœé‡ç”¨å°½é‡è€ƒè™‘å†™æˆé€šç”¨æ¨¡å—.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;BEM + å‘½åç©ºé—´&lt;/h2&gt;

&lt;p&gt;å‘½åç©ºé—´å®šä¹‰ block é—´çš„å…³ç³»ï¼Œè¿™ç§æ–¹å¼ç½‘ç«™ä¸Šè¿˜æ²¡æœ‰å¤§èŒƒå›´ä½¿ç”¨ï¼Œæœ€å¸¸è§çš„å¦‚ &lt;code&gt;.jsï¼&lt;/code&gt; è¡¨ç¤ºå®šä¹‰ JavaScript é’©å­ï¼Œä¸ç”¨äºå®šä¹‰æ ·å¼ã€‚å¸¸è§å‘½åç©ºé—´ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;o-ï¼šè¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ï¼ˆObjectï¼‰ï¼Œå¦‚ &lt;code&gt;.o-layout&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;c-ï¼šè¡¨ç¤ºä¸€ä¸ªç»„ä»¶ï¼ˆComponentï¼‰ï¼ŒæŒ‡ä¸€ä¸ªå…·ä½“çš„ã€ç‰¹å®šå®ç°çš„ UIã€‚å¦‚ &lt;code&gt;.c-avatar&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;u-ï¼šè¡¨ç¤ºä¸€ä¸ªé€šç”¨å·¥å…·ï¼ˆUtilityï¼‰ï¼Œå¦‚ &lt;code&gt;.u-hidden&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;t-ï¼šè¡¨ç¤ºä¸€ä¸ªä¸»é¢˜ï¼ˆThemeï¼‰ï¼Œå¦‚ &lt;code&gt;.t-light&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;s-ï¼šè¡¨ç¤ºä¸€ä¸ªä¸Šä¸‹æ–‡æˆ–ä½œç”¨åŸŸï¼ˆScopeï¼‰ï¼Œå¦‚ &lt;code&gt;.s-cms-content&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;is-ï¼Œhas-ï¼šè¡¨ç¤ºä¸€ç§çŠ¶æ€æˆ–æ¡ä»¶æ ·å¼ã€‚å¦‚ &lt;code&gt;.is-active&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;ï¼šè¡¨ç¤ºä¸€ä¸ª hackï¼Œå¦‚ `.&lt;/em&gt;important`ã€‚&lt;/li&gt;
&lt;li&gt;js-ï¼šè¡¨ç¤ºä¸€ä¸ª JavaScript é’©å­ã€‚å¦‚ &lt;code&gt;.js-modal&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;qa-ï¼šè¡¨ç¤ºæµ‹è¯•é’©å­ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¾‹å¦‚ä¸€ä¸ªåœ†å½¢å¤´åƒç»„ä»¶ï¼š&lt;/p&gt;
&lt;pre class="highlight sass"&gt;&lt;code&gt;&lt;span class="nc"&gt;.c-avatar-circle&lt;/span&gt;

  &lt;span class="k"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nt"&gt;__img&lt;/span&gt;
    &lt;span class="nl"&gt;display&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;block&lt;/span&gt;
    &lt;span class="nl"&gt;vertical-align&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;top&lt;/span&gt;
    &lt;span class="nl"&gt;max-width&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;100%&lt;/span&gt;
    &lt;span class="nl"&gt;border-radius&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;100%&lt;/span&gt;

  &lt;span class="k"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nt"&gt;__name&lt;/span&gt;
    &lt;span class="nl"&gt;text-align&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;center&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šï¼ŒBEM äº§ç”Ÿçš„é‡ç”¨æ€§é—®é¢˜è¿˜æ˜¯æ²¡æœ‰è§£å†³ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ&lt;/p&gt;

&lt;h2&gt;æ¨¡å—&lt;/h2&gt;

&lt;p&gt;æ¨¡å—åŒ–ç±»ä¼¼äºåˆ†ç¦»çš„æ¦‚å¿µï¼Œä¹Ÿæ˜¯åˆ†ç¦»è¿›åŒ–çš„ç»“æœï¼Œæˆ‘ä»¬ä»åˆ†ç¦»ä¸­æå–å‡º &lt;code&gt;.hidden {overflow: hidden}&lt;/code&gt; è¿™æ ·çš„å‘½åï¼Œè¿›è€Œæ‰©å±• &lt;code&gt;.avatar {}&lt;/code&gt; è¿™æ ·çš„å‘½åï¼Œä¸å†åªåŒ…å«ä¸€æ¡è§„åˆ™ã€‚çœ‹ä¸€ä¸‹ airbnb çš„åœ†å½¢å¤´åƒå†™æ³•ï¼š&lt;/p&gt;

&lt;p&gt;htmlï¼š&lt;/p&gt;
&lt;pre class="highlight slim"&gt;&lt;code&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="nc"&gt;.pull-right.media-photo-badge.card-profile-picture.card-profile-picture-offset.is-superhost&lt;/span&gt;
  &lt;span class="nc"&gt;.media-photo.media-round&lt;/span&gt;
    &lt;span class="nt"&gt;img&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;CSSï¼š&lt;/p&gt;
&lt;pre class="highlight sass"&gt;&lt;code&gt;&lt;span class="nc"&gt;.card-profile-picture&lt;/span&gt;
  &lt;span class="nl"&gt;width&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;60px&lt;/span&gt;
  &lt;span class="nl"&gt;height&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;60px&lt;/span&gt;

  &lt;span class="k"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nt"&gt;-offset&lt;/span&gt;
    &lt;span class="nl"&gt;position&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;relative&lt;/span&gt;
    &lt;span class="nl"&gt;top&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;-40px&lt;/span&gt;
    &lt;span class="nl"&gt;margin-bottom&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;-40px&lt;/span&gt;

  &lt;span class="k"&gt;&amp;amp;&lt;/span&gt;&lt;span class="nc"&gt;.is-superhost&lt;/span&gt;
    &lt;span class="nl"&gt;position&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;relative&lt;/span&gt;

  &lt;span class="nt"&gt;img&lt;/span&gt;
    &lt;span class="nl"&gt;width&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;56px&lt;/span&gt;
    &lt;span class="nl"&gt;height&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;56px&lt;/span&gt;

&lt;span class="nc"&gt;.media-photo&lt;/span&gt;
  &lt;span class="nl"&gt;backface-visibility&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;hidden&lt;/span&gt;
  &lt;span class="nl"&gt;position&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;relative&lt;/span&gt;
  &lt;span class="nl"&gt;display&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;inline-block&lt;/span&gt;
  &lt;span class="nl"&gt;vertical-align&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;bottom&lt;/span&gt;
  &lt;span class="nl"&gt;overflow&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;hidden&lt;/span&gt;
  &lt;span class="nl"&gt;background-color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mh"&gt;#bbb&lt;/span&gt;

&lt;span class="nc"&gt;.media-round&lt;/span&gt;
  &lt;span class="nl"&gt;border-radius&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;50%&lt;/span&gt;
  &lt;span class="nl"&gt;border&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="m"&gt;2px&lt;/span&gt; &lt;span class="nb"&gt;solid&lt;/span&gt; &lt;span class="mh"&gt;#fff&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯æ¯”è¾ƒå¤æ‚ï¼Œç›¸å¯¹ç‰¹ä¾‹çš„ã€‚&lt;code&gt;.media-photo&lt;/code&gt; å’Œ &lt;code&gt;.media-round&lt;/code&gt; æ˜¯å…¸å‹çš„æŠ½è±¡å‡ºæ¥çš„æ¨¡å—ï¼Œä¸€ä¸ªå®šä¹‰ç…§ç‰‡çš„åŸºæœ¬å±æ€§ï¼Œä¸€ä¸ªå®šä¹‰åœ†å½¢å±æ€§ã€‚&lt;code&gt;.card-profile-picture&lt;/code&gt; æ˜¯ç‰¹å®šçš„å‘½åå®šä¹‰ç‰¹å®šå…·ä½“çš„å€¼ã€‚&lt;/p&gt;

&lt;h2&gt;æ€»ç»“&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;åŸºæœ¬ï¼šä»¥è‹±æ–‡å•è¯å‘½åï¼Œé¿å…æ— æ„ä¹‰çš„ç¼©å†™ï¼Œä»¥ &lt;code&gt;-&lt;/code&gt; è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘åœ¨ä¸€å¼€å§‹ä½¿ç”¨ BEM çš„æ—¶å€™ï¼Œä¹Ÿæœ‰å¾ˆå¤šç–‘æƒ‘ï¼Œè€Œä¸”ç°åœ¨ä¹Ÿä¸ç¡®å®šå®ƒå®Œå¤‡çš„ç”¨æ³•ã€‚&lt;/li&gt;
&lt;li&gt;BEM ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œä½†æ˜¯æ— è®ºå¦‚ä½• BEM æ˜¯åº”è¯¥ä½¿ç”¨çš„æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;å‘½åç©ºé—´ç»™ CSS å‘½åæä¾›æ›´å¤šä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;å®šä¹‰æ¨¡å—æé«˜ä»£ç çš„é‡ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;CSS å‘½åè¦æ±‚ï¼šè¯­ä¹‰åŒ–æ˜“äºç†è§£ï¼Œå¯é‡ç”¨æ€§é«˜ï¼ŒåæœŸç»´æŠ¤å®¹æ˜“ï¼ŒåŠ è½½æ¸²æŸ“å¿«ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;å‚è€ƒæ–‡ç« &lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.zhangxinxu.com/wordpress/2010/09/%E7%B2%BE%E7%AE%80%E9%AB%98%E6%95%88%E7%9A%84css%E5%91%BD%E5%90%8D%E5%87%86%E5%88%99%E6%96%B9%E6%B3%95/"&gt;ç²¾ç®€é«˜æ•ˆçš„CSSå‘½åå‡†åˆ™/æ–¹æ³•&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://csswizardry.com/2013/01/mindbemding-getting-your-head-round-bem-syntax/"&gt;MindBEMding â€“ getting your head â€™round BEM syntax&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://csswizardry.com/2015/03/more-transparent-ui-code-with-namespaces/"&gt;More Transparent UI Code with Namespaces&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://css-tricks.com/bem-101/"&gt;BEM 101&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://cssguidelin.es/"&gt;CSS Guidelines&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
  </entry>
  <entry>
    <title>Express - ç®€å•ä»‹ç» Express</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-08-09.html"/>
    <id>https://jiandanxinli.github.io/2016-08-09.html</id>
    <published>2016-08-09T08:00:00+08:00</published>
    <updated>2016-08-10T10:40:30+08:00</updated>
    <author>
      <name>lei.wang</name>
    </author>
    <content type="html">&lt;p&gt;express æ˜¯ &lt;strong&gt;Node.js&lt;/strong&gt; ä¸Šæœ€æµè¡Œçš„ Web å¼€å‘æ¡†æ¶ï¼Œä½¿ç”¨å®ƒæˆ‘ä»¬å¯ä»¥å¿«é€Ÿçš„å¼€å‘ä¸€ä¸ª Web åº”ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;å®‰è£… express å‘½ä»¤è¡Œå·¥å…·ï¼Œä½¿ç”¨å®ƒæˆ‘ä»¬å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ª express é¡¹ç›®ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src="https://cloud.githubusercontent.com/assets/6661673/17502822/ba3929ca-5e1d-11e6-9aae-ed48653b03cc.jpg" alt="express" /&gt;&lt;/p&gt;

&lt;h2&gt;æ–°å»ºä¸€ä¸ªé¡¹ç›®&lt;/h2&gt;

&lt;p&gt;æ‰§è¡Œ &lt;code&gt;express -e blog&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src="https://cloud.githubusercontent.com/assets/6661673/17502876/137642d4-5e1e-11e6-8df1-08b609f7d670.jpg" alt="new-express" /&gt;&lt;/p&gt;

&lt;p&gt;è¿›å…¥é¡¹ç›®ç›®å½•åæ‰§è¡Œ &lt;code&gt;npm install&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;å®‰è£…å®Œæˆå æ‰§è¡Œ &lt;code&gt;DEBUG=blog:* npm start&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src="https://cloud.githubusercontent.com/assets/6661673/17507925/da030858-5e44-11e6-847a-984bf7a1fbf4.png" alt="image" /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨æµè§ˆå™¨é‡Œè®¿é—® &lt;code&gt;localhost:3000&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;ä½ ä¼šå‘ç°ä¸€ä¸ªç®€å• web åº”ç”¨å·²ç»æ­å»ºèµ·æ¥äº†&lt;/p&gt;

&lt;h2&gt;ç›®å½•ç»“æ„&lt;/h2&gt;

&lt;p&gt;ä½ å¯ä»¥åœ¨ç¬¬ä¸€æ­¥æ‰§è¡Œ &lt;code&gt;express -e blog&lt;/code&gt; åçœ‹åˆ°ä»£ç ç›®å½•ç»“æ„&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;app.jsï¼šå¯åŠ¨æ–‡ä»¶ï¼Œæˆ–è€…è¯´å…¥å£æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;package.jsonï¼šå­˜å‚¨ç€å·¥ç¨‹çš„ä¿¡æ¯åŠæ¨¡å—ä¾èµ–ï¼Œå½“åœ¨ dependencies ä¸­æ·»åŠ ä¾èµ–çš„æ¨¡å—æ—¶ï¼Œè¿è¡Œnpm installï¼Œnpm ä¼šæ£€æŸ¥å½“å‰ç›®å½•ä¸‹çš„ package.jsonï¼Œå¹¶è‡ªåŠ¨å®‰è£…æ‰€æœ‰æŒ‡å®šçš„æ¨¡å—&lt;/li&gt;
&lt;li&gt;node_modulesï¼šå­˜æ”¾ package.json ä¸­å®‰è£…çš„æ¨¡å—ï¼Œå½“ä½ åœ¨ package.json æ·»åŠ ä¾èµ–çš„æ¨¡å—å¹¶å®‰è£…åï¼Œå­˜æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹&lt;/li&gt;
&lt;li&gt;publicï¼šå­˜æ”¾ imageã€cssã€js ç­‰æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;routesï¼šå­˜æ”¾è·¯ç”±æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;viewsï¼šå­˜æ”¾è§†å›¾æ–‡ä»¶æˆ–è€…è¯´æ¨¡ç‰ˆæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;binï¼šå­˜æ”¾å¯æ‰§è¡Œæ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;app.js ä¸­çš„ä»£ç &lt;/h3&gt;

&lt;p&gt;&lt;img src="https://cloud.githubusercontent.com/assets/6661673/17502825/bf2e99ce-5e1d-11e6-81fb-8a92b605e3a6.jpg" alt="app" /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨app.jsä¸­æˆ‘ä»¬é€šè¿‡require()åŠ è½½äº†expressã€path ç­‰æ¨¡å—,ä»¥åŠ routes æ–‡ä»¶å¤¹ä¸‹çš„index. jså’Œ users.js è·¯ç”±æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;var app = express()ï¼šç”Ÿæˆä¸€ä¸ªexpresså®ä¾‹ appã€‚&lt;/li&gt;
&lt;li&gt;app.set(&amp;#39;views&amp;#39;, path.join(&lt;strong&gt;dirname, &amp;#39;viewsâ€™))ï¼šè®¾ç½® views æ–‡ä»¶å¤¹ä¸ºå­˜æ”¾viewæ–‡ä»¶çš„ç›®å½•, å³å­˜æ”¾æ¨¡æ¿æ–‡ä»¶çš„åœ°æ–¹,&lt;/strong&gt;dirname ä¸ºå…¨å±€å˜é‡,å­˜å‚¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„è„šæœ¬æ‰€åœ¨çš„ç›®å½•ã€‚&lt;/li&gt;
&lt;li&gt;app.set(&amp;#39;view engine&amp;#39;, &amp;#39;ejsâ€™)ï¼šè®¾ç½®è§†å›¾æ¨¡æ¿å¼•æ“ä¸º ejsã€‚&lt;/li&gt;
&lt;li&gt;app.use(bodyParser.json())ï¼šåŠ è½½è§£æjsonçš„ä¸­é—´ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;app.use(bodyParser.urlencoded({ extended: false }))ï¼šåŠ è½½è§£æurlencodedè¯·æ±‚ä½“çš„ä¸­é—´ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;app.use(cookieParser())ï¼šåŠ è½½è§£æcookieçš„ä¸­é—´ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;app.use(express.static(path.join(__dirname, &amp;#39;public&amp;#39;)))ï¼šè®¾ç½®publicæ–‡ä»¶å¤¹ä¸ºå­˜æ”¾é™æ€æ–‡ä»¶çš„ç›®å½•ã€‚&lt;/li&gt;
&lt;li&gt;app.use(&amp;#39;/&amp;#39;, routes);å’Œapp.use(&amp;#39;/users&amp;#39;, users)ï¼šè·¯ç”±æ§åˆ¶å™¨ã€‚&lt;/li&gt;
&lt;li&gt;æ•è·404é”™è¯¯ï¼Œå¹¶è½¬å‘åˆ°é”™è¯¯å¤„ç†å™¨ã€‚
*&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;  &lt;span class="nx"&gt;app&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;use&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="nb"&gt;Error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Not Found'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;404&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;å¼€å‘ç¯å¢ƒä¸‹çš„é”™è¯¯å¤„ç†å™¨ã€‚
*&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;app&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'env'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;===&lt;/span&gt; &lt;span class="s1"&gt;'development'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="nx"&gt;app&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;use&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
       &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;status&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;status&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
       &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'error'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
           &lt;span class="na"&gt;message&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;message&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
           &lt;span class="na"&gt;error&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt;
       &lt;span class="p"&gt;});&lt;/span&gt;
   &lt;span class="p"&gt;});&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;ç”Ÿäº§ç¯å¢ƒä¸‹çš„é”™è¯¯å¤„ç†å™¨ã€‚
*&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;  &lt;span class="nx"&gt;app&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;use&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;status&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;status&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'error'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="na"&gt;message&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;err&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;message&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="na"&gt;error&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
    &lt;span class="p"&gt;});&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;module.exports = app ï¼šå¯¼å‡ºappå®ä¾‹ä¾›å…¶ä»–æ¨¡å—è°ƒç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;è·¯ç”±è§„åˆ™&lt;/h2&gt;

&lt;p&gt;express å°è£…äº†å¤šç§ http è¯·æ±‚æ–¹å¼ï¼Œæˆ‘ä»¬ä¸»è¦åªä½¿ç”¨ &lt;code&gt;get&lt;/code&gt; å’Œ &lt;code&gt;post&lt;/code&gt; ä¸¤ç§ï¼Œå³ &lt;code&gt;app.get()&lt;/code&gt; å’Œ &lt;code&gt;app.post()&lt;/code&gt; ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;app.get()&lt;/code&gt; å’Œ &lt;code&gt;app.post()&lt;/code&gt; çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½ä¸ºè¯·æ±‚çš„è·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå¤„ç†è¯·æ±‚çš„å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ &lt;code&gt;req&lt;/code&gt; å’Œ &lt;code&gt;res&lt;/code&gt;ï¼Œä»£è¡¨è¯·æ±‚ä¿¡æ¯å’Œå“åº”ä¿¡æ¯ã€‚è·¯å¾„è¯·æ±‚åŠå¯¹åº”çš„è·å–è·¯å¾„æœ‰ä»¥ä¸‹å‡ ç§å½¢å¼ï¼š
  * &lt;code&gt;req.query&lt;/code&gt;ï¼š å¤„ç† &lt;code&gt;get&lt;/code&gt; è¯·æ±‚ï¼Œè·å– &lt;code&gt;get&lt;/code&gt; è¯·æ±‚å‚æ•°
  * &lt;code&gt;req.params&lt;/code&gt;ï¼š å¤„ç† &lt;code&gt;/:xxx&lt;/code&gt; å½¢å¼çš„ &lt;code&gt;get&lt;/code&gt; æˆ– &lt;code&gt;post&lt;/code&gt; è¯·æ±‚ï¼Œè·å–è¯·æ±‚å‚æ•°
  * &lt;code&gt;req.body&lt;/code&gt;ï¼š å¤„ç† &lt;code&gt;post&lt;/code&gt; è¯·æ±‚ï¼Œè·å– &lt;code&gt;post&lt;/code&gt; è¯·æ±‚ä½“
  * &lt;code&gt;req.param()&lt;/code&gt;ï¼š å¤„ç† &lt;code&gt;get&lt;/code&gt; å’Œ &lt;code&gt;post&lt;/code&gt; è¯·æ±‚ï¼Œä½†æŸ¥æ‰¾ä¼˜å…ˆçº§ç”±é«˜åˆ°ä½ä¸º &lt;code&gt;req.params&lt;/code&gt;â†’&lt;code&gt;req.body&lt;/code&gt;â†’&lt;code&gt;req.query&lt;/code&gt;&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;  &lt;span class="cm"&gt;/* GET home page. */&lt;/span&gt;
  &lt;span class="nx"&gt;router&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// ?name=111&amp;amp;phone=111&lt;/span&gt;
    &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;query&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;// =&amp;gt; { name: '111', phone: '111' }&lt;/span&gt;

    &lt;span class="c1"&gt;// ?name=111&amp;amp;user[phone]=111&lt;/span&gt;
    &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;query&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;// =&amp;gt; { name: '111', user: { phone: '111' } }&lt;/span&gt;

    &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'index'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="na"&gt;title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'Express'&lt;/span&gt; &lt;span class="p"&gt;});&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;

  &lt;span class="nx"&gt;router&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;post&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'/post'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;next&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// post name=1111&amp;amp;phone=1111&lt;/span&gt;
    &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;body&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;// =&amp;gt; { name: '1111', phone: '1111' }&lt;/span&gt;

    &lt;span class="c1"&gt;// post user[name]=1111&amp;amp;user[phone]=1111&lt;/span&gt;
    &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;body&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;user&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;// =&amp;gt; { user: { name : '1111', phone: '1111' } }&lt;/span&gt;

    &lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'index'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="na"&gt;title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'Express'&lt;/span&gt; &lt;span class="p"&gt;});&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;æ¨¡ç‰ˆå¼•æ“&lt;/h2&gt;

&lt;h3&gt;ä»€ä¹ˆæ˜¯æ¨¡æ¿å¼•æ“&lt;/h3&gt;

&lt;p&gt;æ¨¡æ¿å¼•æ“ï¼ˆTemplate Engineï¼‰æ˜¯ä¸€ä¸ªå°†é¡µé¢æ¨¡æ¿å’Œè¦æ˜¾ç¤ºçš„æ•°æ®ç»“åˆèµ·æ¥ç”Ÿæˆ HTML é¡µé¢çš„å·¥å…·ã€‚
å¦‚æœè¯´ä¸Šé¢è®²åˆ°çš„ express ä¸­çš„è·¯ç”±æ§åˆ¶æ–¹æ³•ç›¸å½“äº MVC ä¸­çš„æ§åˆ¶å™¨çš„è¯ï¼Œé‚£æ¨¡æ¿å¼•æ“å°±ç›¸å½“äº MVC ä¸­çš„è§†å›¾ã€‚&lt;/p&gt;

&lt;p&gt;ä»€ä¹ˆæ˜¯ ejs ?&lt;/p&gt;

&lt;p&gt;ejs æ˜¯æ¨¡æ¿å¼•æ“çš„ä¸€ç§ï¼Œå› ä¸ºå®ƒä½¿ç”¨èµ·æ¥ååˆ†ç®€å•ï¼Œè€Œä¸”ä¸ express é›†æˆè‰¯å¥½ã€‚&lt;/p&gt;

&lt;h3&gt;ä½¿ç”¨æ¨¡æ¿å¼•æ“&lt;/h3&gt;

&lt;p&gt;é€šè¿‡ä»¥ä¸‹ä¸¤è¡Œä»£ç è®¾ç½®äº†æ¨¡æ¿æ–‡ä»¶çš„å­˜å‚¨ä½ç½®å’Œä½¿ç”¨çš„æ¨¡æ¿å¼•æ“ï¼š&lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt;&lt;span class="nx"&gt;app&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'views'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;__dirname&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;'/views'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="nx"&gt;app&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'view engine'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'ejs'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬é€šè¿‡ &lt;code&gt;express -e blog&lt;/code&gt; åªæ˜¯åˆå§‹åŒ–äº†ä¸€ä¸ªä½¿ç”¨ &lt;code&gt;ejs&lt;/code&gt; æ¨¡æ¿å¼•æ“çš„å·¥ç¨‹è€Œå·²ï¼Œæ¯”å¦‚ &lt;code&gt;node_modules&lt;/code&gt; ä¸‹æ·»åŠ äº† &lt;code&gt;ejs&lt;/code&gt; æ¨¡å—ï¼Œ&lt;code&gt;views&lt;/code&gt; æ–‡ä»¶å¤¹ä¸‹æœ‰ &lt;code&gt;index.ejs&lt;/code&gt; ã€‚å¹¶ä¸æ˜¯è¯´å¼ºåˆ¶è¯¥å·¥ç¨‹åªèƒ½ä½¿ç”¨ &lt;code&gt;ejs&lt;/code&gt; ä¸èƒ½ä½¿ç”¨å…¶ä»–çš„æ¨¡æ¿å¼•æ“æ¯”å¦‚ &lt;code&gt;jade&lt;/code&gt;ï¼ŒçœŸæ­£æŒ‡å®šä½¿ç”¨å“ªä¸ªæ¨¡æ¿å¼•æ“çš„æ˜¯ &lt;code&gt;app.set(&amp;#39;view engine&amp;#39;, &amp;#39;ejs&amp;#39;);&lt;/code&gt; ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ &lt;code&gt;routes/index.js&lt;/code&gt; ä¸­é€šè¿‡è°ƒç”¨ &lt;code&gt;res.render()&lt;/code&gt; æ¸²æŸ“æ¨¡ç‰ˆï¼Œå¹¶å°†å…¶äº§ç”Ÿçš„é¡µé¢ç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ¨¡æ¿çš„åç§°ï¼Œå³ &lt;code&gt;views&lt;/code&gt; ç›®å½•ä¸‹çš„æ¨¡æ¿æ–‡ä»¶åï¼Œæ‰©å±•å &lt;code&gt;.ejs&lt;/code&gt; å¯é€‰ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¼ é€’ç»™æ¨¡æ¿çš„æ•°æ®å¯¹è±¡ï¼Œç”¨äºæ¨¡æ¿ç¿»è¯‘ã€‚&lt;/p&gt;

&lt;p&gt;ejs çš„æ ‡ç­¾ç³»ç»Ÿéå¸¸ç®€å•ï¼Œå®ƒåªæœ‰ä»¥ä¸‹ä¸‰ç§æ ‡ç­¾ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&amp;lt;% code %&amp;gt;ï¼šJavaScript ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;&amp;lt;%= code %&amp;gt;ï¼šæ˜¾ç¤ºæ›¿æ¢è¿‡ HTML ç‰¹æ®Šå­—ç¬¦çš„å†…å®¹ã€‚&lt;/li&gt;
&lt;li&gt;&amp;lt;%- code %&amp;gt;ï¼šæ˜¾ç¤ºåŸå§‹ HTML å†…å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;&amp;lt;%= code %&amp;gt;&lt;/code&gt; å’Œ &lt;code&gt;&amp;lt;%- code %&amp;gt;&lt;/code&gt; çš„åŒºåˆ«ï¼Œå½“å˜é‡ code ä¸ºæ™®é€šå­—ç¬¦ä¸²æ—¶ï¼Œä¸¤è€…æ²¡æœ‰åŒºåˆ«ã€‚å½“ &lt;code&gt;code&lt;/code&gt; æ¯”å¦‚ä¸º &lt;code&gt;&amp;lt;h1&amp;gt;hello&amp;lt;/h1&amp;gt;&lt;/code&gt; è¿™ç§å­—ç¬¦ä¸²æ—¶ï¼Œ&lt;code&gt;&amp;lt;%= code %&amp;gt;&lt;/code&gt; ä¼šåŸæ ·è¾“å‡º &lt;code&gt;&amp;lt;h1&amp;gt;hello&amp;lt;/h1&amp;gt;&lt;/code&gt;ï¼Œè€Œ &lt;code&gt;&amp;lt;%- code %&amp;gt;&lt;/code&gt; åˆ™ä¼šæ˜¾ç¤º H1 å¤§çš„ hello å­—ç¬¦ä¸²ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥åœ¨ &lt;code&gt;&amp;lt;% %&amp;gt;&lt;/code&gt; å†…ä½¿ç”¨ JavaScript ä»£ç &lt;/p&gt;
&lt;pre class="highlight javascript"&gt;&lt;code&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;ul&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
 &lt;span class="o"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;supplies&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;%&amp;gt;&lt;/span&gt;
    &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nx"&gt;li&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;lt;%=&lt;/span&gt; &lt;span class="nx"&gt;supplies&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;%&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="sr"&gt;/li&lt;/span&gt;&lt;span class="err"&gt;&amp;gt;
&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="o"&gt;%&amp;gt;&lt;/span&gt;
 &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="sr"&gt;/ul&lt;/span&gt;&lt;span class="err"&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</content>
  </entry>
  <entry>
    <title>é˜¿é‡Œäº‘ Ubuntu æ”¯æŒ IPv6 çš„å®Œæ•´æ­¥éª¤</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-08-06.html"/>
    <id>https://jiandanxinli.github.io/2016-08-06.html</id>
    <published>2016-08-06T08:00:00+08:00</published>
    <updated>2016-08-16T07:21:15+08:00</updated>
    <author>
      <name>Ben</name>
    </author>
    <content type="html">&lt;p&gt;å‰å‡ å¤©æäº¤æ–°ç‰ˆ iOS App è¢«æ‹’ï¼ŒåŸå› æ˜¯åœ¨ IPv6 only çš„ç¯å¢ƒä¸‹æ— æ³•ä½¿ç”¨ã€‚ä½†é˜¿é‡Œäº‘çš„ ECS å¹¶ä¸æ”¯æŒ IPv6ï¼Œåªæä¾› IPv4 çš„ IPã€‚å¥½åœ¨ Hurricane Electric ï¼ˆä¸‹æ–‡ç®€ç§° HEï¼‰æä¾›å…è´¹çš„ IPv6 é€šé“ï¼ŒåŸºæœ¬å¤Ÿç”¨äº†ã€‚&lt;/p&gt;

&lt;p&gt;å…ˆè¯´ä¸‹ ECS çš„åŸºæœ¬ç¯å¢ƒï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ“ä½œç³»ç»Ÿï¼šUbuntu&lt;/li&gt;
&lt;li&gt;å‰ç«¯æœåŠ¡å™¨ï¼šNginx&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¯ç”¨ IPv6 çš„ä¸»è¦æœ‰å››æ­¥ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;æ³¨å†Œå¹¶åˆ›å»º IPv6 é€šé“&lt;/li&gt;
&lt;li&gt;é…ç½® ECS ä½¿å…¶æ”¯æŒ IPv6&lt;/li&gt;
&lt;li&gt;é…ç½® Nginx ä½¿å…¶ç›‘å¬ IPv6 ç«¯å£&lt;/li&gt;
&lt;li&gt;é…ç½® DNS ä½¿å…¶æ”¯æŒ IPv6 è§£æ&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œå¹¶åˆ›å»º IPv6 é€šé“&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;æ³¨å†Œ &lt;a href="https://www.tunnelbroker.net/"&gt;https://www.tunnelbroker.net/&lt;/a&gt; ï¼ˆéœ€è¦é‚®ç®±éªŒè¯ï¼‰&lt;/li&gt;
&lt;li&gt;ç‚¹å‡» &lt;a href="https://www.tunnelbroker.net/new_tunnel.php"&gt;Create Regular Tunnel&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;åœ¨&lt;code&gt;IPv4 Endpoint (Your side)&lt;/code&gt;å¤„å¡«ä¸Š ECS çš„ IPv4 åœ°å€&lt;/li&gt;
&lt;li&gt;åœ¨&lt;code&gt;Available Tunnel Servers&lt;/code&gt;ä¸­é€‰æ‹©&lt;code&gt;Hong Kong, HK&lt;/code&gt;ï¼ˆå¦‚æœä½ é¢å‘æµ·å¤–ç”¨æˆ·ï¼Œå¯ä»¥é€‰æ‹©æ›´æ¥è¿‘ç›®æ ‡ç”¨æˆ·çš„åœ°åŒºï¼‰&lt;/li&gt;
&lt;li&gt;ç‚¹å‡»&lt;code&gt;Create Tunnel&lt;/code&gt;åï¼Œé€šé“å°±åˆ›å»ºå®Œæˆäº†&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç¬¬äºŒæ­¥ï¼šé…ç½® ECS ä½¿å…¶æ”¯æŒ IPv6&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;ç¼–è¾‘&lt;code&gt;/etc/sysctl.conf&lt;/code&gt;ï¼Œå°†ä»¥ä¸‹ä¸‰é¡¹çš„é…ç½®æ”¹æˆ&lt;code&gt;0&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class="highlight conf"&gt;&lt;code&gt;  &lt;span class="n"&gt;net&lt;/span&gt;.&lt;span class="n"&gt;ipv6&lt;/span&gt;.&lt;span class="n"&gt;conf&lt;/span&gt;.&lt;span class="n"&gt;all&lt;/span&gt;.&lt;span class="n"&gt;disable_ipv6&lt;/span&gt; = &lt;span class="m"&gt;0&lt;/span&gt;
  &lt;span class="n"&gt;net&lt;/span&gt;.&lt;span class="n"&gt;ipv6&lt;/span&gt;.&lt;span class="n"&gt;conf&lt;/span&gt;.&lt;span class="n"&gt;default&lt;/span&gt;.&lt;span class="n"&gt;disable_ipv6&lt;/span&gt; = &lt;span class="m"&gt;0&lt;/span&gt;
  &lt;span class="n"&gt;net&lt;/span&gt;.&lt;span class="n"&gt;ipv6&lt;/span&gt;.&lt;span class="n"&gt;conf&lt;/span&gt;.&lt;span class="n"&gt;lo&lt;/span&gt;.&lt;span class="n"&gt;disable_ipv6&lt;/span&gt; = &lt;span class="m"&gt;0&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨&lt;code&gt;/etc/network/interfaces&lt;/code&gt;åº•éƒ¨åŠ ä¸Šä»¥ä¸‹å†…å®¹ï¼ˆæ³¨ï¼šä¸‹é¢å¤§å†™çš„&lt;IPV6&gt;å¤„ï¼Œéœ€è¦æ›¿æ¢æˆä½ åœ¨ HE å¾—åˆ°çš„&lt;code&gt;Server IPv6 Address&lt;/code&gt;ï¼Œä½†ä¸åŒ…æ‹¬æœ€åçš„&lt;code&gt;::1/64&lt;/code&gt;ï¼Œå¦‚ï¼š&lt;code&gt;2001:470:100:100&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class="highlight conf"&gt;&lt;code&gt;  &lt;span class="n"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;-&lt;span class="n"&gt;ipv6&lt;/span&gt;
  &lt;span class="n"&gt;iface&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;-&lt;span class="n"&gt;ipv6&lt;/span&gt; &lt;span class="n"&gt;inet6&lt;/span&gt; &lt;span class="n"&gt;v4tunnel&lt;/span&gt;
  &lt;span class="n"&gt;address&lt;/span&gt; &amp;lt;&lt;span class="n"&gt;IPV6&lt;/span&gt;&amp;gt;::&lt;span class="m"&gt;2&lt;/span&gt;
  &lt;span class="n"&gt;netmask&lt;/span&gt; &lt;span class="m"&gt;64&lt;/span&gt;
  &lt;span class="n"&gt;remote&lt;/span&gt; &amp;lt;&lt;span class="n"&gt;HE&lt;/span&gt; çš„ &lt;span class="n"&gt;Server&lt;/span&gt; &lt;span class="n"&gt;IPv4&lt;/span&gt; &lt;span class="n"&gt;Address&lt;/span&gt;&amp;gt;
  &lt;span class="n"&gt;local&lt;/span&gt; &amp;lt;é˜¿é‡Œäº‘çš„ &lt;span class="n"&gt;IPv4&lt;/span&gt; åœ°å€&amp;gt;
  &lt;span class="n"&gt;endpoint&lt;/span&gt; &lt;span class="n"&gt;any&lt;/span&gt;
  &lt;span class="n"&gt;ttl&lt;/span&gt; &lt;span class="m"&gt;255&lt;/span&gt;
  &lt;span class="n"&gt;gateway&lt;/span&gt; &amp;lt;&lt;span class="n"&gt;IPv6&lt;/span&gt;&amp;gt;::&lt;span class="m"&gt;1&lt;/span&gt;
  &lt;span class="n"&gt;up&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt; -&lt;span class="m"&gt;6&lt;/span&gt; &lt;span class="n"&gt;route&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="m"&gt;2000&lt;/span&gt;::/&lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="n"&gt;via&lt;/span&gt; ::&amp;lt;&lt;span class="n"&gt;HE&lt;/span&gt; çš„ &lt;span class="n"&gt;Server&lt;/span&gt; &lt;span class="n"&gt;IPv4&lt;/span&gt; &lt;span class="n"&gt;Address&lt;/span&gt;&amp;gt; &lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;-&lt;span class="n"&gt;ipv6&lt;/span&gt;
  &lt;span class="n"&gt;up&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt; -&lt;span class="m"&gt;6&lt;/span&gt; &lt;span class="n"&gt;addr&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &amp;lt;&lt;span class="n"&gt;IPv6&lt;/span&gt;&amp;gt;::&lt;span class="m"&gt;1&lt;/span&gt;:&lt;span class="m"&gt;1&lt;/span&gt;/&lt;span class="m"&gt;128&lt;/span&gt; &lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;-&lt;span class="n"&gt;ipv6&lt;/span&gt;
  &lt;span class="n"&gt;up&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt; -&lt;span class="m"&gt;6&lt;/span&gt; &lt;span class="n"&gt;addr&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &amp;lt;&lt;span class="n"&gt;IPv6&lt;/span&gt;&amp;gt;::&lt;span class="m"&gt;2&lt;/span&gt;:&lt;span class="m"&gt;1&lt;/span&gt;/&lt;span class="m"&gt;128&lt;/span&gt; &lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;-&lt;span class="n"&gt;ipv6&lt;/span&gt;
  &lt;span class="n"&gt;down&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt; -&lt;span class="m"&gt;6&lt;/span&gt; &lt;span class="n"&gt;route&lt;/span&gt; &lt;span class="n"&gt;flush&lt;/span&gt; &lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="n"&gt;he&lt;/span&gt;-&lt;span class="n"&gt;ipv6&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;ol&gt;
&lt;li&gt;é‡å¯æœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œ&lt;code&gt;ifup he-ipv6&lt;/code&gt;ç¡®è®¤ IPv6 å·²å¯ç”¨&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç¬¬ä¸‰æ­¥ï¼šé…ç½® Nginx ä½¿å…¶ç›‘å¬ IPv6 ç«¯å£&lt;/p&gt;
&lt;pre class="highlight conf"&gt;&lt;code&gt;&lt;span class="n"&gt;server&lt;/span&gt; {
  &lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="m"&gt;80&lt;/span&gt;; // ç›‘å¬ &lt;span class="n"&gt;IPv4&lt;/span&gt; çš„ &lt;span class="m"&gt;80&lt;/span&gt; ç«¯å£
  &lt;span class="n"&gt;listen&lt;/span&gt; [::]:&lt;span class="m"&gt;80&lt;/span&gt;; // ç›‘å¬ &lt;span class="n"&gt;IPv6&lt;/span&gt; çš„ &lt;span class="m"&gt;80&lt;/span&gt; ç«¯å£
}

&lt;span class="n"&gt;server&lt;/span&gt; {
  &lt;span class="n"&gt;listen&lt;/span&gt; &lt;span class="m"&gt;443&lt;/span&gt; &lt;span class="n"&gt;ssl&lt;/span&gt; &lt;span class="n"&gt;http2&lt;/span&gt;; // ç›‘å¬ &lt;span class="n"&gt;IPv4&lt;/span&gt; çš„ &lt;span class="m"&gt;443&lt;/span&gt; ç«¯å£
  &lt;span class="n"&gt;listen&lt;/span&gt; [::]:&lt;span class="m"&gt;443&lt;/span&gt; &lt;span class="n"&gt;ssl&lt;/span&gt; &lt;span class="n"&gt;http2&lt;/span&gt;; // ç›‘å¬ &lt;span class="n"&gt;IPv6&lt;/span&gt; çš„ &lt;span class="m"&gt;443&lt;/span&gt; ç«¯å£
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç¬¬å››æ­¥ï¼šé…ç½® DNS ä½¿å…¶æ”¯æŒ IPv6 è§£æ&lt;/p&gt;

&lt;p&gt;è¿™æ­¥æœ€ç®€å•ï¼Œåªéœ€ç»™ç›¸åº”çš„åŸŸååŠ ä¸Š&lt;code&gt;AAAA&lt;/code&gt;è§£æï¼Œå€¼å¡« HE é‡Œçš„&lt;code&gt;Client IPv6 Address&lt;/code&gt;ï¼Œå»æ‰æœ€åçš„&lt;code&gt;/64&lt;/code&gt;å³å¯ï¼Œå¦‚&lt;code&gt;2001:470:100:100::2&lt;/code&gt;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Rails ActiveRecord ä¸åŒçš„èµ‹å€¼æ–¹æ³•</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-07-31.html"/>
    <id>https://jiandanxinli.github.io/2016-07-31.html</id>
    <published>2016-07-31T08:00:00+08:00</published>
    <updated>2016-08-04T13:13:28+08:00</updated>
    <author>
      <name>fengd</name>
    </author>
    <content type="html">&lt;p&gt;Rails æä¾›äº†å¤šç§è®¾ç½®Modelå±æ€§çš„æ–¹æ³•ï¼Œæ–¹æ³•ä¹‹é—´åˆå„æœ‰å¼‚åŒï¼Œæœ‰çš„ä¼šå‡ºå‘å›è°ƒï¼Œæœ‰çš„ä¸ä¼šï¼Œæœ‰çš„ä¼šå¯¹æ‰€å±å¯¹è±¡å…¶å®ƒå±æ€§ä¹Ÿäº§ç”Ÿå½±å“ã€‚ å› æ­¤ç†è§£æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«å°±æ˜¾å¾—å¾ˆé‡è¦ã€‚&lt;/p&gt;

&lt;h3&gt;Cheat Sheet&lt;/h3&gt;

&lt;p&gt;æœ€æ–¹ä¾¿çš„å…ˆæ¥ï¼Œcheetsheetè¡¨ï¼Œæ–¹ä¾¿æŸ¥è¯¢ï¼š&lt;/p&gt;

&lt;table class="table-compact table table-striped"&gt;
                &lt;thead&gt;
                  &lt;tr&gt;
                    &lt;th&gt;Method&lt;/th&gt;
                    &lt;th&gt;Uses Default Accessor&lt;/th&gt;
                    &lt;th&gt;Saved to Database&lt;/th&gt;
                    &lt;th&gt;Validations&lt;/th&gt;
                    &lt;th&gt;Callbacks&lt;/th&gt;
                    &lt;th&gt;Touches &lt;code&gt;updated_at&lt;/code&gt;&lt;/th&gt;
                    &lt;th&gt;Readonly check&lt;/th&gt;
                  &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
                  &lt;tr&gt;
                    &lt;td&gt;&lt;a href="http://apidock.com/rails/ActiveRecord/AttributeMethods/Write/attribute%3D" style="text-decoration: none"&gt;attribute=&lt;/a&gt;&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;&lt;span style="color: #c0c0c0;"&gt;n/a&lt;/span&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;span style="color: #c0c0c0;"&gt;n/a&lt;/span&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;span style="color: #c0c0c0;"&gt;n/a&lt;/span&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;span style="color: #c0c0c0;"&gt;n/a&lt;/span&gt;&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;td&gt;&lt;a href="http://apidock.com/rails/ActiveRecord/AttributeMethods/Write/write_attribute" style="text-decoration: none"&gt;write_attribute&lt;/a&gt;&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;&lt;span style="color: #c0c0c0;"&gt;n/a&lt;/span&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;span style="color: #c0c0c0;"&gt;n/a&lt;/span&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;span style="color: #c0c0c0;"&gt;n/a&lt;/span&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;span style="color: #c0c0c0;"&gt;n/a&lt;/span&gt;&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;td&gt;&lt;a href="http://apidock.com/rails/ActiveRecord/Persistence/update_attribute" style="text-decoration: none"&gt;update_attribute&lt;/a&gt;&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;td&gt;&lt;a href="http://apidock.com/rails/ActiveRecord/AttributeAssignment/attributes%3D" style="text-decoration: none"&gt;attributes=&lt;/a&gt;&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;&lt;span style="color: #c0c0c0;"&gt;n/a&lt;/span&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;span style="color: #c0c0c0;"&gt;n/a&lt;/span&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;span style="color: #c0c0c0;"&gt;n/a&lt;/span&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;span style="color: #c0c0c0;"&gt;n/a&lt;/span&gt;&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;td&gt;&lt;a href="http://apidock.com/rails/ActiveRecord/Persistence/update" style="text-decoration: none"&gt;update&lt;/a&gt;&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;td&gt;&lt;a href="http://apidock.com/rails/ActiveRecord/Persistence/update_column" style="text-decoration: none"&gt;update_column&lt;/a&gt;&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;td&gt;&lt;a href="http://apidock.com/rails/ActiveRecord/Persistence/update_columns" style="text-decoration: none"&gt;update_columns&lt;/a&gt;&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;td&gt;&lt;a href="http://apidock.com/rails/ActiveRecord/Relation/update" style="text-decoration: none"&gt;User::update&lt;/a&gt;&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr&gt;
                    &lt;td&gt;&lt;a href="http://apidock.com/rails/v4.0.2/ActiveRecord/Relation/update_all" style="text-decoration: none"&gt;User::update_all&lt;/a&gt;&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;Yes&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                    &lt;td&gt;No&lt;/td&gt;
                  &lt;/tr&gt;
                &lt;/tbody&gt;
              &lt;/table&gt;

&lt;h3&gt;user.name =&lt;/h3&gt;

&lt;p&gt;è¿™æ˜¯æœ€å¸¸ç”¨çš„èµ‹å€¼æ–¹æ³•ï¼Œè¿™ä¸ªä¹Ÿæ˜¯Railsé»˜è®¤ç”Ÿæˆçš„èµ‹å€¼æ–¹æ³•ã€‚èµ‹å€¼åï¼Œå¯¹åº”çš„å±æ€§ä¼šè¢«æ ‡è®°ä¸ºdirty, è„æ•°æ®ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ›´æ–°åˆ°æ•°æ®é‡Œå»ã€‚&lt;/p&gt;

&lt;p&gt;è°ƒç”¨&lt;code&gt;save&lt;/code&gt;ä¼šæŠŠæ•°æ®æ›´æ–°åˆ°æ•°æ®åº“ã€‚è°ƒç”¨&lt;code&gt;reload&lt;/code&gt;ä¼šä¸¢å¼ƒè„æ•°æ®ã€‚&lt;/p&gt;

&lt;h3&gt;user.write_attribute(:name, &amp;#39;feng&amp;#39;)&lt;/h3&gt;

&lt;p&gt;è¿™æ˜¯ä¸Šé¢é‚£ä¸ªèµ‹å€¼æ–¹æ³•ä¼šè°ƒç”¨çš„æ–¹æ³•ï¼Œ è¿™ä¸ªæ–¹æ³•ä¹Ÿä¸ä¼šæ›´æ–°æ•°æ®åº“ã€‚&lt;/p&gt;

&lt;h3&gt;user.update_attribute(:name, &amp;#39;feng&amp;#39;)&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªæ–¹æ³•ä¼šç›´æ¥æ›´æ–°æ•°æ®åˆ°æ•°æ®åº“ï¼Œè€Œä¸”ä¼šå¿½ç•¥åˆ°æ‰€æœ‰çš„éªŒè¯ï¼Œç›´æ¥æ›´æ–°æ•°æ®åº“ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æ‰€æœ‰æ›´æ–°ä¼šç›´æ¥åˆ°æ•°æ®åº“&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰çš„éªŒè¯ä¼šè¢«è·³è¿‡&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;user.attributes = { name: &amp;#39;feng&amp;#39; }&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªèµ‹å€¼æ–¹æ³•ä¼šæ ¹æ®å³è¾¹ä¼ å…¥çš„å“ˆå¸Œï¼Œå¯¹ç›¸åº”çš„å±æ€§è¿›è¡Œèµ‹å€¼ã€‚å…¶å®ƒçš„å±æ€§ä¸ä¼šæœ‰å˜åŠ¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;user.assign_attributes { name: &amp;#39;feng&amp;#39; }&lt;/code&gt;&lt;/p&gt;

&lt;h3&gt;user.update(name: &amp;#39;feng&amp;#39;)&lt;/h3&gt;

&lt;p&gt;åœ¨Rails 3ä¸­ï¼Œè¿™ä¸ªæ–¹æ³•å«&lt;code&gt;update_attributes&lt;/code&gt;ï¼Œ è¿™ä¸ªæ–¹æ³•ä¼šæ›´æ–°å¯¹è±¡ï¼Œè¿›è¡ŒéªŒè¯ï¼Œç„¶åæ›´æ–°åˆ°æ•°æ®åº“.è¿™æ–¹æ³•ä¼šæŠŠæ‰€å±å¯¹è±¡ä¸­åˆ«çš„è„æ•°æ®ä¹Ÿæ›´æ–°åˆ°æ•°æ®åº“ã€‚&lt;/p&gt;

&lt;h3&gt;user.update_columns(name: &amp;#39;feng&amp;#39;)&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªæ–¹æ³•ä¼šç”Ÿæˆ SQL Updateï¼Œç›´æ¥æ›´æ–°åˆ°æ•°æ®åº“ï¼Œè·³è¿‡æ‰€æœ‰çš„æ•°æ®éªŒè¯å’Œå›è°ƒã€‚&lt;/p&gt;

&lt;h3&gt;user.update_column(:name, &amp;#39;feng&amp;#39;)&lt;/h3&gt;

&lt;p&gt;è·Ÿä¸Šé¢çš„æ–¹æ³•ç±»ä¼¼&lt;/p&gt;

&lt;h3&gt;User.update(1, name: &amp;#39;feng&amp;#39;)&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;è¿™æ˜¯ä¸€ä¸ªç±»æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ &lt;code&gt;id&lt;/code&gt;, åé¢æ˜¯æ›´æ–°çš„å±æ€§hashã€‚ ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œ ä¸€ç»„ &lt;code&gt;id&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h3&gt;User.update_all(name: &amp;#39;feng&amp;#39;)&lt;/h3&gt;

&lt;p&gt;æ‰¹é‡æ›´æ–°ï¼Œ&lt;strong&gt;be carefulï¼&lt;/strong&gt;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>é€‰æ‹© jsonapi-resources çš„ç†ç”±</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-07-30.html"/>
    <id>https://jiandanxinli.github.io/2016-07-30.html</id>
    <published>2016-07-30T08:00:00+08:00</published>
    <updated>2016-08-04T13:09:46+08:00</updated>
    <author>
      <name>Ben</name>
    </author>
    <content type="html">&lt;p&gt;Rails 5 å‘å¸ƒæ—¶çš„å®˜æ–¹æ—¥å¿—é‡Œï¼Œæ¨èäº†ä¸‰ç§ç”¨äºæ„å»º API çš„ gemï¼Œåˆ†åˆ«æ˜¯ &lt;a href="https://github.com/rails/jbuilder"&gt;Jbuilder&lt;/a&gt;ã€&lt;a href="https://github.com/rails-api/active_model_serializers"&gt;Active Model Serializers&lt;/a&gt; å’Œ &lt;a href="https://github.com/cerebris/jsonapi-resources"&gt;JSONAPI::Resources&lt;/a&gt;ï¼Œå…¶ä¸­å‰ä¸¤ç§éœ€è¦é…åˆ rails-api æ¥ä½¿ç”¨ï¼Œåªæœ‰ jsonapi-resources æä¾›äº† JSONAPI::ResourceControllerã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† jsonapi-resources ä¸»è¦åŸºäºä»¥ä¸‹åŸå› ï¼š&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;å®ƒçš„ resource è¯­æ³•ä¸ active_model_serializers ç›¸è¿‘ï¼Œè€Œæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„æ˜¯ active_model_serializers&lt;/li&gt;
&lt;li&gt;active_model_serializers ä¸æ”¯æŒ abstract ç‰¹æ€§ï¼Œå¿…é¡»åŸºäºæŸä¸ª modelï¼Œè€Œæˆ‘ä»¬æœ‰äº› resource å¹¶éåŸºäº model&lt;/li&gt;
&lt;li&gt;jsonapi-resources å†…ç½®äº† fields é€‰é¡¹ï¼Œå¯ä»¥æ–¹ä¾¿çš„åœ¨è¯·æ±‚ç«¯æŒ‡å®šè¿”å›çš„å­—æ®µï¼Œè€Œä¸å¿…è¿”å›å…¨éƒ¨å­—æ®µ&lt;/li&gt;
&lt;li&gt;è¿”å›çš„æ•°æ®ç»“æ„ç¬¦åˆ &lt;a href="http://jsonapi.org/"&gt;jsonapi è§„èŒƒ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;JSONAPI::ResourceController æä¾›äº† RESTful çš„å°è£…ï¼Œå¯ä»¥çœå»ä¸å°‘ä»£ç &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä»¥ä¸Šçš„åŸå› åªæ˜¯å¯¹ç›®å‰é¡¹ç›®æ¥è¯´æœ€éœ€è¦çš„ç‰¹æ€§ï¼Œæ›´å¤šç‰¹æ€§å¯ä»¥å»çœ‹å®˜æ–¹æ–‡æ¡£ã€‚&lt;/p&gt;

&lt;p&gt;å‚è€ƒé“¾æ¥ï¼š&lt;/p&gt;

&lt;p&gt;jsonapi-resourcesï¼š &lt;a href="https://github.com/cerebris/jsonapi-resources"&gt;https://github.com/cerebris/jsonapi-resources&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;jsonapiï¼š&lt;a href="http://jsonapi.org"&gt;http://jsonapi.org&lt;/a&gt;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>iOSä¸Šç®€æ˜“è½®æ’­å›¾çš„å®ç°</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2016-07-29.html"/>
    <id>https://jiandanxinli.github.io/2016-07-29.html</id>
    <published>2016-07-29T08:00:00+08:00</published>
    <updated>2016-11-01T12:59:01+08:00</updated>
    <author>
      <name>Qiuncheng</name>
    </author>
    <content type="html">&lt;h3&gt;å‰è¨€&lt;/h3&gt;

&lt;p&gt;è§è¿‡å¾ˆå¤šçš„iOSåº”ç”¨ï¼Œéƒ½æœ‰æ— é™è½®æ’­å›¾ï¼Œä¹‹å‰ä¹Ÿçœ‹åˆ°è¿‡ç›¸å…³å®ç°çš„æ–‡ç« ï¼Œå¯æ˜¯ä»…ä»…å°±æ˜¯ä¸€çœ‹è€Œè¿‡ç½¢äº†ã€‚å½“è‡ªå·±åœ¨é¡¹ç›®ä¸­ç”¨åˆ°è¿™ä¸ªï¼ŒçœŸæ­£å»å†™çš„æ—¶å€™æ‰å‘ç°ä¸æ˜¯å¾ˆå®¹æ˜“ï¼Œé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè¿™ç¯‡æ–‡ç« å°±è®°å½•ä¸‹è‡ªå·±æœ€åæˆåŠŸå®ç°è½®æ’­å›¾çš„å†ç¨‹ã€‚&lt;/p&gt;

&lt;h3&gt;åŸç†&lt;/h3&gt;

&lt;p&gt;åŸç†å…¶å®å°±æ˜¯ä¸€ç§å‡è±¡ã€‚ä¸è¿‡åœ¨æˆ‘è¿™é‡Œï¼Œç›®å‰æœ‰è¿‡ä¸¤ç§åŸç†çš„å®ç°ã€‚ä¸€ç§åˆ©ç”¨&lt;code&gt;UICollectionView&lt;/code&gt;å®ç°è½®æ’­ï¼Œå¦ä¸€ç§åˆ©ç”¨&lt;code&gt;UIScrollView&lt;/code&gt;å®ç°è½®æ’­ã€‚
ä»Šå¤©æˆ‘ä»¬è¦æ¥æ‰“é€ ä¸€æ¬¾è¿™æ ·çš„è½®æ’­å›¾ï¼ˆå›¾ç”»çš„ä¸å¥½ï¼Œè¯·å‹¿è§æ€ªï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src="https://cloud.githubusercontent.com/assets/9990834/17270175/36fa47a0-568f-11e6-8f3f-bbed783d6b41.png" alt="ä¸¾ä¾‹ï¼šä¸‰å¼ å›¾çš„æ— é™è½®æ’­" /&gt;&lt;/p&gt;

&lt;h4&gt;åŸç†ä¸€ï¼šåˆ©ç”¨&lt;code&gt;UIScrollView&lt;/code&gt;å®ç°è½®æ’­å›¾ã€‚&lt;/h4&gt;

&lt;p&gt;è¦æƒ³å®ç°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬ä½¿ç”¨&lt;code&gt;UIScrollView&lt;/code&gt;åŒ…å«image0ï¼Œimage1ï¼Œimage2çš„ä¸‰ä¸ª&lt;code&gt;UIImageView&lt;/code&gt;éƒ½æ˜¯æ”¾åœ¨&lt;code&gt;UIScrollView&lt;/code&gt;é‡Œé¢çš„ï¼Œä½†æ˜¯è¿™æ ·çš„è¯æ˜¯ä¸å¯ä»¥å®ç°è½®æ’­çš„ã€‚è¦æƒ³å®ç°è½®æ’­å°±è¦å†åœ¨è¯¥&lt;code&gt;UIScrollView&lt;/code&gt;çš„å·¦å³ä¸¤ä¾§å„åŠ ä¸€å¼ &lt;code&gt;UIImageView&lt;/code&gt;ã€‚åœ¨æœ€åä¸€å¼ æ”¾image0ï¼Œ ç¬¬ä¸€å¼ æ”¾image2ã€‚è¿™æ ·çš„è¯å½“æˆ‘ä»¬æ»šåŠ¨åˆ°æœ€åæˆ–è€…æœ€å‰é¢çš„çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æŠŠåˆ—è¡¨åˆ‡æ¢åˆ°ç›¸åº”çš„ä½ç½®ï¼Œæ³¨æ„è¿™æ—¶å€™åˆ‡æ¢çš„æ—¶å€™ä¸èƒ½æœ‰åŠ¨ç”»ã€‚åªéœ€è¦è°ƒç”¨&lt;code&gt;scrollView.contentOffset = CGPoint(...)&lt;/code&gt;å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src="https://cloud.githubusercontent.com/assets/9990834/17270176/408925d4-568f-11e6-9217-e26c3cf09093.png" alt="å®é™…UISrollViewå›¾" /&gt;&lt;/p&gt;

&lt;h4&gt;åŸç†äºŒï¼šåˆ©ç”¨&lt;code&gt;UICollectionView&lt;/code&gt;å®ç°è½®æ’­å›¾ã€‚&lt;/h4&gt;

&lt;p&gt;ä½ å½“ç„¶å¯ä»¥åˆ©ç”¨&lt;strong&gt;åŸç†ä¸€&lt;/strong&gt;å†ç”¨&lt;code&gt;UICollectionView&lt;/code&gt;å®ç°ä¸€æ¬¡ã€‚ä½†æ˜¯æˆ‘è¿™é‡Œé‡‡ç”¨ä¸€ç§å·æ‡’çš„æ–¹å¼ï¼Œåˆ©ç”¨&lt;code&gt;UICollectionView&lt;/code&gt;çš„cellé‡ç”¨æœºåˆ¶ã€‚åˆ›å»ºä¸ªæ— æ•°ä¸ªcellï¼Œæ¯”å¦‚3x20000ã€‚å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡è¿›æ¥çš„æˆ‘ä»¬å°±å°†UICollectionViewæ»‘åˆ°3x20000x0.5çš„ä½ç½®ã€‚ç„¶ååˆ©ç”¨&lt;code&gt;cell.indexPath.item % 3&lt;/code&gt;æ¥å¯¹cellä¸Šçš„UIImageViewè¿›è¡Œimageæ˜¾ç¤ºã€‚è¿™ç§æ–¹å¼æ¯”è¾ƒå·æ‡’ï¼Œåœ¨åæ¥æ·»åŠ NSTimerè‡ªåŠ¨è½®æ’­å’Œç‚¹å‡»äº‹ä»¶çš„æ—¶å€™ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä¸è¿‡æœ‰ç‚¹å¤§ç‚®æ‰“å°é¸Ÿçš„æ„Ÿè§‰ã€‚æ‰€ä»¥æˆ‘åœ¨è¿™é‡Œä¹Ÿåªæ˜¯ä»‹ç»ä¸‹åŸç†ï¼Œå¦‚æœä½ æœ‰å…´è¶£ï¼Œå¯ä»¥è‡ªå·±å°è¯•å»å®ç°ä¸‹ã€‚è€Œä¸”UICollectionViewè‡ªå¸¦ä¸€ä¸ªæ–¹æ³•&lt;code&gt;- scrollToItemAtIndexPath:atScrollPosition:animated:&lt;/code&gt;è¿˜æ¯”è¾ƒå®ç”¨ã€‚&lt;/p&gt;

&lt;h3&gt;å…·ä½“å®ç°&lt;/h3&gt;

&lt;p&gt;é’ˆå¯¹åŸç†ä¸€ï¼Œæˆ‘å°±æ¥ç®€å•å®ç°ä¸‹ã€‚(æˆ‘è¿™é‡Œä½¿ç”¨ä»£ç åˆ›å»º,ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨Storyboardåˆ›å»º,åŸç†ä¸€æ ·)&lt;/p&gt;

&lt;h4&gt;åˆ›å»ºå·¥ç¨‹ï¼Œåˆ›å»º&lt;code&gt;BannerView.Swift&lt;/code&gt;,æ·»åŠ åˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š&lt;/h4&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;/// åˆå§‹åŒ–scrollView
lazy var scrollView: UIScrollView = {
       let scrollView = UIScrollView()
       scrollView.delegate = self
       scrollView.alwaysBounceVertical = false
       scrollView.bounces = true
       scrollView.pagingEnabled = true
       scrollView.scrollEnabled = true
       scrollView.showsVerticalScrollIndicator = false
       scrollView.showsHorizontalScrollIndicator = false
       return scrollView
   }()
/// åˆå§‹åŒ–pageControl
   lazy var pageControl: UIPageControl = {
       let pageControl = UIPageControl()
       pageControl.currentPageIndicatorTintColor = UIColor.redColor()
       pageControl.pageIndicatorTintColor = UIColor.whiteColor()
       return pageControl
   }()

   /// åœ¨inité‡Œè°ƒç”¨setupSubviewså³å¯
   func setupSubviews() {  
       self.addSubview(scrollView)
       self.addSubview(pageControl)

       scrollView.translatesAutoresizingMaskIntoConstraints = false
       pageControl.translatesAutoresizingMaskIntoConstraints = false

       self.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat("V:|[v]|", options: [], metrics: nil, views: ["v": scrollView]))
       self.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat("H:|[v]|", options: [], metrics: nil, views: ["v": scrollView]))

       self.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat("V:[p(==20)]-10-|", options: [], metrics: nil, views: ["p": pageControl]))
       self.addConstraints(NSLayoutConstraint.constraintsWithVisualFormat("H:[p(==100)]-10-|", options: [], metrics: nil, views: ["p": pageControl]))
   }
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;åˆå§‹åŒ–UIScrollViewï¼š&lt;/h4&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;func setupScrollView() {
        /// åˆ›å»º ï¼ˆimageNames.count + 2ï¼‰ä¸ªUIImageView
        for index in 0 ... (imageNmaes.count + 1) {
            let imageView = UIImageView(frame: CGRect(x: self.width*CGFloat(index), y: 0, width: self.width, height: self.height))
            var picName = String()
            switch index {
            case 0:
                picName = imageNames[imageNames.count-1]
                break
            case imageNames.count + 1:
                picName = imageNames[0]
                break
            default:
                picName = imageNames[index-1]
                break
            }

//          imageView.af_setImageWithURL(NSURL(string: picName)!)
            imageView.image = UIImage(named: picName)
            imageView.contentMode = .ScaleToFill
            imageView.clipsToBounds = true
            imageView.userInteractionEnabled = true
            scrollView.addSubview(imageView)
        }
        scrollView.contentSize = CGSize(width: self.width * CGFloat(imageNames.count + 2), height: self.height)
        scrollView.contentOffset = CGPoint(x: self.width, y: 0)
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;æ— é™è½®ç•ªçš„å®ç°ã€‚ï¼ˆé‡ç‚¹ï¼‰ä½¿ç”¨UIScrollViewDelegateåè®®ã€‚&lt;/h4&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;func scrollViewDidScroll(scrollView: UIScrollView) {
       if scrollView == self.scrollView {
           let contentOffsetX = scrollView.contentOffset.x
          ///å‘å‰æ»‘åŠ¨åˆ°ç¬¬0å¼ å›¾çš„æ—¶å€™ï¼Œæ»šåˆ°ç¬¬ä¸‰å¼ å›¾
           if contentOffsetX == 0 {
               scrollView.contentOffset = CGPoint(x: self.width * CGFloat(self.imageNames.count), y: 0)
           }
           /// è·‘åˆ°ç¬¬ä¸‰å¼ å›¾çš„æ—¶å€™ï¼Œæ»šåˆ°ç¬¬0å¼ å›¾
           if contentOffsetX == CGFloat(self.imageNames.count + 1)*self.width {
               scrollView.contentOffset = CGPoint(x: self.width, y: 0)
           }
           /// æ”¹å˜pageControlï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œä¸€å®šè¦ä¸€å®šè¦ä¸€å®šè¦ - 0.5ï¼Œ å› ä¸ºæœ€å‰é¢çš„ç¬¬0å¼ å›¾ä¸€ç›´ä¸æ˜¾ç¤ºã€‚
           let index = scrollView.contentOffset.x / self.width - 0.5
           self.pageControl.currentPage = Int(index)
       }
   }
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;æ·»åŠ è®¡æ—¶å™¨&lt;/h4&gt;

&lt;p&gt;å¥½äº†ï¼Œåšåˆ°è¿™é‡Œï¼Œä½ å·²ç»æˆåŠŸå®ç°äº†è½®æ’­å›¾ï¼Œå¯æ˜¯è¿™ä¸ªè½®æ’­å›¾æ˜¯æ‰‹åŠ¨çš„ï¼Œä¸‹é¢æ·»åŠ è‡ªåŠ¨æ»šåŠ¨ã€‚ä¹Ÿå¾ˆç®€å•ï¼Œè®¾ç½®ä¸€ä¸ªNSTimerè®¡æ—¶å™¨å³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;// MARK: - Timer
   var timer: NSTimer?
   var i = 1
   /// åœ¨scrollViewä¸Šçš„å›¾ç‰‡æˆåŠŸè®¾ç½®åè°ƒç”¨startTimerå³å¯
   private func startTimer() {
       if timer != nil {
           self.stopTimer()
       }
       /// è¿™é‡Œè®¾ç½®çš„æ»šåŠ¨é—´éš”ä¸º2ç§’
       timer = NSTimer.scheduledTimerWithTimeInterval(2, target: self, selector: #selector(autoScroll), userInfo: nil, repeats: true)
       NSRunLoop.currentRunLoop().addTimer(timer!, forMode: NSEventTrackingRunLoopMode)
       /// è¿™é‡Œä½¿ç”¨äº†NSEventTrackingRunLoopModeæ¨¡å¼ï¼Œé¿å…é¡µé¢æ»šåŠ¨æ—¶timerä¼šåœæ‰ã€‚
   }
   private func stopTimer() {
       timer?.invalidate()
       timer = nil
   }
   func autoScroll() {
       if i == imageNames.count + 1 {
           i = 1
       } else {
           i += 1
       }
       /// åœ¨å¤„ç†æ— é™è½®ç•ªçš„æ—¶å€™è®¾ç½®contentOffsetæ²¡æœ‰æ·»åŠ animatedï¼Œè¿™é‡Œè¦æ·»åŠ ä¸Šæ¥ï¼Œä¸ç„¶æœ‰ç§å¾ˆçªå…€çš„æ„Ÿè§‰ã€‚
       scrollView.setContentOffset(CGPoint(x: self.width * CGFloat(i), y: 0), animated: true)
   }
    /// æ‰‹åŠ¨æ»šåŠ¨ç»“æŸåæ¢å¤è®¡æ—¶
   func scrollViewDidEndDragging(scrollView: UIScrollView, willDecelerate decelerate: Bool) {
        self.startTimer()
    }
    /// å½“æ‰‹åŠ¨æ»šåŠ¨å¼€å§‹æ—¶åœæ­¢è®¡æ—¶
    func scrollViewWillBeginDragging(scrollView: UIScrollView) {
        self.stopTimer()
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;æ·»åŠ å…·ä½“ç‚¹å‡»äº‹ä»¶&lt;/h4&gt;

&lt;p&gt;å…·ä½“åˆ°ç‚¹å‡»äº‹ä»¶çš„è¯ï¼Œæˆ‘æ˜¯æ”¾åœ¨åˆå§‹åŒ–imageViewé‚£é‡Œå¤„ç†çš„ï¼Œç»™imageVIewæ·»åŠ ä¸€ä¸ªUITapGestureRecognizerï¼Œåœ¨è¿™é‡Œæœ€å¥½å†å†™ä¸€ä¸ªä»£ç†æ–¹æ³•ï¼Œå°†imageViewçš„ç‚¹å‡»äº‹ä»¶ä¼ é€’å‡ºå»ã€‚ç„¶åæ ¹æ®å½“å‰&lt;code&gt;contentOffet.x / self.width&lt;/code&gt;æ¥å°†å…·ä½“å“ªå¼ å›¾ç‰‡çš„äº‹ä»¶ä¼ é€’å‡ºå»ã€‚æˆ‘å°±ä¸ç”¨ä»£ç å±•ç¤ºäº†ã€‚&lt;/p&gt;

&lt;h3&gt;ç»“å°¾&lt;/h3&gt;

&lt;p&gt;æˆ‘è¿™é‡Œä½¿ç”¨äº†ä»£ç æ¥å¸ƒå±€ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨Xibæˆ–è€…Storyboardæ¥å¼„ï¼Œ
è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚ä½†æ˜¯æˆ‘è¿™ä¸ªå¤ç”¨æ€§æ¯”è¾ƒå·®ï¼Œå°è£…çš„ä¹Ÿä¸å¥½ï¼Œå¯æ˜¯å…·ä½“è¦çœ‹æ€è·¯ğŸ˜‚ã€‚ä»£ç å®ç°æ”¾åœ¨äº†Github Wikiä¸Šäº†&lt;a href="https://github.com/qiuncheng/qiuncheng.github.io/wiki/BannerView.Swift"&gt;BannerView.Swift&lt;/a&gt;ï¼Œç”±äºå·¥ç¨‹é‡å¤ªå°ï¼Œå°±æ²¡å°†å·¥ç¨‹æ–‡ä»¶ä¸Šä¼ äº†ã€‚&lt;/p&gt;

&lt;h4&gt;å…³äºä½œè€…&lt;/h4&gt;

&lt;p&gt;&lt;a href="http://qiuncheng.com"&gt;Qiuncheng&lt;/a&gt;ï¼Œä¸€ä½æ­£åœ¨iOSè·¯ä¸Šå‰è¡Œçš„åˆå­¦è€…ï¼Œæ­£åœ¨åŠªåŠ›æˆä¸ºä¸€ååˆæ ¼çš„iOSå¼€å‘è€…ã€‚&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>2.5 ä¸ªäººå¦‚ä½•å¼€å‘ä¸€æ¬¾è·¨ç»ˆç«¯çš„äº§å“ï¼Ÿ[Ruby Tuesday çš„åˆ†äº«]</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2015-09-08.html"/>
    <id>https://jiandanxinli.github.io/2015-09-08.html</id>
    <published>2015-09-08T08:00:00+08:00</published>
    <updated>2016-07-27T11:40:16+08:00</updated>
    <author>
      <name>Ben</name>
    </author>
    <content type="html">&lt;h2&gt;2.5 ä¸ªäººï¼Ÿ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;1 ä¸ªå…¨æ ˆï¼ˆæˆ‘ ^_^ï¼‰&lt;/li&gt;
&lt;li&gt;1 ä¸ª Ruby ç¨‹åºå‘˜&lt;/li&gt;
&lt;li&gt;0.5 ä¸ªå‰ç«¯å¼€å‘ï¼ˆäº§å“ç»ç†å…¼èŒï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;è·¨ç»ˆç«¯ï¼Ÿ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ç”µè„‘ï¼šæµè§ˆå™¨ã€å¾®ä¿¡ PC ç‰ˆï¼ˆPC ç‰ˆå¾®ä¿¡æ”¯æŒå¾®ä¿¡ç™»é™†ï¼‰&lt;/li&gt;
&lt;li&gt;å¹³æ¿ï¼šæµè§ˆå™¨ã€Appï¼ˆAndroid &amp;amp; iOSï¼‰ã€å¾®ä¿¡&lt;/li&gt;
&lt;li&gt;æ‰‹æœºï¼šæµè§ˆå™¨ã€Appï¼ˆAndroid &amp;amp; iOSï¼‰ã€å¾®ä¿¡&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™äº›ç»ˆç«¯ä¸ä»…ç”¨äºè®¿é—®ï¼Œè¿˜éœ€è¦æ”¯æŒæ¨é€å’Œæ”¯ä»˜ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;é€šçŸ¥æ¸ é“ï¼šé‚®ä»¶ã€çŸ­ä¿¡ã€å¾®ä¿¡ã€App æ¨é€&lt;/li&gt;
&lt;li&gt;æ”¯ä»˜æ¸ é“ï¼šæ”¯ä»˜å®ã€å¾®ä¿¡æ”¯ä»˜ã€é“¶è”æ”¯ä»˜&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;å°½å¯èƒ½é™ä½å¼€å‘å·¥ä½œé‡ï¼ˆäººå‘˜æœ‰é™ï¼‰&lt;/li&gt;
&lt;li&gt;å°½å¯èƒ½åˆ©ç”¨ RoR å·²æœ‰æŠ€æœ¯&lt;/li&gt;
&lt;li&gt;åŸºäº User Agent ä¿¡æ¯æ¥åŒºåˆ†å…·ä½“ç»ˆç«¯&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;ä» RoR å‡ºå‘&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ Turbolinks ä¼˜åŒ–ç½‘é¡µåŠ è½½ä½“éªŒ&lt;/li&gt;
&lt;li&gt;ä¸ä½¿ç”¨å‰ç«¯ MVC æ¡†æ¶åŠ é‡å·¥ä½œé‡&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å“åº”å¼è®¾è®¡ + éƒ¨åˆ†é¡µé¢ Variant Response&lt;/li&gt;
&lt;li&gt;ä¸é’ˆå¯¹å„ä¸ªç»ˆç«¯å•ç‹¬åˆ¶ä½œé¡µé¢&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;åŸºäº browser åŒºåˆ†ç»ˆç«¯&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;browser çš„åŒé‡å«ä¹‰ï¼šæµè§ˆå™¨ å’Œ browser gem&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªç»ˆç«¯éƒ½æœ‰å„è‡ªçš„ User Agent&lt;/li&gt;
&lt;li&gt;é€šè¿‡æ‰©å±• browser gem æ¥åˆ¤æ–­å½“å‰çš„ç»ˆç«¯ç±»å‹&lt;/li&gt;
&lt;li&gt;é€šè¿‡æ‰“å°ç»ˆç«¯ç±»å‹åˆ° body class ä½¿å¾— CSS å¯ä»¥é’ˆå¯¹æ€§è°ƒæ•´æ ·å¼&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;å…·ä½“æ­¥éª¤&lt;/h2&gt;

&lt;h3&gt;1. ä½¿ç”¨å¹¶æ‰©å±• &lt;a href="https://github.com/fnando/browser"&gt;browser gem&lt;/a&gt; æ¥åˆ¤æ–­ç»ˆç«¯ç±»å‹&lt;/h3&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="no"&gt;Browser&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;NAMES&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:smileback&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'SmileBack'&lt;/span&gt; &lt;span class="c1"&gt;# æˆ‘ä»¬ App çš„è‡ªå®šä¹‰ User Agent æ ‡è¯†&lt;/span&gt;
&lt;span class="no"&gt;Browser&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;NAMES&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:wechat&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'Wechat'&lt;/span&gt;
&lt;span class="no"&gt;Browser&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;NAMES&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:desktop&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'Desktop'&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Browser&lt;/span&gt;
  &lt;span class="k"&gt;module&lt;/span&gt; &lt;span class="nn"&gt;Meta&lt;/span&gt;
    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Smileback&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;Base&lt;/span&gt;
      &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;meta&lt;/span&gt;
        &lt;span class="s1"&gt;'smileback'&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;smileback?&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Wechat&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;Base&lt;/span&gt;
      &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;meta&lt;/span&gt;
        &lt;span class="s1"&gt;'wechat'&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;wechat?&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Desktop&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;Base&lt;/span&gt;
      &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;meta&lt;/span&gt;
        &lt;span class="s1"&gt;'desktop'&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;desktop?&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

  &lt;span class="k"&gt;module&lt;/span&gt; &lt;span class="nn"&gt;Consoles&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;smileback?&lt;/span&gt;
      &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ua&lt;/span&gt; &lt;span class="o"&gt;=~&lt;/span&gt; &lt;span class="sr"&gt;/smileback/i&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;nil?&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;wechat?&lt;/span&gt;
      &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ua&lt;/span&gt; &lt;span class="o"&gt;=~&lt;/span&gt; &lt;span class="sr"&gt;/MicroMessenger/i&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;nil?&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;desktop?&lt;/span&gt;
      &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;mobile?&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;wechat?&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;smileback?&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;2. åœ¨ html body class é‡Œæ·»åŠ  browser ä¿¡æ¯ï¼Œæ–¹ä¾¿ CSS å¥—ç”¨&lt;/h3&gt;
&lt;pre class="highlight erb"&gt;&lt;code&gt;&lt;span class="nt"&gt;&amp;lt;body&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="no"&gt;Browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;ua: &lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;env&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'HTTP_USER_AGENT'&lt;/span&gt;&lt;span class="p"&gt;]).&lt;/span&gt;&lt;span class="nf"&gt;to_s&lt;/span&gt; &lt;span class="cp"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;"&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt; &lt;span class="c"&gt;&amp;lt;!-- class ä¼šè¾“å‡ºå¦‚ chrome modern mac webkit desktop æˆ– iphone ios mobile modern other safari safari5 webkit --!&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight css"&gt;&lt;code&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="c"&gt;/* é»˜è®¤çš„æ ·å¼ */&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="nc"&gt;.desktop&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="c"&gt;/* æ¡Œé¢æµè§ˆå™¨å®šåˆ¶æ ·å¼ */&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="nc"&gt;.mobile&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="c"&gt;/* æ‰‹æœºæµè§ˆå™¨å®šåˆ¶æ ·å¼ */&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="nc"&gt;.wechat&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="c"&gt;/* å¾®ä¿¡å®šåˆ¶æ ·å¼ */&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;3. ä½¿ç”¨ &lt;a href="http://api.rubyonrails.org/classes/ActionController/MimeResponds.html"&gt;Variant Response&lt;/a&gt; æ¥é’ˆå¯¹éƒ¨åˆ†åŒºåˆ«å¤§çš„é¡µé¢åšä¸¤å¥—æˆ–å¤šå¥— views&lt;/h3&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# application_controller.rb&lt;/span&gt;

&lt;span class="n"&gt;before_action&lt;/span&gt; &lt;span class="ss"&gt;:detect_browser&lt;/span&gt;

&lt;span class="kp"&gt;private&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;detect_browser&lt;/span&gt;
  &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;variant&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;:mobile&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="no"&gt;Browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;ua: &lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;env&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'HTTP_USER_AGENT'&lt;/span&gt;&lt;span class="p"&gt;]).&lt;/span&gt;&lt;span class="nf"&gt;mobile?&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;éœ€è¦æ‹†åˆ†çš„é¡µé¢ï¼Œåšæˆå¦‚ä¸‹å½¢å¼ï¼š&lt;/p&gt;
&lt;pre class="highlight plaintext"&gt;&lt;code&gt;app/views/pages/home.erb
app/views/pages/home.html+mobile.erb # æ–‡ä»¶åæ ¼å¼ä¸º å“åº”æ ¼å¼+è®¾å¤‡å
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;4. æ·»åŠ  helperï¼Œæ–¹ä¾¿å¤æ‚çš„æƒ…å†µä¸‹è°ƒç”¨ï¼Œæ¯”å¦‚æ”¯ä»˜&lt;/h3&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# application_helper.rb&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;browser&lt;/span&gt;
  &lt;span class="vi"&gt;@_browser&lt;/span&gt; &lt;span class="o"&gt;||=&lt;/span&gt; &lt;span class="no"&gt;Browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;ua: &lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;env&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'HTTP_USER_AGENT'&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight slim"&gt;&lt;code&gt;&lt;span class="c"&gt;/ æ‡’å¾—è½¬ erb æ ¼å¼äº†ï¼Œä¸‹é¢è¿™æ®µæ˜¯ slim æ ¼å¼çš„&lt;/span&gt;
&lt;span class="p"&gt;-&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;smileback?&lt;/span&gt;
  &lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="nc"&gt;.button&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"jdxlsmileback://recharges/#{resource.id}/pay"&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;æ”¯ä»˜å®ä»˜æ¬¾
  &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="n"&gt;link_to&lt;/span&gt; &lt;span class="s1"&gt;'é“¶è”ä»˜æ¬¾'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pay_recharge_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resource&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;unionpay: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s1"&gt;'data-no-turbolink'&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;
&lt;span class="p"&gt;-&lt;/span&gt; &lt;span class="k"&gt;elsif&lt;/span&gt; &lt;span class="n"&gt;browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;wechat?&lt;/span&gt;
  &lt;span class="p"&gt;-&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;current_user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;weixin_id&lt;/span&gt;
    &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="n"&gt;link_to&lt;/span&gt; &lt;span class="s1"&gt;'å¾®ä¿¡æ”¯ä»˜'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'#'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;id: &lt;/span&gt;&lt;span class="s1"&gt;'wepay'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;class: &lt;/span&gt;&lt;span class="s1"&gt;'button'&lt;/span&gt;
    &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="n"&gt;link_to&lt;/span&gt; &lt;span class="s1"&gt;'é“¶è”ä»˜æ¬¾'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pay_recharge_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resource&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;unionpay: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s1"&gt;'data-no-turbolink'&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;
  &lt;span class="p"&gt;-&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="n"&gt;link_to&lt;/span&gt; &lt;span class="s1"&gt;'é“¶è”ä»˜æ¬¾'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pay_recharge_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resource&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;unionpay: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s1"&gt;'data-no-turbolink'&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;class: &lt;/span&gt;&lt;span class="s1"&gt;'button'&lt;/span&gt;
&lt;span class="p"&gt;-&lt;/span&gt; &lt;span class="k"&gt;elsif&lt;/span&gt; &lt;span class="n"&gt;browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;mobile?&lt;/span&gt;
  &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="n"&gt;link_to&lt;/span&gt; &lt;span class="s1"&gt;'æ”¯ä»˜å®ä»˜æ¬¾'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pay_recharge_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resource&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;alipay: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="ss"&gt;class: &lt;/span&gt;&lt;span class="s1"&gt;'button'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'data-no-turbolink'&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;
  &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="n"&gt;link_to&lt;/span&gt; &lt;span class="s1"&gt;'é“¶è”ä»˜æ¬¾'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pay_recharge_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resource&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;unionpay: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s1"&gt;'data-no-turbolink'&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;
&lt;span class="p"&gt;-&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt;
  &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="n"&gt;link_to&lt;/span&gt; &lt;span class="s1"&gt;'æ”¯ä»˜å®ä»˜æ¬¾'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pay_recharge_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resource&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;alipay: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="ss"&gt;class: &lt;/span&gt;&lt;span class="s1"&gt;'button'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'data-no-turbolink'&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;
  &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="n"&gt;link_to&lt;/span&gt; &lt;span class="s1"&gt;'å¾®ä¿¡æ”¯ä»˜'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pay_recharge_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resource&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;scan_wepay: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="n"&gt;link_to&lt;/span&gt; &lt;span class="s1"&gt;'é“¶è”ä»˜æ¬¾'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pay_recharge_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resource&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;unionpay: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="s1"&gt;'data-no-turbolink'&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;å…¶å®ƒç»éªŒ&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;iOS App æˆ‘ä»¬ç”¨ WKWebView å¥—çš„å£³ï¼ŒWKWebView æ¯” UIWebView æ€§èƒ½æ›´å¥½äº›ï¼Œä½†é™åˆ¶ä¹Ÿæ›´å¤šäº›ï¼Œå…·ä½“å¯ä»¥ Googleã€‚&lt;/li&gt;
&lt;li&gt;Android App æˆ‘ä»¬ç”¨é»˜è®¤çš„ WebViewï¼Œç›®å‰æ²¡å‘ç°æ›´å¥½çš„æ›¿ä»£å“ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯ä»˜æ¸ é“ä¹‹å‰æˆ‘ä»¬æ˜¯è‡ªå·±å°è£…çš„ï¼Œç°åœ¨å‘ç° &lt;a href="https://pingxx.com"&gt;Ping++&lt;/a&gt; ä¹Ÿä¸é”™ï¼Œå¤§å®¶å¯ä»¥è¯•è¯•ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;é‡ç‚¹æ¥äº†ï¼ï¼ï¼&lt;/h2&gt;

&lt;h3&gt;ç®€å•å¿ƒç†æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;æœ€å¤§çš„åè¯­å¿ƒç†å’¨è¯¢å¹³å°&lt;/li&gt;
&lt;li&gt;æœ€ä¸¥æ ¼çš„å’¨è¯¢å¸ˆå…¥é©»å®¡æ ¸&lt;/li&gt;
&lt;li&gt;ç«‹å¿—äºæä¾›æœ€ä¸“ä¸šçš„å¿ƒç†æœåŠ¡&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;å†…å¿ƒä¸–ç•Œé‚£ä¹ˆå¤§ï¼Œæƒ³ä¸æƒ³æ¥çœ‹çœ‹ï¼Ÿ&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬éœ€è¦ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Ruby å·¥ç¨‹å¸ˆ æœˆè–ª 15k èµ·&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æˆ‘ä»¬æä¾›ï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;æœ€äººæ€§åŒ–çš„å·¥ä½œç¯å¢ƒï¼ˆè€æ¿åŠå¤§éƒ¨åˆ†å‘˜å·¥éƒ½æœ‰å¿ƒç†å­¦ä¸“ä¸šèƒŒæ™¯ï¼Œç¨‹åºå‘˜é¼“åŠ±å¸ˆå¼±çˆ†äº† :smirk: ï¼‰&lt;/li&gt;
&lt;li&gt;éåŒ—äº¬åœ°åŒºå¯è¿œç¨‹å·¥ä½œï¼ˆæœ¬éƒ¨ä½äºåŒ—äº¬ä¸­å…³æ‘ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¬¢è¿å‹¾æ­ &lt;a href="mailto:hr@jiandanxinli.com"&gt;hr@jiandanxinli.com&lt;/a&gt;&lt;/p&gt;

&lt;h2&gt;ä¼‘æ¯ä¸‹ï¼Œçœ‹çœ‹å…»çœ¼çš„ç…§ç‰‡å§ï¼ˆé PSï¼‰&lt;/h2&gt;

&lt;p&gt;å¥³ç‹å¤§äººï¼ˆæ›¾ç”¨åï¼šç…¤çƒï¼‰åŠå¥¹çš„å­©å­ä»¬
&lt;img src="http://jdxl-img.b0.upaiyun.com/id_cards/f6c6fb9742d94eb1aa5f73eb3e8b15d1.jpg" alt="çŒ«" /&gt;&lt;/p&gt;

&lt;p&gt;å„ç§å¸…å“¥ç¾å¥³äº‘é›†çš„æ´»åŠ¨
&lt;img src="http://jdxl-img.b0.upaiyun.com/id_cards/6a9656184f9a467eac8d7c7f5ab0d5e2.jpg" alt="å¸…å“¥ç¾å¥³" /&gt;&lt;/p&gt;

&lt;p&gt;äº†è§£æ›´å¤šæˆ‘ä»¬å…¬å¸çš„è¯¦æƒ…å¯ä»¥ç§»æ­¥è¿™é‡Œï¼š &lt;a href="https://www.jiandanxinli.com/pages/37"&gt;https://www.jiandanxinli.com/pages/37&lt;/a&gt;&lt;/p&gt;
</content>
  </entry>
  <entry>
    <title>Railsé—ç•™ç¨‹åºé‡Œæœ€å¸¸çŠ¯çš„é”™è¯¯(è¯‘)</title>
    <link rel="alternate" href="https://jiandanxinli.github.io/2014-07-23.html"/>
    <id>https://jiandanxinli.github.io/2014-07-23.html</id>
    <published>2014-07-23T08:00:00+08:00</published>
    <updated>2016-08-08T10:12:51+08:00</updated>
    <author>
      <name>éŸ©å†°</name>
    </author>
    <content type="html">&lt;p&gt;åŸæ–‡å‡ºè‡ª&lt;a href="http://edelpero.svbtle.com/most-common-mistakes-on-legacy-rails-apps"&gt;most-common-mistakes-on-legacy-rails-apps&lt;/a&gt;, æ„Ÿè°¢ä½œè€…&lt;a href="http://edelpero.svbtle.com/"&gt;EZEQUIEL DELPERO&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;è¿‘æ¥æˆ‘ä¸€ç›´åœ¨å¯¹å‡ ä¸ªé—ç•™é¡¹ç›®ä½œç»´æŠ¤ã€‚&lt;/p&gt;

&lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼Œå¤„ç†é—ç•™é¡¹ç›®å¤šæ•°æ—¶é—´éƒ½æ„Ÿè§‰ç³Ÿé€äº†ï¼Œå› ä¸ºé‚£äº›ä»£ç é€šå¸¸éƒ½ä¸‘é™‹ä¸å ªè€Œä¸”æ™¦æ¶©éš¾æ‡‚ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘å†³å®šåšä¸€ä¸ªåˆ—è¡¨ï¼Œè®°å½•ä¸‹é‚£äº›å…¬è®¤çš„ä¸è‰¯å®è·µï¼Œæˆ–è€…æ˜¯æˆ‘è®¤ä¸ºä¸å¤ªå¥½çš„å®è·µï¼Œä»¥åŠå¦‚ä½•æ”¹è‰¯ä»£ç æ¥é¿å…è¿™äº›ä¸è‰¯å®è·µã€‚&lt;/p&gt;

&lt;h3&gt;é—®é¢˜ä¸€è§ˆ&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;åœ¨æ¨¡å‹å±‚ä»¥å¤–ä½¿ç”¨æŸ¥è¯¢æ–¹æ³•&lt;/li&gt;
&lt;li&gt;åœ¨è§†å›¾å±‚ä½¿ç”¨ä¸šåŠ¡é€»è¾‘&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨æ— æ„ä¹‰çš„æ–¹æ³•åå’Œå˜é‡å&lt;/li&gt;
&lt;li&gt;æ¡ä»¶åˆ¤æ–­æ—¶ä½¿ç”¨unlessæˆ–è€…å¦å®šçš„è¡¨è¾¾å¼&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰éµå¾ªâ€œå‘½ä»¤ï¼Œä¸è¦å»è¯¢é—®â€åŸåˆ™&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å¤æ‚çš„æ¡ä»¶&lt;/li&gt;
&lt;li&gt;åœ¨æ¨¡å‹çš„å®ä¾‹æ–¹æ³•é‡Œï¼Œæœ¬æ¥ä¸éœ€è¦çš„æ—¶å€™ä½¿ç”¨äº†â€œself.â€&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨æ¡ä»¶è¡¨è¾¾å¼å¹¶ä¸”è¿”å›äº†æ¡ä»¶&lt;/li&gt;
&lt;li&gt;åœ¨è§†å›¾å±‚ä½¿ç”¨è¡Œå†…æ ·å¼&lt;/li&gt;
&lt;li&gt;åœ¨è§†å›¾å±‚ä½¿ç”¨JavaScript&lt;/li&gt;
&lt;li&gt;è°ƒç”¨æ–¹æ³•æ—¶æŠŠå¦ä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨ä½œä¸ºå‚æ•°&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰ä½¿ç”¨ç±»æ¥éš”ç¦»Rake Tasks&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰éµå¾ªSandi Metzçš„è§„åˆ™&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;åœ¨æ¨¡å‹å±‚ä»¥å¤–ä½¿ç”¨æŸ¥è¯¢æ–¹æ³•&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ä¸å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/controllers/users_controller.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsersController&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ApplicationController&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;index&lt;/span&gt;
    &lt;span class="vi"&gt;@users&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;User&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;where&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;active: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;order&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:last_login_at&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ®µä»£ç ä¸å¯é‡ç”¨è€Œä¸”éš¾äºæµ‹è¯•ã€‚å¦‚æœä½ åœ¨åˆ«çš„åœ°æ–¹ä¹Ÿæƒ³æŸ¥æ‰¾å…¨éƒ¨ç”¨æˆ·å¹¶è¿›è¡Œæ’åºï¼Œå°±ä¼šå‡ºç°å†—ä½™ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¥½çš„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ¯”èµ·åœ¨æ§åˆ¶å™¨é‡Œä½¿ç”¨æŸ¥è¯¢æ–¹æ³•ï¼Œæˆ‘ä»¬çš„åšæ³•æ˜¯åœ¨æ¨¡å‹å±‚ä¸­ä½¿ç”¨scopeæŠŠå®ƒä»¬ç‹¬ç«‹å‡ºæ¥ï¼Œå°±å¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚è¿™æ ·åšæ—¢å¯ä»¥ä½¿ä»£ç èƒ½å¤Ÿå¤ç”¨ï¼Œåˆä¾¿äºä»£ç é˜…è¯»å’Œæµ‹è¯•ã€‚&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/models/user.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;User&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;

  &lt;span class="n"&gt;scope&lt;/span&gt; &lt;span class="ss"&gt;:active&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;where&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;active: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="n"&gt;scope&lt;/span&gt; &lt;span class="ss"&gt;:by_last_login_at&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;order&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:lasst_login_at&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/controllers/users_controller.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsersController&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ApplicationController&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;index&lt;/span&gt;
    &lt;span class="vi"&gt;@users&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;User&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;active&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;by_last_login_at&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¯å½“ä½ æƒ³ç”¨whereã€orderã€joinsã€includesã€groupã€havingæˆ–è€…å…¶ä»–æŸ¥è¯¢æ–¹æ³•æ—¶ï¼Œè®°å¾—è¦æŠŠå®ƒä»¬æ”¾åœ¨æ¨¡å‹å±‚é‡Œã€‚&lt;/p&gt;

&lt;h3&gt;åœ¨è§†å›¾å±‚ä½¿ç”¨ä¸šåŠ¡é€»è¾‘&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ä¸å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;lt;!--&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;views&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;posts&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;html&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;erb&lt;/span&gt; &lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nf"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="sx"&gt;%= "#{@comments.count} Comment#{@comments.count =&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;?&lt;/span&gt; &lt;span class="s1"&gt;''&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'s'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;" %&amp;gt;
&amp;lt;/h2&amp;gt;
...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;åˆçœ‹ä¹‹ä¸‹è¿™å°æ®µä»£ç ä¼¼ä¹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å®ƒä¼šè®©HTMLå˜å¾—æœ‰ç‚¹éš¾ä»¥é˜…è¯»ï¼Œè€Œä¸”å¯ä»¥è‚¯å®šçš„è¯´ä¸€æ—¦ä½ åœ¨è§†å›¾å±‚æ·»åŠ äº†é€»è¾‘ä»£ç ï¼Œé‚£ä¹ˆæ—¥åä½ å®šä¼šæ·»åŠ æ›´å¤šçš„é€»è¾‘åˆ°è§†å›¾ã€‚è¿™æ®µä»£ç è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‡Œé¢çš„é€»è¾‘æ— æ³•å¤ç”¨ï¼Œè€Œä¸”ä¸èƒ½å•ç‹¬æµ‹è¯•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¥½çš„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨Railsçš„helperæ–¹æ³•æŠŠä¸šåŠ¡é€»è¾‘éš”ç¦»å‡ºæ¥&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/helpers/comments_helper.rb&lt;/span&gt;
&lt;span class="k"&gt;module&lt;/span&gt; &lt;span class="nn"&gt;CommentsHelper&lt;/span&gt;
  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;comments_count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;comments&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;comments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;count&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; Comment&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;comments&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;count&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;?&lt;/span&gt; &lt;span class="s1"&gt;''&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'s'&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;lt;!--&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;views&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;posts&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;html&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;erb&lt;/span&gt; &lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="sx"&gt;%= comments_count(@comments) %&amp;gt;
&amp;lt;/h2&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ä½¿ç”¨æ— æ„ä¹‰çš„æ–¹æ³•åå’Œå˜é‡å&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ä¸å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/models/topic.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Topic&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nc"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;r_topics&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;questions&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

    &lt;span class="n"&gt;questions&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;each&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
      &lt;span class="n"&gt;topics&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;q&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;topics&lt;/span&gt;

      &lt;span class="n"&gt;topics&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;each&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;enabled?&lt;/span&gt;
          &lt;span class="n"&gt;rt&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="no"&gt;Topic&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;where&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;id: &lt;/span&gt;&lt;span class="n"&gt;rt&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ç±»é—ç•™ä»£ç æœ€ä¸»è¦çš„é—®é¢˜åœ¨äºï¼šä½ éœ€è¦èŠ±è´¹å¤§æŠŠæ—¶é—´æ¥ææ¸…æ¥šè¿™äº›ä»£ç çš„ç”¨é€”ã€‚r_topicsè¿™ä¸ªæ–¹æ³•æ˜¯åšä»€ä¹ˆçš„ï¼Œrtè¿™ä¸ªå˜é‡åˆæ˜¯ä»€ä¹ˆæ„æ€ã€‚å…¶ä»–çš„ä¸€äº›å˜é‡ï¼Œæ¯”å¦‚åœ¨ä»£ç å—é‡Œç”¨åˆ°çš„é‚£ä¸ªï¼Œå˜é‡åçš„å«ä¹‰å¾ˆæ¨¡ç³Šï¼Œè¿™æ ·ä¹Ÿä½¿å¾—å®ƒä»¬çš„ç”¨é€”åˆçœ‹èµ·æ¥å¾ˆéš¾ç†è§£ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¥½çš„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¯¹æ–¹æ³•å’Œå˜é‡å‘½åæ—¶é€‰é‚£äº›èƒ½è¡¨è¾¾å‡ºå…¶å«ä¹‰çš„åå­—ã€‚è¿™æ ·æ›´ä¾¿äºå…¶ä»–å¼€å‘è€…ç†è§£ä½ çš„ä»£ç ã€‚&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/models/topic.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Topic&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nc"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;related&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;questions&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;related_topics&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

    &lt;span class="n"&gt;questions&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;each&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;question&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
      &lt;span class="n"&gt;topics&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;question&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;topics&lt;/span&gt;

      &lt;span class="n"&gt;topics&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;each&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;topic&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;topic&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;enabled?&lt;/span&gt;
          &lt;span class="n"&gt;related_topics&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;topic&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="no"&gt;Topic&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;where&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;id: &lt;/span&gt;&lt;span class="n"&gt;related_topics&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ ·æ”¹è¿›çš„å¥½å¤„åœ¨äºï¼š&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€æ¬¡çœ‹åˆ°æ–¹æ³•åæ—¶å°±ä¼šå¯¹æ–¹æ³•è¿”å›å€¼æœ‰ä¸ªæ¦‚å¿µã€‚ä¸€ä¸ªä¸ç»™å®šé—®é¢˜é›†åˆç›¸å…³è”çš„ä¸»é¢˜çš„é›†åˆã€‚&lt;/li&gt;
&lt;li&gt;ç°åœ¨ä½ èƒ½å¤Ÿäº†è§£related_topicsè¡¨ç¤ºä¸€ä¸ªæ•°ç»„ï¼Œå®ƒé‡Œé¢å­˜æ”¾äº†ä¸€ä¸ªä¸ç»™å®šé—®é¢˜é›†åˆç›¸å…³è”çš„ä¸»é¢˜çš„é›†åˆã€‚ä¹‹å‰æ‰“ä»£ç é‡Œrtè¡¨ç¤ºä»€ä¹ˆéå¸¸å«ç³Šã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨topicä»£æ›¿ä¹‹å‰çš„tï¼Œå¹¶ç”¨questionæ›¿æ¢æ‰qï¼Œä½¿å¾—ä½ çš„ä»£ç æ›´ä¾¿äºé˜…è¯»ï¼Œå› ä¸ºä½ ä¸å†éœ€è¦è„‘è¡¥è¿™äº›å˜é‡çš„ç”¨é€”ã€‚ç°åœ¨è¿™äº›ä»£ç å·²ç„¶èƒ½å¤Ÿè‡ªè§£é‡Šä¸€åˆ‡ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;æ¡ä»¶åˆ¤æ–­æ—¶ä½¿ç”¨unlessæˆ–è€…å¦å®šçš„è¡¨è¾¾å¼&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ä¸å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/services/charge_user.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ChargeUser&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nc"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;perform&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kp"&gt;false&lt;/span&gt; &lt;span class="k"&gt;unless&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;enabled?&lt;/span&gt;

    &lt;span class="no"&gt;PaymentGateway&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;charge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;account_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ®µä»£ç ä¹Ÿè®¸å¹¶ä¸éš¾ç†è§£ï¼Œä½†æ˜¯ä½¿ç”¨unlessæˆ–è€…å¦å®šçš„æ¡ä»¶è¡¨è¾¾å¼ä¼šç¨å¾®å¢åŠ ä»£ç çš„å‘å¤æ‚åº¦ï¼Œå› ä¸ºä½ å¿…é¡»å¯¹å®ƒè¦åˆ¤æ–­çš„æ¡ä»¶è‡ªè¡Œè„‘è¡¥ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¥½çš„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ”¹ç”¨ifæˆ–è€…è‚¯å®šçš„æ¡ä»¶è¡¨è¾¾å¼ä¹‹åï¼Œä¸Šè¿°ä»£ç å°±ä¼šå¥½æ‡‚å¾—å¤šã€‚&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/models/user.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;User&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;disabled?&lt;/span&gt;
    &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;enabled?&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/services/charge_user.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ChargeUser&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nc"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;perform&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kp"&gt;false&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;disabled?&lt;/span&gt;

    &lt;span class="no"&gt;PaymentGateway&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;charge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;account_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;amount&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸è§‰å¾—è¿™æ ·å†™ä»£ç æ›´æ˜“è¯»äº†å—ï¼Ÿæˆ‘æ›´å€¾å‘äºä½¿ç”¨ifè€Œéunlessï¼Œç”¨è‚¯å®šçš„è¡¨è¾¾å¼å¤šè¿‡è‚¯å®šçš„è¡¨è¾¾å¼ã€‚å®åœ¨ä¸è¡Œå°±æ·»åŠ ä¸ªåæ„çš„æ–¹æ³•ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨Useræ¨¡å‹é‡ŒåŠ çš„é‚£ä¸ªã€‚&lt;/p&gt;

&lt;h3&gt;æ²¡æœ‰éµå¾ªâ€œå‘½ä»¤ï¼Œä¸è¦å»è¯¢é—®â€åŸåˆ™&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ä¸å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/models/user.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;User&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;enable!&lt;/span&gt;
    &lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;enabled: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/controllers/users_controller.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsersController&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ApplicationController&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;enable&lt;/span&gt;
    &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;User&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;params&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:id&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;disabled?&lt;/span&gt;
      &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;enable!&lt;/span&gt;
      &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"User enabled"&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
      &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"User already disabled"&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="n"&gt;redirect_to&lt;/span&gt; &lt;span class="n"&gt;user_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="ss"&gt;notice: &lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œçš„é—®é¢˜æ˜¯åœ¨ä¸æ°å½“çš„åœ°æ–¹å‡ºç°äº†æ§åˆ¶é€»è¾‘ã€‚ä½ å…ˆåˆ¤æ–­äº†ç”¨æˆ·æ˜¯å¦æ˜¯ä¸å¯ç”¨ï¼Œå¦‚æœçš„ç¡®ä¸å¯ç”¨ï¼Œå°±å¯ç”¨è¿™ä¸ªç”¨æˆ·ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¥½çš„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æ¯”è¾ƒå¥½çš„æ”¹åŠæ³•æ˜¯æŠŠæ§åˆ¶é€»è¾‘æ”¾åˆ°enable!æ–¹æ³•é‡Œã€‚&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/models/user.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;User&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;enable!&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;disabled?&lt;/span&gt;
      &lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;enabled: &lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/controllers/users_controller.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;UsersController&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ApplicationController&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;enable&lt;/span&gt;
    &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;User&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;params&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:id&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;enable!&lt;/span&gt;
      &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"User enabled"&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
      &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"User already disabled"&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="n"&gt;redirect_to&lt;/span&gt; &lt;span class="n"&gt;user_path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="ss"&gt;notice: &lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç°åœ¨æ§åˆ¶å™¨ä¸ç”¨å…³å¿ƒuseréœ€è¦æ»¡è¶³ä½•ç§æ¡ä»¶æ‰ä¼šè¢«å¯ç”¨ã€‚ç›¸å…³çš„åˆ¤æ–­ç”±Useræ¨¡å‹å’Œenableï¼æ–¹æ³•æ¥å¤„ç†ã€‚&lt;/p&gt;

&lt;h3&gt;ä½¿ç”¨å¤æ‚çš„æ¡ä»¶&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ä¸å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/controllers/posts_controller.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PostsController&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ApplicationController&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;destroy&lt;/span&gt;
    &lt;span class="n"&gt;post&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Post&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;params&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:id&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;enabled?&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;own_post?&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;admin?&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;destroy&lt;/span&gt;
      &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"Post destroyed."&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
      &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"You're not allow to destroy this post."&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="n"&gt;redirect_to&lt;/span&gt; &lt;span class="n"&gt;posts_path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;notice: &lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¡ä»¶è¡¨è¾¾å¼å¼„çš„å¤ªè¿‡å¤æ‚äº†ï¼Œå®é™…ä¸Šè¿™é‡Œåªæƒ³çŸ¥é“ä¸€ä»¶äº‹ï¼šç”¨æˆ·å¯ä»¥åˆ æ‰postå—ï¼Ÿ&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¥½çš„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ä»ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥äº†è§£åˆ°ï¼Œä¸€ä¸ªç”¨æˆ·éœ€è¦æ˜¯postçš„æ‰€æœ‰è€…æˆ–è€…è¿™ä¸ªç”¨æˆ·æ˜¯ç®¡ç†å‘˜ï¼Œå¹¶ä¸”postæœ¬èº«ä¹Ÿæ˜¯å¯ç”¨çš„ï¼Œæ‰å¯ä»¥åˆ é™¤è¿™ä¸ªpostã€‚æœ€å¥½çš„åšæ³•å°±æ˜¯ï¼ŒæŠŠè¿™äº›æ¡ä»¶æŠ½å–æˆä¸€ä¸ªæ—¥åå¯ä»¥å¤ç”¨çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/models/user.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;User&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;can_destroy_post?&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;enabled?&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;own_post?&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;admin?&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/controllers/posts_controller.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PostsController&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ApplicationController&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;destroy&lt;/span&gt;
    &lt;span class="n"&gt;post&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Post&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;params&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:id&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;can_destroy_post?&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;destroy&lt;/span&gt;
      &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"Post destroyed."&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
      &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;"You're not allow to destroy this post."&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="n"&gt;redirect_to&lt;/span&gt; &lt;span class="n"&gt;posts_path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;notice: &lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¯å½“æ¡ä»¶è¡¨è¾¾å¼é‡Œå‡ºç°äº†&amp;amp;&amp;amp;æˆ–è€…||ï¼Œå°±åº”è¯¥æŠŠå®ƒä»¬æå–ä¸ºæ–¹æ³•ï¼Œä»¥å¤‡ä»¥åå¤ç”¨ã€‚&lt;/p&gt;

&lt;h3&gt;åœ¨æ¨¡å‹çš„å®ä¾‹æ–¹æ³•é‡Œï¼Œæœ¬æ¥ä¸éœ€è¦çš„æ—¶å€™ä½¿ç”¨äº†â€œself.â€&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ä¸å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/models/user.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;User&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;full_name&lt;/span&gt;
    &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="nb"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;first_name&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="nb"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;last_name&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ®µä»£ç å¹¶ä¸å¤æ‚ä½†æ˜¯é‡Œé¢å¹¶ä¸éœ€è¦ä½¿ç”¨â€œself.â€ã€‚æŠŠâ€œself.â€å»æ‰ä¼šä½¿ä»£ç æ›´ç®€æ´ä¸”ä¸å½±å“å¯ç”¨æ€§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¥½çš„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åœ¨æ¨¡å‹é‡Œï¼Œåªæœ‰åœ¨å®ä¾‹æ–¹æ³•é‡Œéœ€è¦èµ‹å€¼æ—¶ï¼Œæ‰ä¼šç”¨åˆ°â€œself.â€ï¼Œå¦åˆ™é€šç¯‡çš„â€œself.â€åªä¼šå¾’å¢ä»£ç å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/models/user.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;User&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;full_name&lt;/span&gt;
    &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;first_name&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;last_name&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ä½¿ç”¨æ¡ä»¶è¡¨è¾¾å¼å¹¶ä¸”è¿”å›äº†æ¡ä»¶&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ä¸å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/models/user.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;User&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;full_name&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;name&lt;/span&gt;
      &lt;span class="nb"&gt;name&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
      &lt;span class="s2"&gt;"No name"&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ–è€…&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/models/user.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;User&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;full_name&lt;/span&gt;
    &lt;span class="nb"&gt;name&lt;/span&gt; &lt;span class="p"&gt;?&lt;/span&gt; &lt;span class="nb"&gt;name&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;"No name"&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ®µä»£ç çš„é—®é¢˜åœ¨äºï¼šåœ¨ä¸éœ€è¦çš„åœ°æ–¹æ·»åŠ äº†æ§åˆ¶è¯­å¥ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¥½çš„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æœ‰ç§æ›´ç®€ä¾¿çš„å¤„ç†æ–¹å¼ä¹Ÿèƒ½è¾¾åˆ°åŒæ ·æ•ˆæœ&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/models/user.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;User&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;ActiveRecord&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="no"&gt;Base&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;full_name&lt;/span&gt;
    &lt;span class="nb"&gt;name&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="s2"&gt;"No name"&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç®€å•æ¥è¯´è¿™æ®µä»£ç ä¼šåœ¨nameä¸ä¸ºfalseæˆ–nilæ—¶å°†å…¶è¿”å›ï¼Œå¦åˆ™è¿”å›&amp;quot;No name&amp;quot;.&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨å¾—å½“çš„è¯ï¼Œ||å’Œ&amp;amp;&amp;amp;è¿™äº›æ“ä½œç¬¦ä¼šå¯¹æå‡ä½ çš„ä»£ç å“è´¨æä¾›å·¨å¤§åŠ©åŠ›ã€‚&lt;/p&gt;

&lt;h3&gt;åœ¨è§†å›¾å±‚ä½¿ç”¨è¡Œå†…æ ·å¼&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ä¸å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;lt;!--&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;views&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;projects&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;html&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;erb&lt;/span&gt; &lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nf"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;h3&lt;/span&gt; &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"font-size:20px;letter-spacing:normal;color:#95d60a;line-height:100%;margin:0;font-family:'Proxima Nova';"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="no"&gt;SECRET&lt;/span&gt; &lt;span class="no"&gt;PROJECT&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="sr"&gt;/h3&amp;gt;
...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬åªåˆ—å‡ºä¸€ä¸ªæ ‡ç­¾ï¼Œæ‰€æœ‰çš„æ ·å¼éƒ½å†™åœ¨äº†æ ‡ç­¾é‡Œã€‚ç°åœ¨ï¼Œè¯·è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæ‰€æœ‰çš„æ ‡ç­¾éƒ½æ¥æ”¶è¡Œå†…æ ·å¼ã€‚è¿™ä¼šæŠŠä½ çš„HTMLå˜å¾—å’Œå…¶éš¾åº¦ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæ¯å½“ä½ éœ€è¦å¼•å…¥å¦ä¸€ä¸ªåŒæ ·çš„h3å…ƒç´ æ—¶ï¼Œå°†ä¸å¾—ä¸æŠŠåŒæ ·ä»£ç ç…§æ¬ä¸€è¾¹ï¼Œé€ æˆå†—ä½™ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="sr"&gt;//&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;assets&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;stylesheets&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;css&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;project&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;font&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="ss"&gt;size: &lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="n"&gt;px&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;letter&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="ss"&gt;spacing: &lt;/span&gt;&lt;span class="n"&gt;normal&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="ss"&gt;color: &lt;/span&gt;&lt;span class="c1"&gt;#95d60a;&lt;/span&gt;
    &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="ss"&gt;height: &lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="ss"&gt;margin: &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;font&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;family&lt;/span&gt;&lt;span class="ss"&gt;:'Proxima Nova'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;lt;!--&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;views&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;projects&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;html&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;erb&lt;/span&gt; &lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nf"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;h3&lt;/span&gt; &lt;span class="k"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"project-title"&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="no"&gt;SECRET&lt;/span&gt; &lt;span class="no"&gt;PROJECT&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="sr"&gt;/h3&amp;gt;
...
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä¹ˆå¯ä»¥å¤ç”¨æ ·å¼äº†ï¼Œå¹¶ä¸”HTMLçš„å¯è¯»æ€§ä¹Ÿæœ‰æ‰€æé«˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;è¿™åªæ˜¯ä¸ªç®€å•çš„èŒƒä¾‹ï¼Œå®é™…åº”ç”¨æ—¶ä½ åº”è¯¥æŠŠCSSæ‹†åˆ†æˆå¤šä¸ªå°æ–‡ä»¶ï¼Œå¹¶é€šè¿‡application.cssæ¥åŠ è½½è¿™äº›æ–‡ä»¶ã€‚å¦å¤–åªæœ‰åœ¨emailæ¨¡æ¿é‡Œï¼Œæ‰ä¼šç”¨åˆ°è¡Œå†…æ ·å¼ã€‚&lt;/p&gt;

&lt;p&gt;###åœ¨è§†å›¾å±‚ä½¿ç”¨JavaScript&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ä¸å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;lt;!--&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;views&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;questions&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;html&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;erb&lt;/span&gt; &lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nf"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;textarea&lt;/span&gt; &lt;span class="n"&gt;rows&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"4"&lt;/span&gt; &lt;span class="n"&gt;cols&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"50"&lt;/span&gt; &lt;span class="k"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'wysihtml5'&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="no"&gt;Insert&lt;/span&gt; &lt;span class="n"&gt;your&lt;/span&gt; &lt;span class="n"&gt;question&lt;/span&gt; &lt;span class="n"&gt;details&lt;/span&gt; &lt;span class="n"&gt;here&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nf"&gt;&amp;lt;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;textarea&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nf"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;script&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;document&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;ready&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
  &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'textarea.wysihtml5'&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;wysihtml5&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
    &lt;span class="s2"&gt;"font-styles"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="no"&gt;Font&lt;/span&gt; &lt;span class="n"&gt;styling&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;g&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="nf"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
    &lt;span class="s2"&gt;"emphasis"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="no"&gt;Italics&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bold&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
    &lt;span class="s2"&gt;"lists"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;Un&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;ordered&lt;/span&gt; &lt;span class="n"&gt;lists&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Bullets&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="no"&gt;Numbers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
    &lt;span class="s2"&gt;"html"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;false&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="no"&gt;Button&lt;/span&gt; &lt;span class="n"&gt;which&lt;/span&gt; &lt;span class="n"&gt;allows&lt;/span&gt; &lt;span class="n"&gt;you&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;edit&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;generated&lt;/span&gt; &lt;span class="no"&gt;HTML&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;false&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
    &lt;span class="s2"&gt;"link"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="no"&gt;Button&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;insert&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;link&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
    &lt;span class="s2"&gt;"image"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="no"&gt;Button&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;insert&lt;/span&gt; &lt;span class="n"&gt;an&lt;/span&gt; &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
    &lt;span class="s2"&gt;"color"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="no"&gt;Button&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;change&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;font&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;script&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œçš„é€»è¾‘å’Œç‰¹å®šé¡µé¢è€¦åˆåœ¨ä¸€èµ·ï¼Œå¯¼è‡´ä»£ç ä¸å¯å¤ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¥½çš„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Railsé‡Œé¢æœ‰ä¸“é—¨ç”¨äºç»„ç»‡å’Œå­˜æ”¾javascriptä»£ç çš„åœ°æ–¹ï¼šâ€œapp/assets/javascripts/â€ã€‚&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="sr"&gt;//&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;assets&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;javascripts&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;application&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;js&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;document&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;ready&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;function&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt;
  &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'textarea.wysihtml5'&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;wysihtml5&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
    &lt;span class="s2"&gt;"font-styles"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="no"&gt;Font&lt;/span&gt; &lt;span class="n"&gt;styling&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;g&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="nf"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
    &lt;span class="s2"&gt;"emphasis"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="no"&gt;Italics&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bold&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
    &lt;span class="s2"&gt;"lists"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;Un&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;ordered&lt;/span&gt; &lt;span class="n"&gt;lists&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;g&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Bullets&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="no"&gt;Numbers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
    &lt;span class="s2"&gt;"html"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;false&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="no"&gt;Button&lt;/span&gt; &lt;span class="n"&gt;which&lt;/span&gt; &lt;span class="n"&gt;allows&lt;/span&gt; &lt;span class="n"&gt;you&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;edit&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;generated&lt;/span&gt; &lt;span class="no"&gt;HTML&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;false&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
    &lt;span class="s2"&gt;"link"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="no"&gt;Button&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;insert&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;link&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
    &lt;span class="s2"&gt;"image"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="no"&gt;Button&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;insert&lt;/span&gt; &lt;span class="n"&gt;an&lt;/span&gt; &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
    &lt;span class="s2"&gt;"color"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt; &lt;span class="sr"&gt;//&lt;/span&gt;&lt;span class="no"&gt;Button&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;change&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;font&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="no"&gt;Default&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="o"&gt;&amp;lt;!--&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;views&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;questions&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;html&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;erb&lt;/span&gt; &lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nf"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;textarea&lt;/span&gt; &lt;span class="n"&gt;rows&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"4"&lt;/span&gt; &lt;span class="n"&gt;cols&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"50"&lt;/span&gt; &lt;span class="k"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'wysihtml5'&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="no"&gt;Insert&lt;/span&gt; &lt;span class="n"&gt;your&lt;/span&gt; &lt;span class="n"&gt;question&lt;/span&gt; &lt;span class="n"&gt;details&lt;/span&gt; &lt;span class="n"&gt;here&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nf"&gt;&amp;lt;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;textarea&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨viewå±‚ä»»ä½•åœ°æ–¹ç”¨è¿™æ®µä»£ç äº†ã€‚åªéœ€è¦é¡µé¢ä¸Šæœ‰ä¸€ä¸ªå¸¦æœ‰wysihtml5è¿™ä¸ªclassçš„textareaï¼Œåˆšæ‰çš„é‚£æ®µjså°±ä¼šè¢«æ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;è¿™åªæ˜¯ä¸ªç®€å•çš„èŒƒä¾‹ï¼Œå®é™…åº”ç”¨æ—¶éœ€è¦è€ƒè™‘æ˜¯å¦éœ€è¦æŠŠä½ çš„JavaScriptæ‹†åˆ†æˆè‹¥å¹²å°çš„æ–‡ä»¶ï¼Œå¹¶é€šè¿‡application.jsæ¥åŠ è½½è¿™äº›æ–‡ä»¶ã€‚å¦å¤–ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯CoffeeScriptè€ŒéJavaScriptï¼Œè¯·åšæŒä¸è¦æŠŠCoffeeScriptä¸æ™®é€šJavaScriptåœ¨ä¸€èµ·æ··å†™ã€‚&lt;/p&gt;

&lt;h3&gt;è°ƒç”¨æ–¹æ³•æ—¶æŠŠå¦ä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨ä½œä¸ºå‚æ•°&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ä¸å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/services/find_or_create_topic.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;FindOrCreateTopic&lt;/span&gt;
  &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
  &lt;span class="nf"&gt;def&lt;/span&gt; &lt;span class="nb"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;perform&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sluggify&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;name&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nf"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ®µä»£ç é‡Œè°ƒç”¨äº†findæ–¹æ³•å¹¶ä¼ å…¥äº†2ä¸ªå‚æ•°ï¼Œé¦–å‚æ•°ä¸ºuserï¼Œç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯ç›´æ¥è°ƒç”¨äº†sluggifyè¿™ä¸ªæ–¹æ³•å¹¶æŠŠnameä½œä¸ºå‚æ•°ä¼ ç»™sluggifyã€‚ä½ ä¹Ÿè®¸ä¼šæœ‰ç–‘é—®ï¼Œè¿™ä¹ˆå†™æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿæˆ‘æ˜æ˜å®Œå…¨èƒ½å¤Ÿçœ‹æ‡‚è¿™æ®µä»£ç å‘€ã€‚æ˜¯çš„ï¼Œä»£ç ä¹Ÿè®¸ä¸éš¾ç†è§£ï¼Œä½†æ˜¯æ¯æ¬¡åˆ°è¿™é‡Œä½ éƒ½éœ€è¦è‡ªå·±åšä¸€ç‚¹è„‘ç­‹è½¬æ¢ï¼Œè€Œè¿™æ­£æ˜¯æˆ‘ä¸€ç›´æåŠ›æƒ³è¦é¿å…çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¥½çš„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;é¿å…éœ€è¦è„‘ç­‹è½¬æ¢çš„ä¸€ä¸ªæ¯”è¾ƒæœ‰æ•ˆçš„åŠæ³•å°±æ˜¯ï¼šä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡åã€‚&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/services/find_or_create_topic.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;FindOrCreateTopic&lt;/span&gt;
  &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
  &lt;span class="nf"&gt;def&lt;/span&gt; &lt;span class="nb"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;perform&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;slug&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sluggify&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;find&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;slug&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;.&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nf"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ ·åšå¯ä»¥é¿å…è„‘ç­‹è½¬æ¢ã€‚æ¢ç”¨å«ä¹‰æ˜ç¡®çš„å˜é‡åä¹‹åï¼Œæ¯å½“ä½ å†è°ƒç”¨findæ–¹æ³•ï¼Œå°±ä¼šçŸ¥é“findæ¥å—ä¸€ä¸ªuserå’Œä¸€ä¸ªslugåšå‚æ•°ã€‚&lt;/p&gt;

&lt;h3&gt;æ²¡æœ‰ä½¿ç”¨ç±»æ¥éš”ç¦»Rake Tasks&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;ä¸å¥½çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# lib/tasks/recalculate_badges_for_users.rake&lt;/span&gt;
&lt;span class="n"&gt;namespace&lt;/span&gt; &lt;span class="ss"&gt;:users&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;

  &lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="s2"&gt;"Recalculates Badges for Users"&lt;/span&gt;
  &lt;span class="n"&gt;task&lt;/span&gt; &lt;span class="ss"&gt;recalculate_badges: :environment&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
    &lt;span class="n"&gt;user_count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;User&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;count&lt;/span&gt;

    &lt;span class="no"&gt;User&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;find_each&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
      &lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;user_count&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; Recalculating Badges for: &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;email&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;

      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;questions_with_negative_votes&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;answers_with_negative_votes&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;grant_badge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Critic'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;

      &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;answers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;find_each&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;answer&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
        &lt;span class="n"&gt;question&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;answer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;question&lt;/span&gt;
        &lt;span class="k"&gt;next&lt;/span&gt; &lt;span class="k"&gt;unless&lt;/span&gt; &lt;span class="n"&gt;answer&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;question&lt;/span&gt;

        &lt;span class="n"&gt;days&lt;/span&gt;       &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;answer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;created_at&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;question&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;created_at&lt;/span&gt;
        &lt;span class="n"&gt;days_count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;days&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;day&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;round&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;days_count&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;question&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;vote_count&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
          &lt;span class="n"&gt;grant_badge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Necromancer'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªrake taskæœ‰é—®é¢˜å¤šå¤šã€‚æœ€ä¸»è¦çš„é—®é¢˜æ˜¯ï¼Œè¿™ä¸ªrakeå¤ªé•¿äº†è€Œä¸”ä¸å¥½æµ‹è¯•ã€‚ä»£ç å†™çš„åˆä¸€çœ‹ä¹Ÿå¾ˆéš¾ç†è§£ã€‚ä½ åªå¥½ç›¸ä¿¡è¿™ä¸ªtaskçš„ç¡®æ˜¯ä¸ºç”¨æˆ·é‡æ–°è®¡ç®—å¥–ç« ç³»ç»Ÿçš„ï¼Œå› ä¸ºå®ƒä¸Šé¢æè¿°å°±è¿™ä¹ˆå†™çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¥½çš„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è§£å†³è¿™ä¸ªé—®é¢˜æœ€å¥½çš„åŠæ³•å°±æ˜¯ï¼ŒæŠŠä¸šåŠ¡é€»è¾‘æŒªåˆ°ä¸€ä¸ªç‰¹å®šçš„ç±»é‡Œé¢ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬æ–°å»ºä¸ªç±»æ¥æå®šå®ƒå§ã€‚&lt;/p&gt;
&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# app/services/recalculate_badge.rb&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RecalculateBadge&lt;/span&gt;
  &lt;span class="kp"&gt;attr_reader&lt;/span&gt; &lt;span class="ss"&gt;:user&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;initialize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="vi"&gt;@user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;grant_citric&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;grant_citric?&lt;/span&gt;
      &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;grant_badge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Critic'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;grant_necromancer&lt;/span&gt;
    &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;answers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;find_each&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;answer&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
      &lt;span class="n"&gt;question&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;answer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;question&lt;/span&gt;
      &lt;span class="k"&gt;next&lt;/span&gt; &lt;span class="k"&gt;unless&lt;/span&gt; &lt;span class="n"&gt;answer&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;question&lt;/span&gt;

      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;grant_necromancer?&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;answer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;question&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;grant_badge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'Necromancer'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

  &lt;span class="kp"&gt;protected&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;grant_citric?&lt;/span&gt;
      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;questions_with_negative_votes&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt;
      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;answers_with_negative_votes&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;days_count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;answer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;question&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="n"&gt;days&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;answer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;created_at&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;question&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;created_at&lt;/span&gt;
      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;days&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;day&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nf"&gt;round&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;grant_necromancer?&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;answer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;question&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;days_count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;answer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;question&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;question&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;vote_count&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class="highlight ruby"&gt;&lt;code&gt;&lt;span class="c1"&gt;# lib/tasks/recalculate_badges_for_users.rake&lt;/span&gt;
&lt;span class="n"&gt;namespace&lt;/span&gt; &lt;span class="ss"&gt;:users&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;

  &lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="s2"&gt;"Recalculates Badges for Users"&lt;/span&gt;
  &lt;span class="n"&gt;task&lt;/span&gt; &lt;span class="ss"&gt;recalculate_badges: :environment&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
    &lt;span class="n"&gt;user_count&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;User&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;count&lt;/span&gt;

    &lt;span class="no"&gt;User&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;find_each&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;
      &lt;span class="nb"&gt;puts&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/&lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;user_count&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; Recalculating Badges for: &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;email&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
      &lt;span class="n"&gt;task&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;RecalculateBadge&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="n"&gt;task&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;grant_citric&lt;/span&gt;
      &lt;span class="n"&gt;task&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;grant_necromancer&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¦‚ä½ æ‰€è§ï¼Œç°åœ¨è¿™ä¸ªrake taskå¯è¯»æ€§è¦å¥½çš„å¤šï¼Œè€Œä¸”è¿˜å¯ä»¥å•ç‹¬æµ‹è¯•æ¯ä¸€ç§æ‰¹å‡†å¾½ç« çš„æ–¹æ³•ã€‚é™¤æ­¤ä»¥å¤–æˆ‘ä¹ˆä¹Ÿå¯ä»¥åœ¨æœ‰éœ€è¦æ—¶å¤ç”¨è¿™ä¸ªç±»ã€‚å½“ç„¶è¿™æ®µä»£ç åªæ˜¯ç‚¹åˆ°å³æ­¢ï¼Œè¯¸ä½å¯ä»¥å†åšè¿›ä¸€æ­¥ä¼˜åŒ–ã€‚&lt;/p&gt;

&lt;h3&gt;æ²¡æœ‰éµå¾ª Sandi Metz çš„è§„åˆ™&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;æ¯ä¸ªç±»ä»£ç ä¸å¯ä»¥è¶…è¿‡100è¡Œ&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªæ–¹æ³•ä»£ç ä¸å¯ä»¥è¶…è¿‡5è¡Œ&lt;/li&gt;
&lt;li&gt;æ–¹æ³•å‚æ•°ä¸å¯ä»¥è¶…è¿‡4ä¸ªï¼Œhashé¡¹ä¹ŸåŒ…æ‹¬åœ¨å†…&lt;/li&gt;
&lt;li&gt;æ§åˆ¶å™¨ä¹‹å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡ã€‚è€Œä¸”è§†å›¾å±‚åªå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œå¹¶ä¸”åªå¯ä»¥åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨æ–¹æ³•ï¼ˆ@object.collaborator.valueè¿™ç§æ˜¯ä¸å¯ä»¥çš„ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ›´å¤šå…³äºSandi Metzçš„è§„åˆ™è¯·ç§»æ­¥è‡³&lt;a href="http://robots.thoughtbot.com/"&gt;thoughtbot&lt;/a&gt;,å‚é˜…&lt;a href="http://robots.thoughtbot.com/sandi-metz-rules-for-developers"&gt;Sandi Metz&amp;#39; Rules For Developers&lt;/a&gt;è¿™ç¯‡åšæ–‡ã€‚&lt;/p&gt;
</content>
  </entry>
</feed>
